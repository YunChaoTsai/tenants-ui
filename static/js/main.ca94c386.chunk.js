(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,t){},144:function(e,t){},145:function(e,t){},146:function(e,t){},155:function(e,t,a){e.exports=a(324)},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"key",function(){return U}),a.d(n,"AuthUserStatus",function(){return O}),a.d(n,"actions",function(){return B}),a.d(n,"reducer",function(){return G}),a.d(n,"selectors",function(){return Q});var r={};a.r(r),a.d(r,"key",function(){return Xa}),a.d(r,"actions",function(){return tn}),a.d(r,"reducer",function(){return an}),a.d(r,"selectors",function(){return nn});var c={};a.r(c),a.d(c,"key",function(){return Tn}),a.d(c,"actions",function(){return An}),a.d(c,"reducer",function(){return Pn}),a.d(c,"selectors",function(){return qn});var l={};a.r(l),a.d(l,"key",function(){return er}),a.d(l,"actions",function(){return tr}),a.d(l,"reducer",function(){return ar}),a.d(l,"selectors",function(){return nr});var i={};a.r(i),a.d(i,"key",function(){return pr}),a.d(i,"actions",function(){return hr}),a.d(i,"reducer",function(){return br}),a.d(i,"selectors",function(){return gr});var o={};a.r(o),a.d(o,"key",function(){return xr}),a.d(o,"actions",function(){return Nr}),a.d(o,"reducer",function(){return Cr}),a.d(o,"selectors",function(){return Tr});var u={};a.r(u),a.d(u,"key",function(){return Hr}),a.d(u,"actions",function(){return Ur}),a.d(u,"reducer",function(){return Vr}),a.d(u,"selectors",function(){return Br});var s={};a.r(s),a.d(s,"key",function(){return _c}),a.d(s,"actions",function(){return Sc}),a.d(s,"reducer",function(){return Oc}),a.d(s,"selectors",function(){return jc});var m={};a.r(m),a.d(m,"key",function(){return Yc}),a.d(m,"actions",function(){return Hc}),a.d(m,"reducer",function(){return Lc}),a.d(m,"selectors",function(){return Uc});var d={};a.r(d),a.d(d,"key",function(){return rl}),a.d(d,"actions",function(){return ll}),a.d(d,"reducer",function(){return il}),a.d(d,"selectors",function(){return ol});var f={};a.r(f),a.d(f,"key",function(){return vl}),a.d(f,"actions",function(){return yl}),a.d(f,"reducer",function(){return Sl}),a.d(f,"selectors",function(){return Ol});var p={};a.r(p),a.d(p,"key",function(){return Rl}),a.d(p,"actions",function(){return Ll}),a.d(p,"reducer",function(){return Ul}),a.d(p,"selectors",function(){return Vl}),a.d(p,"isTripConverted",function(){return Bl});var E={};a.r(E),a.d(E,"key",function(){return Gl}),a.d(E,"actions",function(){return Zl}),a.d(E,"reducer",function(){return Wl}),a.d(E,"selectors",function(){return Kl});var h={};a.r(h),a.d(h,"key",function(){return Si}),a.d(h,"actions",function(){return ji}),a.d(h,"reducer",function(){return xi}),a.d(h,"selectors",function(){return wi});var b={};a.r(b),a.d(b,"key",function(){return Mi}),a.d(b,"actions",function(){return Di}),a.d(b,"reducer",function(){return Yi}),a.d(b,"selectors",function(){return Ri});var g={};a.r(g),a.d(g,"key",function(){return No}),a.d(g,"actions",function(){return To}),a.d(g,"reducer",function(){return ko}),a.d(g,"selectors",function(){return Ao});var v={};a.r(v),a.d(v,"key",function(){return tu}),a.d(v,"actions",function(){return nu}),a.d(v,"reducer",function(){return ru}),a.d(v,"selectors",function(){return cu});var _={};a.r(_),a.d(_,"key",function(){return ju}),a.d(_,"actions",function(){return wu}),a.d(_,"reducer",function(){return Nu}),a.d(_,"selectors",function(){return Cu});var y={};a.r(y),a.d(y,"key",function(){return Hu}),a.d(y,"actions",function(){return Uu}),a.d(y,"reducer",function(){return Vu}),a.d(y,"selectors",function(){return Bu});var S={};a.r(S),a.d(S,"key",function(){return ls}),a.d(S,"actions",function(){return os}),a.d(S,"reducer",function(){return us}),a.d(S,"selectors",function(){return ss});var O,j=a(16),x=a(0),w=a.n(x),N=a(45),C=a.n(N),T=a(13),k=a(24),A=a(10),P=a.n(A),q=a(5),F=a(1),M=(a(171),a(2)),I=a.n(M),D=a(6),Y=a(7),R=a(4),H=a(3),L=a(12),U="AUTHENTICATED_USER_STATE";!function(e){e.DEFAULT="DEFAULT",e.CHECKING="CHECKING",e.UN_AUTHENTICATED="UN_AUTHENTICATED",e.AUTHENTICATING="AUTHENTICATING",e.AUTHENTICATED="AUTHENTICATED"}(O||(O={}));var V={data:void 0,status:O.DEFAULT},B={checkAuth:Object(L.createAsyncAction)("@AUTH/CHECK_AUTH_REQUEST","@AUTH/CHECK_AUTH_SUCCESS","@AUTH/CHECK_AUTH_FAILED")(),login:Object(L.createAsyncAction)("@AUTH/LOGIN_REQUEST","@AUTH/LOGIN_SUCCESS","@AUTH/LOGIN_FAILED")(),logout:Object(L.createAsyncAction)("@AUTH/LOGOUT_REQUEST","@AUTH/LOGOUT_SUCCESS","@AUTH/LOGOUT_FAILED")()};function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(L.getType)(B.checkAuth.request):return Object(H.a)({},e,{status:O.CHECKING});case Object(L.getType)(B.login.request):return Object(H.a)({},e,{status:O.AUTHENTICATING});case Object(L.getType)(B.checkAuth.success):case Object(L.getType)(B.login.success):return Object(H.a)({},e,{status:O.AUTHENTICATED,data:t.payload});case Object(L.getType)(B.checkAuth.failure):case Object(L.getType)(B.login.failure):return Object(H.a)({},e,{status:O.UN_AUTHENTICATED});case Object(L.getType)(B.logout.success):return Object(H.a)({},e,{status:O.UN_AUTHENTICATED,data:void 0});default:return e}}function Q(e){return{get state(){return e[U]},get user(){return this.state.data},get status(){return this.state.status},get noRequestYet(){return this.status===O.DEFAULT},get isAuthenticated(){return this.status===O.AUTHENTICATED},get isAuthenticating(){return this.status===O.AUTHENTICATING||this.status===O.CHECKING},get wait(){return this.isAuthenticating||this.noRequestYet}}}var Z=a(9),W=a(89),K=a.n(W);function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.a.parse(e,Object(H.a)({ignoreQueryPrefix:!0},t))}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.a.stringify(e,Object(H.a)({addQueryPrefix:!0},t))}function $(e,t){return function(a){function n(n){return w.a.createElement(e.Consumer,null,function(e){var r=Object(H.a)(Object(j.a)({},t,e),n);return w.a.createElement(a,r)})}n.WrappedComponent=a;var r=a.displayName||a.name||"Component",c=e.Consumer.name||"Context.Consumer";return n.displayName=r+"("+c+"."+t+")",n}}function X(e){if(null===e||void 0===e)return"";var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function ee(){return Object(T.b)()}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please enter a valid number";return R.number().transform(function(e,t){return this.isType(e)?e:t&&t.trim()?t:null}).nullable(!0).typeError(e)}function ae(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t.map(function(e){if(Array.isArray(e)){var t=Object(Z.a)(e,2),a=t[0],n=t[1];return a?n:void 0}return e}).filter(function(e){return void 0!==e&&""!==e&&null!==e});return w.a.createElement("span",null,n.reduce(function(e,t,a){return e.concat([w.a.createElement("span",{key:a},t)]).concat(a!==n.length-1?[w.a.createElement("span",{key:"".concat(t,"-seperator")}," \u2022\xa0")]:[])},[]))}function ne(e){return{getUser:function(){var t=Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/me").then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}}var re=function(){return function(){var e=Object(D.a)(I.a.mark(function e(t,a,n){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.xhr,t(B.checkAuth.request()),e.abrupt("return",ne(r).getUser().then(function(e){return t(B.checkAuth.success(e)),e}).catch(function(e){return t(B.checkAuth.failure(e)),Promise.reject(e)}));case 3:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()};function ce(){var e=ee();return Object(x.useCallback)(function(){return e(re())},[e])}function le(){return Object(H.a)({},Object(T.c)(function(e){var t=Q(e);return{user:t.user,wait:t.wait,isAuthenticating:t.isAuthenticating,isAuthenticated:t.isAuthenticated}}),{fetchUser:ce()})}function ie(e){var t=e.children,a=void 0===t?null:t,n=le(),r=n.wait,c=n.user;return r?null:c?w.a.createElement(x.Fragment,null,a):w.a.createElement(q.b,null,function(e){var t=e.location;return w.a.createElement(q.d,{to:"/login?next=".concat(t.pathname),noThrow:!0})})}function oe(e){var t=e.children,a=void 0===t?null:t,n=e.to,r=void 0===n?"/":n,c=le(),l=c.wait,i=c.user;return l?null:i?w.a.createElement(q.d,{to:r,noThrow:!0}):w.a.createElement(x.Fragment,null,a)}var ue=a(11),se=a(14),me=a.n(se);function de(e){var t=e.className,a=void 0===t?"":t,n=Object(ue.a)(e,["className"]);return w.a.createElement(Y.a,Object.assign({component:F.g,className:"".concat(a)},n))}function fe(e){var t=e.as,a=void 0===t?"input":t,n=e.id,r=e.name,c=e.className,l=Object(ue.a)(e,["as","id","name","className"]);return w.a.createElement(a,Object.assign({className:me()("input",c),name:r,id:n||r},l))}function pe(e){var t=e.name,a=e.render,n=e.children,r=(e.ref,Object(ue.a)(e,["name","render","children","ref"]));return w.a.createElement(Y.b,{name:t,render:function(e){var t=e.field.name,c=e.form,l=c.touched,i=c.errors,o=Object(Y.g)(l,t),u=Object(Y.g)(i,t);return w.a.createElement(F.h,Object.assign({hasError:!(!o||!u),"aria-errormessage":u},r),n||a(e),w.a.createElement(de,{name:t}))}})}function Ee(e){var t=e.label,a=e.name,n=e.type,r=e.className,c=e.labelPlacement,l=e.noGroup,i=Object(ue.a)(e,["label","name","type","className","labelPlacement","noGroup"]);c=c||("checkbox"===n||"radio"===n?"after":"before");var o=t?w.a.createElement("label",{htmlFor:a},t):null;function u(e){var t=e.field;return w.a.createElement(x.Fragment,null,"before"===c?o:null,w.a.createElement(fe,Object.assign({type:n},t,i)),"after"===c?o:null)}return l?w.a.createElement(Y.b,{name:a,render:u}):w.a.createElement(pe,{name:a,className:r,render:u})}var he=Object(Y.f)(function(e){var t=e.onChange,a=e.formik,n=e.debounce,r=void 0===n?300:n,c=a.values,l=Object(x.useRef)(-1);return Object(x.useEffect)(function(){if("undefined"!==typeof window)return l.current=window.setTimeout(function(){t(a)},r),function(){l.current&&window.clearTimeout(l.current)}},[c]),null}),be={publicUrl:"",appEnv:"production",appUrl:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_BASE:"https://api.tourepedia.com",REACT_APP_PUSHER_APP_KEY:"42270f95b41435aa79e3",REACT_APP_API_BASE_URL:"https://api.tourepedia.com/api",REACT_APP_PUSHER_APP_CLUSTER:"ap2",REACT_APP_APPLICATION_NAME:"Tourepedia Admin Dashboard",REACT_APP_VERSION:"1.16.0"}).APP_URL,appVersion:"1.16.0",appName:"Tourepedia Admin Dashboard",serverBase:"https://api.tourepedia.com",apiBaseUrl:"https://api.tourepedia.com/api",pusher:{key:"42270f95b41435aa79e3",cluster:"ap2",authEndpoint:"https://api.tourepedia.com/broadcasting/auth"}};function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ve(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _e=w.a.createElement("defs",null,w.a.createElement("linearGradient",{id:"be60935f-ac8f-4117-88a8-c3e19524f342",x1:340.5,y1:874.69,x2:340.5,y2:452.37,gradientUnits:"userSpaceOnUse"},w.a.createElement("stop",{offset:0,stopColor:"gray",stopOpacity:.25}),w.a.createElement("stop",{offset:.54,stopColor:"gray",stopOpacity:.12}),w.a.createElement("stop",{offset:1,stopColor:"gray",stopOpacity:.1}))),ye=w.a.createElement("title",null,"dashboard"),Se=w.a.createElement("path",{d:"M1143.14,213.61a231.21,231.21,0,0,0-44.83-60.38l-621.86-5.18,512-60.79A337.39,337.39,0,0,0,884.57,69.84C835.28,36.19,771.93,16,702.83,16c-62,0-119.33,16.29-166.07,43.93-39.72-17.3-85-27.11-133.11-27.11-138.17,0-253.3,80.9-279.13,188.19Z",transform:"translate(-35 -15.95)",fill:"#6c63ff",opacity:.1}),Oe=w.a.createElement("path",{d:"M1165,303.59a197,197,0,0,0-19.38-84.92L67.86,314.31a209.54,209.54,0,0,0-25.25,53.91l333.75,42.06L35,440.94C45.27,562.4,168.43,658.3,318.88,658.3c75.73,0,144.54-24.3,195.53-63.93,51.15,40.38,120.62,65.21,197.17,65.21,113.57,0,211.6-54.67,257.25-133.71,91.58-24.58,162.72-86.28,187.07-163.47L733.83,307.06H1165C1165,305.9,1165,304.75,1165,303.59Z",transform:"translate(-35 -15.95)",fill:"#6c63ff",opacity:.1}),je=w.a.createElement("ellipse",{cx:499.98,cy:855.15,rx:289.98,ry:12.94,fill:"#6c63ff",opacity:.1}),xe=w.a.createElement("path",{d:"M707.09,848.34v7.82H475.84v-6.35a76,76,0,0,0,5.23-140.37H705.52a76,76,0,0,0,1.57,138.9Z",transform:"translate(-35 -15.95)",fill:"#c8cad7"}),we=w.a.createElement("path",{d:"M705.52,709.44a76.11,76.11,0,0,0-42,50.39H523.08a76.13,76.13,0,0,0-42-50.39Z",transform:"translate(-35 -15.95)",opacity:.1}),Ne=w.a.createElement("path",{d:"M211,669.6v43.9c0,24.24,17.74,43.89,39.63,43.89H931.05c21.89,0,39.63-19.65,39.63-43.89V669.6Z",transform:"translate(-35 -15.95)",fill:"#c8cad7"}),Ce=w.a.createElement("path",{d:"M707.09,848.34v7.82H475.84v-6.35a76,76,0,0,0,17.83-9.5H692.91A76.39,76.39,0,0,0,707.09,848.34Z",transform:"translate(-35 -15.95)",opacity:.1}),Te=w.a.createElement("rect",{x:364.42,y:826.8,width:384.09,height:23.17,rx:9.5,ry:9.5,fill:"#c8cad7"}),ke=w.a.createElement("path",{d:"M970.68,188.57A39.62,39.62,0,0,0,931.05,149H250.66A39.62,39.62,0,0,0,211,188.57V678.14H970.68Z",transform:"translate(-35 -15.95)",fill:"#474157"}),Ae=w.a.createElement("path",{d:"M950,206.25V626.92a19.5,19.5,0,0,1-19.51,19.51H251.27a19.5,19.5,0,0,1-19.51-19.51V206.25a19.51,19.51,0,0,1,19.51-19.51H930.44A19.51,19.51,0,0,1,950,206.25Z",transform:"translate(-35 -15.95)",fill:"#4c4c78"}),Pe=w.a.createElement("circle",{cx:555.85,cy:151.89,r:9.15,fill:"#fff"}),qe=w.a.createElement("circle",{cx:555.85,cy:699.38,r:22.56,fill:"#fff"}),Fe=w.a.createElement("path",{d:"M383.53,196.5V646.43H251.27a19.5,19.5,0,0,1-19.51-19.51V206.25l.71-2.65,1.9-7.1Z",transform:"translate(-35 -15.95)",fill:"#fff"}),Me=w.a.createElement("polygon",{points:"365.5 187.65 365.5 228.15 196.76 228.15 196.76 190.3 197.47 187.65 365.5 187.65",fill:"#4c4c78"}),Ie=w.a.createElement("path",{d:"M950,206.25H231.76a19.5,19.5,0,0,1,19.51-19.5H930.44A19.5,19.5,0,0,1,950,206.25Z",transform:"translate(-35 -15.95)",fill:"#c8cad7"}),De=w.a.createElement("circle",{cx:216.27,cy:180.55,r:4.88,fill:"#ededf4"}),Ye=w.a.createElement("circle",{cx:230.9,cy:180.55,r:4.88,fill:"#ededf4"}),Re=w.a.createElement("circle",{cx:245.53,cy:180.55,r:4.88,fill:"#ededf4"}),He=w.a.createElement("rect",{x:221.98,y:205.48,width:101.33,height:9.33,fill:"#6c63ff"}),Le=w.a.createElement("rect",{x:221.98,y:250.98,width:101.33,height:9.33,fill:"#6c63ff",opacity:.5}),Ue=w.a.createElement("rect",{x:221.98,y:283.15,width:101.33,height:9.33,fill:"#6c63ff",opacity:.5}),Ve=w.a.createElement("rect",{x:221.98,y:315.32,width:101.33,height:9.33,fill:"#6c63ff",opacity:.5}),Be=w.a.createElement("rect",{x:221.98,y:347.48,width:101.33,height:9.33,fill:"#6c63ff",opacity:.5}),Ge=w.a.createElement("rect",{x:221.98,y:379.65,width:101.33,height:9.33,fill:"#6c63ff",opacity:.5}),Qe=w.a.createElement("rect",{x:221.98,y:411.82,width:101.33,height:9.33,fill:"#6c63ff",opacity:.5}),Ze=w.a.createElement("rect",{x:221.98,y:443.98,width:101.33,height:9.33,fill:"#6c63ff",opacity:.5}),We=w.a.createElement("rect",{x:431.49,y:239.79,width:449.01,height:1.5,fill:"#dce0ed",opacity:.5}),Ke=w.a.createElement("rect",{x:431.49,y:274.62,width:449.01,height:1.5,fill:"#dce0ed",opacity:.5}),ze=w.a.createElement("rect",{x:431.49,y:309.46,width:449.01,height:1.5,fill:"#dce0ed",opacity:.5}),Je=w.a.createElement("rect",{x:431.49,y:344.29,width:449.01,height:1.5,fill:"#dce0ed",opacity:.5}),$e=w.a.createElement("rect",{x:431.49,y:379.12,width:449.01,height:1.5,fill:"#dce0ed",opacity:.5}),Xe=w.a.createElement("polygon",{points:"880.51 380.61 430.94 380.61 430.94 312.11 472.17 332.43 514.84 338.21 552.28 326.92 597.45 291.89 620.17 278.77 636.78 275.57 652.67 276.42 678.81 289.33 714.33 311.96 742.21 315.55 764.32 307.93 811.17 269.55 835.09 261.02 860.12 264.89 880.51 276.66 880.51 380.61",fill:"#6c63ff",opacity:.5}),et=w.a.createElement("path",{d:"M544.3,354.18c-40.48,0-77.9-24.76-78.36-25.08l1.11-1.66c.58.39,58.16,38.49,107.09,19.4C592,339.89,604.68,329.06,617,318.6c12.83-10.93,24.95-21.26,41.46-25.74,19-5.13,39.65-.48,55.38,12.44,13.44,11.05,40.22,28.8,68.51,23.49,14.42-2.7,26.58-13.24,39.45-24.39C846.44,283,872,260.91,916.09,292.63l-1.17,1.62c-42.85-30.79-67.76-9.21-91.84,11.66-13.08,11.34-25.44,22-40.39,24.85-29.1,5.45-56.44-12.64-70.15-23.91-15.23-12.52-35.26-17-53.58-12.05-16.09,4.36-28,14.54-40.69,25.32-12.41,10.57-25.25,21.51-43.4,28.59A83.88,83.88,0,0,1,544.3,354.18Z",transform:"translate(-35 -15.95)",fill:"#6c63ff"}),tt=w.a.createElement("circle",{cx:647.55,cy:275.37,r:11.13,fill:"#6c63ff"}),at=w.a.createElement("path",{d:"M403.62,533.19c-15.21-8.76-21-10.93-21-10.94l-.31-.22a12.66,12.66,0,0,1-3.84-4.85c0-.35,0-.7,0-1v.1c.25-4.64,3.54-8.85,6.67-12.53q4-4.71,8-9.41A9.19,9.19,0,0,0,395.2,491a7.49,7.49,0,0,0,.22-2c0-.28,0-.55,0-.82,0-2.34-.11-4.68-.19-7-.08-2.05-.6-4.62-2.65-5-1.06-.22-2.46.16-3-.75a1.68,1.68,0,0,1-.14-1.21s0,.06,0,.09a.52.52,0,0,1,0-.11,27.65,27.65,0,0,0,.76-4.81,6.9,6.9,0,0,0-.33-2.43c-1.19-3.39-5.26-4.78-8.86-5.42s-7.64-1.19-9.9-4a32.74,32.74,0,0,0-2-2.71,7.88,7.88,0,0,0-3.69-1.82,20.72,20.72,0,0,0-13.38,1.17c-1.74.78-3.49,1.82-5.4,1.71s-3.68-1.5-5.64-1.83c-3.16-.54-6.19,1.79-7.75,4.54a11,11,0,0,0-1.43,5.35c0,.1,0,.21,0,.31h0a7.86,7.86,0,0,0,2.06,5.46c1.36,1.42,3.39,2.39,4,4.25.23.76.18,1.58.38,2.34,0,.1.06.19.09.29l-.11.13a23.77,23.77,0,0,0-5,14.62,24.26,24.26,0,0,0,17,23c0,.23,0,.47,0,.72a10.34,10.34,0,0,1-3.3,8.05l-21.58,8.66s-13-1.54-17.68,17.45a32.16,32.16,0,0,0-.8,9.63c.17,2.87-.23,7.91-3.56,14.43-5.33,10.44-4.12,34.39,6.78,36.76,10.29,2.24,14.32,1.31,14.74,1.2l0,.42c-.17,4.5-1.8,43.26-7.73,48-1.65,1.29-1.34,2.17,0,2.76,0,0,0,.25,0,.7-.18,2.84-1.1,13.63-5.07,19.78C307.48,690,308,731,308,731l-3.14,24.19s1.93,14.94,0,17.55c-1.73,2.33-4,57.61-4.52,69.59h-.2a5.83,5.83,0,0,0-4.66,2.84C292.9,849.31,284,856.94,284,856.94c-1.93,2.75-9.09,5.38-12.87,6.62a8.25,8.25,0,0,0-1.46.63,7.68,7.68,0,0,0-3.25,3.42,3.66,3.66,0,0,0-.34,2.85c1,2.37,21.07,4,26.15,1.66,4-1.86,19.84-4.32,26.42-5.28a5.42,5.42,0,0,0,4.7-4.7,3.1,3.1,0,0,0-.6-2.35h0c-1.26-1.56-1.91-5.82-2.2-8.6a5.85,5.85,0,0,0,1.48-.88,63.09,63.09,0,0,1,3.63-25.38c4.84-12.8,6.3-36.52,5.09-51.94,0,0,14.77-63.57,26.4-69.5h0c.18.22,5.82,7.46,6.54,29.88.72,22.77,8.95,37.71,8.95,37.71s-3.63,38.66,0,53.13L367.87,847a7.39,7.39,0,0,1-.57-.52s.14.64.34,1.65l-.1.48.2.05c.54,2.85,1.34,7.82,1,10.74-.19,1.67-.65,3.94-1,6.18-.5,3.51-.64,6.92,1.21,7.66,3,1.22,20.83,2.89,23.86-1a5.61,5.61,0,0,0,.88-5.86,6,6,0,0,0-.88-1.49s-4.73-7.73-3.39-13.18a4,4,0,0,0-.57-3.12A161.08,161.08,0,0,1,393,823c3-11.41,9.42-36.43,4.72-52.89h0c-.18-.64-.38-1.28-.6-1.9a71,71,0,0,1-2.67-27.75,56.41,56.41,0,0,1,0-24.19C397.33,703,399.36,690,399.36,690s1.6-17.55.2-28.31l-.09-.69.76-.17s-4.11-18.26-5.57-29.88c-.34-2.75-.79-6.22-1.28-9.93a26.22,26.22,0,0,0,3.95-1c13.08-4.51,17.19-45.31,17.19-45.31V561.77S418.88,542,403.62,533.19Zm-97.43,315-.64-.34h0Z",transform:"translate(-35 -15.95)",fill:"url(#be60935f-ac8f-4117-88a8-c3e19524f342)"}),nt=w.a.createElement("path",{d:"M395.73,768.6c5.67,16.31-1,42.78-4,54.6a165.7,165.7,0,0,0-4,26,55,55,0,0,1-20.8-.48l5-24.34c-3.54-14.42,0-52.95,0-52.95s-8-14.9-8.74-37.59c-.7-22.33-6.2-29.55-6.38-29.78h0C345.38,710,331,773.33,331,773.33c1.18,15.36-.24,39-5,51.77a64.05,64.05,0,0,0-3.55,25.29c-1.65,1.39-3.95,1.63-6.43,1.23-6.75-1.09-14.84-6.91-14.84-6.91s2.6-69,4.49-71.62,0-17.49,0-17.49l3.07-24.11s-.47-40.89,4-48c3.88-6.13,4.77-16.89,4.95-19.71,0-.45,0-.7,0-.7l6.84-8.19s66.19-5,71.15,0c1.22,1.22,2,4,2.42,7.48,1.36,10.72-.2,28.21-.2,28.21s-2,13-4.82,26.23a57.4,57.4,0,0,0,0,24.11A72,72,0,0,0,395.73,768.6Z",transform:"translate(-35 -15.95)",fill:"#65617d"}),rt=w.a.createElement("path",{d:"M391.59,872.25c-2.95,3.9-20.32,2.25-23.28,1-1.81-.75-1.67-4.14-1.18-7.64.31-2.23.76-4.5.94-6.15.48-4.26-1.41-12.89-1.41-12.89s3.9,4.14,4.84,0a4.5,4.5,0,0,1,3.37-3.2,8.84,8.84,0,0,1,6.14.38c3.07,1.33,8.19,4.17,7.27,8-1.3,5.43,3.31,13.13,3.31,13.13a5.93,5.93,0,0,1,.86,1.49A5.67,5.67,0,0,1,391.59,872.25Z",transform:"translate(-35 -15.95)",fill:"#a27772"}),ct=w.a.createElement("path",{d:"M391.59,872.25c-2.95,3.9-20.32,2.25-23.28,1-1.81-.75-1.67-4.14-1.18-7.64,1.86.87,5,1.6,10.32,1.11a28.9,28.9,0,0,1,3.72-.12,85.06,85.06,0,0,0,11.28-.22A5.67,5.67,0,0,1,391.59,872.25Z",transform:"translate(-35 -15.95)",opacity:.1}),lt=w.a.createElement("path",{d:"M331,773.33c1.18,15.36-.24,39-5,51.77a64.05,64.05,0,0,0-3.55,25.29c-1.65,1.39-3.95,1.63-6.43,1.23,1.43-10,7.5-52.93,11.4-86.86,4.43-38.65,25.17-65.24,25.17-65.24l4.14,4.55C345.38,710,331,773.33,331,773.33Z",transform:"translate(-35 -15.95)",opacity:.1}),it=w.a.createElement("path",{d:"M384.5,524.9l-2.89,14.18-14.13,23.76-17.43-7.45s-23.7-24.82-8.81-28.36a13.13,13.13,0,0,0,4.95-2.2c2.92-2.21,3.84-5.41,3.86-8.55a26.29,26.29,0,0,0-2.42-10.17l30.49-9.57a48.52,48.52,0,0,0-2.19,12.35c-.23,8.3,2.85,12.4,5.38,14.35A9.06,9.06,0,0,0,384.5,524.9Z",transform:"translate(-35 -15.95)",fill:"#fbbebe"}),ot=w.a.createElement("path",{d:"M378.12,496.54a48.52,48.52,0,0,0-2.19,12.35,24.1,24.1,0,0,1-25.88,7.39,26.29,26.29,0,0,0-2.42-10.17Z",transform:"translate(-35 -15.95)",opacity:.1}),ut=w.a.createElement("path",{d:"M381.61,492.64a24.11,24.11,0,1,1-24.11-24.11A24.05,24.05,0,0,1,381.61,492.64Z",transform:"translate(-35 -15.95)",fill:"#fbbebe"}),st=w.a.createElement("path",{d:"M384.5,524.9l-2.89,14.18-14.13,23.76-17.43-7.45s-23.7-24.82-8.81-28.36a13.13,13.13,0,0,0,4.95-2.2c-2.69,7.39,8.41,22.76,8.41,22.76,1.29,1.9,4.26.71,4.26.71,7.14-1.08,20.31-21.64,22.45-25.06A9.06,9.06,0,0,0,384.5,524.9Z",transform:"translate(-35 -15.95)",opacity:.1}),mt=w.a.createElement("path",{d:"M398.15,662.39c-4.2,1-27.42,6.09-36.22,4.81-9.69-1.42-28.54-2.36-28.54-2.36s-12,.64-15.68-1c0-.45,0-.7,0-.7l6.84-8.19s66.19-5,71.15,0C397,656.13,397.7,658.9,398.15,662.39Z",transform:"translate(-35 -15.95)",opacity:.1}),dt=w.a.createElement("path",{d:"M354.6,548.3s-12.47-17.27-7.77-24l-21.07,8.64s-12.68-1.54-17.25,17.38a33,33,0,0,0-.79,9.61c.17,2.85-.22,7.87-3.47,14.37-5.2,10.4-4,34.28,6.62,36.64s14.42,1.18,14.42,1.18-1.42,43.26-7.56,48.22,15.67,3.78,15.67,3.78,18.84,1,28.53,2.37,36.87-5,36.87-5-4-18.2-5.44-29.78-4.72-36.24-4.72-36.24l24.11-32.66s4.25-19.74-10.64-28.48-20.5-10.9-20.5-10.9-15,24.37-22.76,25.55C358.85,549,355.89,550.2,354.6,548.3Z",transform:"translate(-35 -15.95)",fill:"#ff748e"}),ft=w.a.createElement("path",{d:"M326.94,555.16s-.23,7.8,1.19,10.87,6.61,20.09,6.61,20.09H322.93s6.38-6.85,5.91-10.16S326.94,555.16,326.94,555.16Z",transform:"translate(-35 -15.95)",opacity:.1}),pt=w.a.createElement("path",{d:"M361.93,614s-26.1-6.38-28.53-11.81-9.14-17.61-9.14-17.61l2.75-3.71,12.7,10s15.13,12,22.22,13.24S361.93,614,361.93,614Z",transform:"translate(-35 -15.95)",fill:"#fbbebe"}),Et=w.a.createElement("path",{d:"M361.93,614s-26.1-6.38-28.53-11.81-9.14-17.61-9.14-17.61l2.75-3.71,12.7,10s15.13,12,22.22,13.24S361.93,614,361.93,614Z",transform:"translate(-35 -15.95)",opacity:.05}),ht=w.a.createElement("path",{d:"M384.5,583.29v14.16h-2.28a66.24,66.24,0,0,0-32.14,8.32l-4.26,2.36-1.15.64-7.33-16.5,6.86-6.15.35,0c1.68.16,8.93.76,12-.27s6.55-4.14,15.14-1.94c4.24,1.08,7.85,5.83,12,4.35Z",transform:"translate(-35 -15.95)",fill:"#fbbebe"}),bt=w.a.createElement("path",{d:"M407.31,557.52l4.73,5.32v12.88s-4,40.66-16.78,45.15-35.55-2.6-35.55-2.6-5.89-15.6-3.14-16.55,24.34-6.64,24.34-6.64-.31-23.85,4.42-30.94c0,0-3.07-22.22,7.56-22.69S407.31,557.52,407.31,557.52Z",transform:"translate(-35 -15.95)",opacity:.1}),gt=w.a.createElement("path",{d:"M408,557.52l4.73,5.32v12.88s-4,40.66-16.79,45.15-35.54-2.6-35.54-2.6-5.89-15.6-3.14-16.55,24.33-6.64,24.33-6.64-.3-23.85,4.43-30.94c0,0-3.08-22.22,7.56-22.69S408,557.52,408,557.52Z",transform:"translate(-35 -15.95)",fill:"#ff748e"}),vt=w.a.createElement("path",{d:"M375,502.88a9.31,9.31,0,0,0-.54-4.6,3.53,3.53,0,0,0-3.74-2.16c-2,.47-2.9,3.1-4.88,3.73-1.67.53-3.5-.65-4.3-2.21a11.3,11.3,0,0,1-.82-5.14c0-2,0-3.95,0-5.93,0-2.15-.07-4.47-1.4-6.16-1.65-2.1-5.52-3-8.1-2.93a6.87,6.87,0,0,0-4.63,1.86,6,6,0,0,1-4.87,1.74,4.21,4.21,0,0,1-3.39-2.94.24.24,0,0,1,0-.08,24.11,24.11,0,1,1,35.86,32A66.79,66.79,0,0,0,375,502.88Z",transform:"translate(-35 -15.95)",opacity:.1}),_t=w.a.createElement("path",{d:"M341.71,480.37a4.24,4.24,0,0,1-3.4-2.94c-.19-.76-.14-1.58-.37-2.33-.55-1.86-2.53-2.83-3.86-4.24-2.66-2.82-2.49-7.47-.61-10.87,1.53-2.74,4.48-5.05,7.57-4.52,1.91.34,3.56,1.7,5.5,1.82s3.57-.92,5.27-1.7a19.84,19.84,0,0,1,13.06-1.16,7.56,7.56,0,0,1,3.6,1.81,30.59,30.59,0,0,1,1.92,2.7c2.2,2.81,6.15,3.36,9.66,4s7.49,2,8.64,5.41c.77,2.24,0,4.67-.41,7a2,2,0,0,0,.09,1.45c.55.91,1.92.53,3,.74,2,.42,2.5,3,2.57,5q.14,3.48.19,7a9,9,0,0,1-.2,2.59,9.17,9.17,0,0,1-2,3.25l-7.81,9.38c-3.46,4.16-7.13,9-6.44,14.37-1.64.73-3.58-.68-4.12-2.4s-.11-3.56.26-5.32a65.36,65.36,0,0,0,1.23-9.23,9.34,9.34,0,0,0-.54-4.61,3.54,3.54,0,0,0-3.75-2.16c-2,.47-2.89,3.1-4.87,3.73-1.67.54-3.5-.65-4.3-2.21a11.43,11.43,0,0,1-.82-5.14v-5.93c0-2.15-.07-4.47-1.4-6.16-1.64-2.1-5.52-3-8.1-2.93a6.87,6.87,0,0,0-4.63,1.86A6,6,0,0,1,341.71,480.37Z",transform:"translate(-35 -15.95)",fill:"#7c5c5c"}),yt=w.a.createElement("path",{d:"M347.15,554.57l7.41,30.4S360.39,584.94,347.15,554.57Z",transform:"translate(-35 -15.95)",opacity:.1}),St=w.a.createElement("path",{d:"M372.45,549.48s-9.7,15.88-5.91,32.29l1.8.13S365.12,574.3,372.45,549.48Z",transform:"translate(-35 -15.95)",opacity:.1}),Ot=w.a.createElement("path",{d:"M378.59,639.31s11.9-3.94,12.77,5.2C391.36,644.51,389.11,638.24,378.59,639.31Z",transform:"translate(-35 -15.95)",opacity:.1}),jt=w.a.createElement("path",{d:"M344.2,586.83s-2.36,16.55,1.89,23.17a51.94,51.94,0,0,1-20.8,2.83l-1.42-26Z",transform:"translate(-35 -15.95)",opacity:.1}),xt=w.a.createElement("path",{d:"M345.82,608.13l-1.15.64-7.33-16.5,6.86-6.15h.35v0C344.44,586.92,342.53,601.13,345.82,608.13Z",transform:"translate(-35 -15.95)",opacity:.1}),wt=w.a.createElement("path",{d:"M344.2,586.12s-2.36,16.55,1.89,23.17a51.94,51.94,0,0,1-20.8,2.83l-8.27-26Z",transform:"translate(-35 -15.95)",fill:"#ff748e"}),Nt=w.a.createElement("path",{d:"M323.75,862.19a5.34,5.34,0,0,1-4.59,4.68c-6.41,1-21.88,3.4-25.78,5.26-5,2.37-24.58.71-25.53-1.65a3.75,3.75,0,0,1,.34-2.85,7.79,7.79,0,0,1,4.59-4c3.7-1.24,10.68-3.85,12.56-6.59,0,0,8.7-7.62,11.18-11.73a5.66,5.66,0,0,1,4.55-2.83c2.07-.1,4.37.95,5.32,5.48,0,0,11.34,6.47,14.41.8,0,0,.47,8.71,2.35,11.1h0A3.13,3.13,0,0,1,323.75,862.19Z",transform:"translate(-35 -15.95)",fill:"#a27772"}),Ct=w.a.createElement("path",{d:"M323.75,862.19a5.34,5.34,0,0,1-4.59,4.68c-6.41,1-21.88,3.4-25.78,5.26-5,2.37-24.58.71-25.53-1.65a3.75,3.75,0,0,1,.34-2.85,7.57,7.57,0,0,1,3.17-3.4c3.2,2.12,10.3,4.2,25.92,1.76,14.9-2.33,22.27-4.61,25.87-6.16h0A3.13,3.13,0,0,1,323.75,862.19Z",transform:"translate(-35 -15.95)",opacity:.1}),Tt=w.a.createElement("g",{opacity:.1},w.a.createElement("path",{d:"M388.25,475.67a.5.5,0,0,0,0-.12,21.55,21.55,0,0,0,.73-5.36,33.89,33.89,0,0,1-.73,4.3A2.62,2.62,0,0,0,388.25,475.67Z",transform:"translate(-35 -15.95)"}),w.a.createElement("path",{d:"M374.46,497.79a7,7,0,0,1,.58,2.7,8.11,8.11,0,0,0-.58-3.76,3.55,3.55,0,0,0-3.75-2.17c-2,.47-2.89,3.11-4.87,3.74-1.67.53-3.5-.66-4.3-2.22a11.17,11.17,0,0,1-.82-5.14c0-2,0-3.95,0-5.92,0-2.15-.07-4.47-1.4-6.16-1.65-2.11-5.52-3-8.11-2.94a6.83,6.83,0,0,0-4.62,1.87,6,6,0,0,1-4.87,1.73,4.19,4.19,0,0,1-3.4-2.94c-.2-.76-.14-1.57-.37-2.33-.55-1.86-2.53-2.82-3.86-4.23a7.78,7.78,0,0,1-2-5,8.09,8.09,0,0,0,2,6.06c1.33,1.41,3.31,2.38,3.86,4.24.23.75.17,1.57.37,2.33a4.23,4.23,0,0,0,3.4,2.94,6,6,0,0,0,4.87-1.74A6.93,6.93,0,0,1,351.2,477c2.59-.08,6.46.84,8.11,2.94,1.33,1.69,1.39,4,1.4,6.16,0,2,0,3.95,0,5.92a11.19,11.19,0,0,0,.82,5.15c.8,1.56,2.63,2.74,4.3,2.21,2-.63,2.85-3.26,4.87-3.74A3.57,3.57,0,0,1,374.46,497.79Z",transform:"translate(-35 -15.95)"}),w.a.createElement("path",{d:"M393.89,491.28a9.3,9.3,0,0,1-2,3.26q-3.92,4.68-7.81,9.37c-3.28,3.95-6.76,8.52-6.51,13.56.24-4.62,3.46-8.82,6.51-12.49l7.81-9.38a9.26,9.26,0,0,0,2-3.25,9,9,0,0,0,.2-2.6A6.48,6.48,0,0,1,393.89,491.28Z",transform:"translate(-35 -15.95)"}),w.a.createElement("path",{d:"M373.51,515.89a5.58,5.58,0,0,1-.24-1.27,6.33,6.33,0,0,0,.24,2.33c.53,1.72,2.48,3.13,4.12,2.4,0-.35-.07-.7-.08-1C375.93,519,374,517.57,373.51,515.89Z",transform:"translate(-35 -15.95)"})),kt=w.a.createElement("path",{d:"M295,847.42s2.47,4.34,11.43.51",transform:"translate(-35 -15.95)",opacity:.1}),At=w.a.createElement("path",{d:"M370.65,848.46s7.73,9.09,17.46,3",transform:"translate(-35 -15.95)",opacity:.1}),Pt=w.a.createElement("path",{d:"M393.13,740.94s-5.46,3.41-5.64,5.36,2.82-1.42,2.82-1.42Z",transform:"translate(-35 -15.95)",opacity:.1}),qt=w.a.createElement("path",{d:"M395.28,767.08a11.33,11.33,0,0,1-6.72,2.62c-4.08.18-3.74,5.5-1.07,3.9S395.28,767.08,395.28,767.08Z",transform:"translate(-35 -15.95)",opacity:.1}),Ft=w.a.createElement("path",{d:"M396.32,770.49s-2.62,12.86-4.75,10.38",transform:"translate(-35 -15.95)",opacity:.1}),Mt=w.a.createElement("g",{opacity:.5},w.a.createElement("rect",{x:471.17,y:458.65,width:66,height:14,fill:"#dce0ed"}),w.a.createElement("rect",{x:622.72,y:458.65,width:66,height:14,fill:"#dce0ed"}),w.a.createElement("rect",{x:774.27,y:458.65,width:66,height:14,fill:"#dce0ed"})),It=w.a.createElement("ellipse",{cx:952.73,cy:801.29,rx:26.93,ry:4.55,fill:"#6c63ff",opacity:.1}),Dt=w.a.createElement("ellipse",{cx:115.22,cy:858.74,rx:26.93,ry:4.55,fill:"#6c63ff",opacity:.1}),Yt=w.a.createElement("ellipse",{cx:893.79,cy:850.05,rx:40.21,ry:6.8,fill:"#6c63ff"}),Rt=w.a.createElement("path",{d:"M945.41,854.89a11.64,11.64,0,0,0,3.83-5.79c.5-2.3-.48-5.05-2.67-5.89-2.46-.94-5.09.76-7.09,2.49s-4.27,3.68-6.88,3.32a10.5,10.5,0,0,0,3.24-9.81,4.08,4.08,0,0,0-.9-2c-1.37-1.46-3.84-.84-5.48.31-5.2,3.66-6.65,10.72-6.68,17.08-.52-2.29-.08-4.68-.09-7s-.66-5-2.64-6.23a8,8,0,0,0-4-.94c-2.34-.09-4.95.14-6.54,1.85-2,2.13-1.47,5.69.25,8s4.36,3.8,6.77,5.42a15.13,15.13,0,0,1,4.84,4.61,4.81,4.81,0,0,1,.35.83h14.66A41.11,41.11,0,0,0,945.41,854.89Z",transform:"translate(-35 -15.95)",fill:"#6c63ff"}),Ht=w.a.createElement("path",{d:"M151.45,807.19s5.5,7.19-2.53,18-14.65,20-12,26.77c0,0,12.12-20.15,22-20.43S162.3,819.31,151.45,807.19Z",transform:"translate(-35 -15.95)",fill:"#6c63ff"}),Lt=w.a.createElement("path",{d:"M151.45,807.19a9,9,0,0,1,1.13,2.26c9.62,11.3,14.74,21.85,5.49,22.11-8.61.25-18.94,15.65-21.42,19.54a9.24,9.24,0,0,0,.29.89s12.12-20.15,22-20.43S162.3,819.31,151.45,807.19Z",transform:"translate(-35 -15.95)",opacity:.1}),Ut=w.a.createElement("path",{d:"M161.66,816.35c0,2.53-.28,4.58-.63,4.58s-.63-2-.63-4.58.35-1.34.7-1.34S161.66,813.82,161.66,816.35Z",transform:"translate(-35 -15.95)",fill:"#ffd037"}),Vt=w.a.createElement("path",{d:"M165.17,819.37c-2.22,1.21-4.16,1.94-4.32,1.63s1.49-1.54,3.71-2.75,1.35-.33,1.51,0S167.39,818.16,165.17,819.37Z",transform:"translate(-35 -15.95)",fill:"#ffd037"}),Bt=w.a.createElement("path",{d:"M122.44,807.19s-5.5,7.19,2.53,18,14.65,20,12,26.77c0,0-12.11-20.15-22-20.43S111.59,819.31,122.44,807.19Z",transform:"translate(-35 -15.95)",fill:"#6c63ff"}),Gt=w.a.createElement("path",{d:"M122.44,807.19a9,9,0,0,0-1.13,2.26c-9.62,11.3-14.74,21.85-5.49,22.11,8.61.25,18.94,15.65,21.42,19.54a7.16,7.16,0,0,1-.3.89s-12.11-20.15-22-20.43S111.59,819.31,122.44,807.19Z",transform:"translate(-35 -15.95)",opacity:.1}),Qt=w.a.createElement("path",{d:"M112.22,816.35c0,2.53.29,4.58.64,4.58s.63-2,.63-4.58-.35-1.34-.7-1.34S112.22,813.82,112.22,816.35Z",transform:"translate(-35 -15.95)",fill:"#ffd037"}),Zt=w.a.createElement("path",{d:"M108.72,819.37c2.22,1.21,4.15,1.94,4.32,1.63s-1.49-1.54-3.71-2.75-1.35-.33-1.52,0S106.5,818.16,108.72,819.37Z",transform:"translate(-35 -15.95)",fill:"#ffd037"}),Wt=w.a.createElement("path",{d:"M114,851.05s15.36-.48,20-3.77,23.63-7.24,24.78-1.95,23.08,26.29,5.74,26.43-40.29-2.7-44.91-5.51S114,851.05,114,851.05Z",transform:"translate(-35 -15.95)",fill:"#a8a8a8"}),Kt=w.a.createElement("path",{d:"M164.79,869.92c-17.34.14-40.3-2.7-44.92-5.51-3.51-2.15-4.92-9.84-5.38-13.38l-.52,0s1,12.38,5.6,15.2,27.57,5.65,44.91,5.51c5,0,6.73-1.82,6.64-4.46C170.42,868.9,168.51,869.89,164.79,869.92Z",transform:"translate(-35 -15.95)",opacity:.2}),zt=w.a.createElement("path",{d:"M501.5,572.37c0-20.44,16.63-36.14,37.08-36.14h.29v-9.3h-.29c-25.58,0-46.38,19.87-46.38,45.44a46.26,46.26,0,0,0,15.89,34.9l6.59-6.59A37,37,0,0,1,501.5,572.37Z",transform:"translate(-35 -15.95)",fill:"#6c63ff"}),Jt=w.a.createElement("path",{d:"M539.8,526.94v9.3a37.07,37.07,0,1,1-24.19,65.37L509,608.2a46.36,46.36,0,1,0,30.78-81.26Z",transform:"translate(-35 -15.95)",fill:"#6c63ff",opacity:.5}),$t=w.a.createElement("path",{d:"M843.8,535.76c20.44,0,36.14,16.63,36.14,37.08,0,.09,0,.19,0,.29h9.3c0-.1,0-.2,0-.29,0-25.57-19.87-46.38-45.44-46.38a46.24,46.24,0,0,0-34.9,15.89l6.59,6.59A37,37,0,0,1,843.8,535.76Z",transform:"translate(-35 -15.95)",fill:"#6c63ff",opacity:.5}),Xt=w.a.createElement("path",{d:"M889.23,574.06h-9.3a37.07,37.07,0,1,1-65.37-24.19L808,543.28a46.36,46.36,0,1,0,81.26,30.78Z",transform:"translate(-35 -15.95)",fill:"#6c63ff"}),ea=w.a.createElement("path",{d:"M709,529.66l-1.85,9.26c13.61,5.49,22.31,18.83,22.31,34.38a37.07,37.07,0,1,1-51.93-33.95L673.41,531A46.36,46.36,0,1,0,738.8,573.3C738.8,553.23,726.92,536.11,709,529.66Z",transform:"translate(-35 -15.95)",fill:"#6c63ff",opacity:.5}),ta=w.a.createElement("path",{d:"M693.59,535.69a32.38,32.38,0,0,1,12.91,2.68l1.85-9.25a40.9,40.9,0,0,0-14.76-2.73,46.17,46.17,0,0,0-19,4.09l4.16,8.33A36.69,36.69,0,0,1,693.59,535.69Z",transform:"translate(-35 -15.95)",fill:"#6c63ff"}),aa=function(e){var t=e.svgRef,a=ve(e,["svgRef"]);return w.a.createElement("svg",ge({id:"cb7db7bb-371f-430c-ab8e-9f8547f8cfe6","data-name":"Layer 1",width:1130,height:868.1,viewBox:"0 0 1130 868.1",ref:t},a),_e,ye,Se,Oe,je,xe,we,Ne,Ce,Te,ke,Ae,Pe,qe,Fe,Me,Ie,De,Ye,Re,He,Le,Ue,Ve,Be,Ge,Qe,Ze,We,Ke,ze,Je,$e,Xe,et,tt,at,nt,rt,ct,lt,it,ot,ut,st,mt,dt,ft,pt,Et,ht,bt,gt,vt,_t,yt,St,Ot,jt,xt,wt,Nt,Ct,Tt,kt,At,Pt,qt,Ft,Mt,It,Dt,Yt,Rt,Ht,Lt,Ut,Vt,Bt,Gt,Qt,Zt,Wt,Kt,zt,Jt,$t,Xt,ea,ta)},na=w.a.forwardRef(function(e,t){return w.a.createElement(aa,ge({svgRef:t},e))}),ra=(a.p,R.object().shape({email:R.string().email("Invalid email address").required("Email field is required"),password:R.string().required("Password field is required")})),ca={email:"",password:""};function la(e){return{login:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/login",a).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),refresh:function(){var t=Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.patch("/refresh").then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}}var ia=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,B.login.request(),t.abrupt("return",la(c).login(e).then(function(){return a(re())}).catch(function(e){return B.login.failure(e),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function oa(e){var t=e.location,a=z(t&&t.search),n=a.next;ca.email=a.email||"";var r=function(){var e=ee();return Object(x.useCallback)(function(t){return e(ia(t))},[e])}();return w.a.createElement(oe,{to:n},w.a.createElement(P.a,null,w.a.createElement("title",null,"Sign in to TAD")),w.a.createElement("div",{className:"min-h-screen flex",style:{marginLeft:"-15px",marginRight:"-15px"}},w.a.createElement("div",{className:"md:w-1/2 hidden md:block self-center"},w.a.createElement("div",{className:"px-12 py-10"},w.a.createElement(na,{className:"max-w-full h-auto"}))),w.a.createElement("div",{className:"bg-white w-full md:w-1/2 py-8"},w.a.createElement("div",{className:"mx-auto",style:{maxWidth:"250px"}},w.a.createElement("div",{className:"flex items-center"},w.a.createElement("img",{src:be.publicUrl+"/logo.png",className:"inline-block w-12 rounded-full mr-4"}),w.a.createElement("h1",{className:"text-2xl m-0"},"Tourepedia")),w.a.createElement("h2",{className:"mt-32 mb-12 text-2xl"},"Login to Dashboard"),w.a.createElement("div",null,w.a.createElement(Y.e,{initialValues:ca,onSubmit:function(e,t){t.setStatus(),r(e).catch(function(e){t.setStatus(e.message),t.setSubmitting(!1)})},validationSchema:ra,render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("p",{className:"text-red-700",role:"alert"},a):null,w.a.createElement(Ee,{label:"Email",name:"email",type:"email",autoFocus:!ca.email,id:"email",placeholder:"username@domain.com",autoComplete:"username email",required:!0,tabIndex:1,className:"mb-10"}),w.a.createElement(Ee,{label:"Password",name:"password",type:"password",id:"password",required:!0,autoComplete:"current-password",autoFocus:!!ca.email,tabIndex:2,className:"mb-10"}),w.a.createElement("footer",null,w.a.createElement(F.d,{tabIndex:3,type:"submit",disabled:t,className:"px-4"},"Login")))}})),w.a.createElement("div",{className:"mt-12 text-gray-600"},"Forgot Password ?"," ",w.a.createElement(q.a,{to:"/forgot-password"},"Click here to reset."))))))}function ua(e){return{logout:function(){var t=Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.delete("/logout").then(function(e){return localStorage.removeItem("access_token"),e}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}}var sa=function(){return function(){var e=Object(D.a)(I.a.mark(function e(t,a,n){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.xhr,e.abrupt("return",ua(r).logout().then(function(){t(B.logout.success())}));case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()};var ma=function(e){var t=e.navigate,a=e.location,n=z(a&&a.search).from,r=function(){var e=ee();return Object(x.useCallback)(function(){return e(sa())},[e])}();return Object(x.useEffect)(function(){r().then(function(){t&&t(n||"/")})},[]),w.a.createElement("div",null,"Logging out")},da=a(37),fa=a.n(da);function pa(){return localStorage.getItem("access_token")}fa.a.defaults.baseURL=be.apiBaseUrl,fa.a.interceptors.request.use(Object(k.compose)(function(e){return e.headers.Authorization="Bearer ".concat(pa()),e},function(e){var t=e.data,a=e.params;return"multipart/form-data"!==e.headers["Content-Type"]&&(e.headers["Content-Type"]="application/x-www-form-urlencoded"),t instanceof FormData?e:(e.data=J(t,{addQueryPrefix:!1}),e.url=e.url+J(a),e.params=void 0,e)},function(e){var t=(e.method||"").toUpperCase(),a=e.data||{};switch(t){case"DELETE":case"PATCH":case"PUT":a instanceof FormData?a.append("_method",t):a._method=t,e.method="POST"}return e.data=a,e})),fa.a.interceptors.response.use(Object(k.compose)(function(e){var t,a=e.data;return a.access_token&&(t=a.access_token,localStorage.setItem("access_token",t)),e}),Object(k.compose)(function(e){var t=e.response&&e.response.data;if(!t)return Promise.reject(e);if(t.errors){var a=Object.keys(t.errors).reduce(function(e,a){return e[a]=t.errors[a].join(", "),e},{});t.formikErrors=a}return Promise.reject(t)},function(e){var t=e.response;if(t){var a=t.data&&t.data;if(503===a.status_code){if(t.headers&&t.headers["retry-after"]){var n=t.headers["retry-after"];setTimeout(function(){window.location=window.location},1e3*parseInt(n))}alert(a.message)}}return e},function(e){var t=e.response;if(t){var a=t.data&&t.data;if(429===a.status_code){if(t.headers&&t.headers["retry-after"]){var n=t.headers["retry-after"];setTimeout(function(){window.location=window.location},1e3*parseInt(n))}alert(a.message)}}return e}));var Ea=w.a.createContext(fa.a),ha=$(Ea,"xhr");function ba(){return w.a.useContext(Ea)}function ga(e){var t=e.href,a=void 0===t?"":t,n=e.query,r=Object(ue.a)(e,["href","query"]);return w.a.createElement("a",Object.assign({href:"".concat(fa.a.defaults.baseURL).concat(a).concat(J(Object(H.a)({},n||{},{token:pa()})))},r))}var va=fa.a,_a=R.object().shape({name:R.string().required("Name field is required").max(191,"Max 191 Characters allowed"),email:R.string().email("Please provide a valid email address").required("Name field is required"),password:R.string().required("Password field is required"),password_confirmation:R.string().required("Password Confirmation field is required")}),ya={name:"",email:"",password:"",password_confirmation:"",invite_token:""};var Sa=ha(function(e){var t=e.location,a=e.xhr,n=e.navigate,r=z(t&&t.search),c=r.ref||"",l=r.email||"",i=r.name||"";return ya.invite_token=c,ya.email=l,ya.name=i,w.a.createElement(oe,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Invited on TAD")),w.a.createElement("div",null,w.a.createElement("div",{className:"text-center"},w.a.createElement(q.a,{to:"/"},w.a.createElement("img",{src:be.publicUrl+"/logo.png",className:"inline-block mt-4 w-20 rounded-full shadow"}))),w.a.createElement("h1",{className:"text-center my-4"},"Complete Signup for TAD"),w.a.createElement("div",{className:"max-w-sm mx-auto"},w.a.createElement(Y.e,{initialValues:ya,validationSchema:_a,onSubmit:function(e,t){t.setStatus(),function(e){return{signup:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.patch("/invited-users",a).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(a).signup(e).then(function(t){alert(t.message||"Registered Successfully. You can now login."),n&&n("../login?email=".concat(e.email))}).catch(function(e){t.setStatus(e.message),e.formikErrors&&t.setErrors(e.formikErrors),t.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status,n=e.values;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,a?w.a.createElement("p",{className:"text-red-700",role:"alert"},a):null,w.a.createElement(Ee,{label:"Name",name:"name",autoFocus:!0,placeholder:"John Ana",autoComplete:"full-name",required:!0}),w.a.createElement(Ee,{label:"Email",name:"email",type:"email",placeholder:"username@domain.com",autoComplete:"username email",readOnly:!0,required:!0}),w.a.createElement(Ee,{label:"Password",type:"password",name:"password",autoComplete:"new-password",required:!0}),w.a.createElement(Ee,{label:"Retype Password",type:"password",name:"password_confirmation",autoComplete:"new-password",required:!0}),w.a.createElement("input",{hidden:!0,type:"hidden",name:"invite_token",value:n.invite_token}),w.a.createElement("footer",null,w.a.createElement(F.d,{primary:!0,tabIndex:3,type:"submit",className:"w-full",disabled:t},"Complete Signup"))))}}))))}),Oa=R.object().shape({company_name:R.string().required(" field is required").max(191,"Max 191 Characters allowed"),name:R.string().required("Name field is required").max(191,"Max 191 Characters allowed"),email:R.string().email("Please provide a valid email address").required("Email address is required").max(191,"Max 191 Characters allowed"),password:R.string().required("Password field is required"),password_confirmation:R.string().required("Password Confirmation field is required")}),ja={company_name:"",name:"",email:"",password:"",password_confirmation:"",invite_token:"",address_email:"",email_verified_url:""};var xa=ha(function(e){var t=e.location,a=e.xhr,n=e.navigate,r=z(t&&t.search),c=r.ref||"",l=r.email||"",i=r.name||"",o=r["tenant-name"]||"";return ja.company_name=o,ja.invite_token=c,ja.name=i,ja.email=l,ja.address_email=l,ja.email_verified_url=t?"".concat(t.origin,"/email-verified"):"",w.a.createElement(oe,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Invited on TAD")),w.a.createElement("div",null,w.a.createElement("h1",{className:"flex justify-center items-center mt-4"},w.a.createElement(q.a,{to:"/"},w.a.createElement("img",{src:be.publicUrl+"/logo.png",className:"inline-blockw-20 w-8 rounded-full shadow"})),w.a.createElement("div",{className:"px-4 text-gray-400"},"+"),w.a.createElement("div",null,o)),w.a.createElement("p",{className:"text-center max-w-sm mx-auto text-sm text-gray-700"},"Please provide following details to complete your registraion for Tourepedia Admin Dashboard"),w.a.createElement("div",{className:"max-w-sm mx-auto"},w.a.createElement(Y.e,{initialValues:ja,onSubmit:function(e,t){t.setStatus(),function(e){return{signup:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/tenants/signup",a).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(a).signup(e).then(function(t){alert(t.message||"Registered Successfully. You can now login."),n&&n("../login?email=".concat(e.email))}).catch(function(e){t.setStatus(e.message),e.formikErrors&&t.setErrors(e.formikErrors),t.setSubmitting(!1)})},validationSchema:Oa,render:function(e){var t=e.isSubmitting,a=e.status,n=e.values;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,a?w.a.createElement("p",{className:"text-red-700",role:"alert"},a):null,w.a.createElement(Ee,{label:"Company Name",name:"company_name",placeholder:"Tourepedia Holidays",required:!0}),w.a.createElement(Ee,{label:"Your Name",name:"name",placeholder:"John Ana",autoComplete:"full-name",required:!0}),w.a.createElement(Ee,{label:"Email",name:"email",type:"email",placeholder:"username@domain.com",autoComplete:"username email",required:!0}),w.a.createElement(Ee,{label:"Password",type:"password",name:"password",autoComplete:"new-password",required:!0}),w.a.createElement(Ee,{label:"Retype Password",type:"password",name:"password_confirmation",autoComplete:"new-password",required:!0}),w.a.createElement("input",{hidden:!0,type:"hidden",name:"invite_token",value:n.invite_token}),w.a.createElement("input",{hidden:!0,type:"hidden",name:"address_email",value:n.address_email}),w.a.createElement("footer",null,w.a.createElement(F.d,{primary:!0,tabIndex:3,type:"submit",className:"w-full",disabled:t},"Complete Registration"))))}}))))}),wa={MANAGE_ROLES:"manage_roles",MANAGE_TENANTS:"manage_tenants",MANAGE_TRIP_OWNERS:"manage_trip_owners",MANAGE_TRIP_PLAN_REQUESTS:"manage_trip_plan_requests",MANAGE_USERS:"manage_users",VIEW_TRIP_PLAN_REQUESTS:"view_trip_plan_requests"};function Na(){var e=le().user,t=Object(x.useMemo)(function(){return e?e.permissions.reduce(function(e,t){return e[t]=t,e},{}):{}},[e]);return{hasPermission:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return"string"===typeof a&&(a=[a]),a.every(function(e){return t[e]})},hasAnyPermission:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return a.some(function(e){return t[e]})}}}function Ca(e){var t=e.to,a=e.children,n=e.className,r=void 0===n?"":n;return w.a.createElement(q.c,{path:t},function(e){var n=e.match;return w.a.createElement("li",{className:me()(r,n?"active":void 0)},w.a.createElement(q.a,{to:t},a))})}var Ta=Ca,ka=a(8),Aa=a.n(ka);function Pa(e){return{getConvertedTripAnalytics:function(){var t=Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/converted-trips").then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),getDuePayments:function(){var t=Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/instalments").then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),getTransactions:function(){var t=Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/payment-transactions").then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}}function qa(e){var t=e.xhr,a=Object(x.useState)([]),n=Object(Z.a)(a,2),r=n[0],c=n[1];return Object(x.useEffect)(function(){Pa(t).getConvertedTripAnalytics().then(c)},[]),w.a.createElement("section",null,w.a.createElement("h2",null,"Converted trips over time"),w.a.createElement(F.n,{responsive:!0,bordered:!0,striped:!0,headers:["ID","Dates","Stages","Destinations","Traveler","Pax"],rows:r.map(function(e){var t=e.id,a=e.trip_source,n=e.trip_id,r=e.start_date,c=e.end_date,l=e.locations,i=e.no_of_adults,o=e.children,u=e.contact,s=e.latest_stage;return[w.a.createElement(q.a,{to:"/trips/"+t.toString()},a.short_name,"-",n||t),"".concat(Aa.a.utc(r).local().format("DD/MM/YYYY")," to ").concat(Aa.a.utc(c).local().format("DD/MM/YYYY")),s?s.name:"Initiated",l.map(function(e){return e.short_name}).join(" \u2022\xa0"),u?w.a.createElement("div",null,u.name,w.a.createElement("br",null),w.a.createElement("a",{href:"tel:".concat(u.phone_number),className:"btn--icon"},w.a.createElement(F.i.PhoneIcon,{title:"Call to ".concat(u.name," on ").concat(u.phone_number)})),w.a.createElement("a",{href:"mailto:".concat(u.email),className:"btn--icon"},w.a.createElement(F.i.MailIcon,{title:"Send Email to ".concat(u.name," at ").concat(u.email)}))):null,"".concat(i," Adults").concat(o?" with "+o:"")]})}))}function Fa(e){var t=e.xhr,a=Object(x.useState)([]),n=Object(Z.a)(a,2),r=n[0],c=n[1];return Object(x.useEffect)(function(){Pa(t).getDuePayments().then(c)},[]),w.a.createElement("section",null,w.a.createElement("h2",null,"Due payments"),w.a.createElement(F.n,{bordered:!0,responsive:!0},w.a.createElement("thead",null,w.a.createElement("tr",null,w.a.createElement("th",null,"Due Date"),r.map(function(e,t){return w.a.createElement("th",{key:t},Aa.a.utc(e.due_date).local().format("DD/MM/YYYY"))}))),w.a.createElement("tbody",null,w.a.createElement("tr",null,w.a.createElement("th",null,"Amount"),r.map(function(e,t){return w.a.createElement("td",{key:t},e.is_credit?"+":"-",e.due_amount)})))))}function Ma(e){var t=e.xhr,a=Object(x.useState)({data:[],debited:0,credited:0}),n=Object(Z.a)(a,2),r=n[0],c=n[1];return Object(x.useEffect)(function(){Pa(t).getTransactions().then(function(e){var t=e.data,a=e.meta;return c(Object(H.a)({data:t},a))})},[]),w.a.createElement("section",null,w.a.createElement("h2",null,"Transactions"),w.a.createElement("div",null,"Credited: ",r.credited," \u2022 Debited: ",r.debited),w.a.createElement(F.n,{responsive:!0,bordered:!0},w.a.createElement("thead",null,w.a.createElement("tr",null,w.a.createElement("th",null,"Date"),r.data.map(function(e,t){return w.a.createElement("th",{key:t},Aa.a.utc(e.date).local().format("DD/MM/YYYY"))}))),w.a.createElement("tbody",null,w.a.createElement("tr",null,w.a.createElement("th",null,"Amount"),r.data.map(function(e,t){return w.a.createElement("td",{key:t},e.is_credited?"+":"-",e.amount)})))))}var Ia=ha(function(e){var t=e.xhr;return w.a.createElement(ie,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Dashboard")),w.a.createElement(qa,{xhr:t}),w.a.createElement(Fa,{xhr:t}),w.a.createElement(Ma,{xhr:t}))});function Da(e){return w.a.createElement("div",null,w.a.createElement("h2",null,"Not Found"),w.a.createElement(q.a,{to:"/"},"Visit Dashboard"))}var Ya=R.object().shape({current:R.string().required("Current password field is required"),password:R.string().required("Password field is required"),password_confirmation:R.string().required("Password confirmation field is required")});var Ra={current:"",password:"",password_confirmation:""};var Ha=ha(function(e){var t=e.xhr,a=e.navigate,n=le().user;return w.a.createElement(ie,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Change Password")),w.a.createElement(Y.e,{initialValues:Ra,validationSchema:Ya,onSubmit:function(e,n){n.setStatus(),function(e){return{changePassword:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.patch("/passwords",a));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(t).changePassword(e).then(function(){alert("Password updated successfully"),a&&a("/")}).catch(function(e){e.formikErrors&&n.setErrors(e.formikErrors),n.setStatus(e.message),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Change Password"),n?w.a.createElement("input",{type:"email",name:"email",value:n.email,hidden:!0,readOnly:!0,autoComplete:"username"}):null,w.a.createElement(Ee,{label:"Current Password",name:"current",type:"password",required:!0,id:"current",autoComplete:"current-password"}),w.a.createElement(Ee,{name:"password",label:"New Password",type:"password",required:!0,id:"password",autoComplete:"new-password"}),w.a.createElement(Ee,{label:"Confirm new password",name:"password_confirmation",type:"password",required:!0,id:"password_confirmation",autoComplete:"new-password"}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Update Password"))))}}))});a(319);function La(e){var t=e.fluid,a=e.className,n=e.as,r=void 0===n?"div":n,c=Object(ue.a)(e,["fluid","className","as"]);return w.a.createElement(r,Object.assign({className:"container".concat(t?"-fluid":""," ").concat(a||"")},c))}function Ua(e){var t=e.className,a=e.noGutters,n=e.as,r=void 0===n?"div":n,c=Object(ue.a)(e,["className","noGutters","as"]);return w.a.createElement(r,Object.assign({className:"row ".concat(a?"no-gutters":""," ").concat(t||"")},c))}function Va(e){var t=e.className,a=e.xs,n=e.sm,r=e.md,c=e.lg,l=e.xl,i=e.as,o=void 0===i?"div":i,u=Object(ue.a)(e,["className","xs","sm","md","lg","xl","as"]),s=[],m=[];return[["xs",a],["sm",n],["md",r],["lg",c],["xl",l]].forEach(function(e){var t,a,n,r=Object(Z.a)(e,2),c=r[0],l=r[1];null!==l&&"object"===typeof l?(t=l.span,a=l.offset,n=l.order):t=l;var i="xs"!==c?"-".concat(c):"";null!=t&&m.push(!0===t?"".concat("col").concat(i):"".concat("col").concat(i,"-").concat(t)),null!=n&&s.push("order".concat(i,"-").concat(n)),null!=a&&s.push("offset".concat(i,"-").concat(a))}),m.length||m.push("col"),w.a.createElement(o,Object.assign({className:me.a.apply(void 0,[t].concat(s,m))},u))}var Ba=function(e){return w.a.createElement(ie,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Settings")),w.a.createElement("h2",null,"Settings"),w.a.createElement(La,{fluid:!0},w.a.createElement(Ua,null,w.a.createElement(Va,{as:"fieldset",sm:2},w.a.createElement("ul",{className:"list"},w.a.createElement("li",null,w.a.createElement(q.a,{to:"change-password"},"Change Password")))),w.a.createElement(Va,{className:"col-sm"},w.a.createElement(q.e,null,w.a.createElement(Ha,{path:"change-password"}),w.a.createElement(Ha,{path:"/"}))))))},Ga=R.object().shape({email:R.string().email("Invalid email address").required("Email field is required")});var Qa=ha(function(e){var t=e.xhr,a=e.navigate,n=e.location,r=z(n&&n.search).email||"";return w.a.createElement(oe,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Forgot Password")),w.a.createElement("div",{className:"text-center mt-16"},w.a.createElement("h1",null,"Forgot Your Password?"),w.a.createElement("p",null,"No problem. Just enter your email address and we will send instructions to reset your password. ",w.a.createElement("br",null),"Or"," ",w.a.createElement(q.a,{to:"/login",className:"text-blue-600 hover:text-blue-800"},"Login")," ","if you remember your password!")),w.a.createElement("div",{className:"max-w-sm mx-auto"},w.a.createElement(Y.e,{initialValues:{email:r,reset_password_link:"".concat(n&&n.origin,"/reset-password")},validationSchema:Ga,onSubmit:function(e,n){n.setStatus(),function(e){return{forgotPassword:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/passwords/reset",a));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(t).forgotPassword(e).then(function(){alert("Please check your inbox for password reset instructions."),n.setSubmitting(!1),a&&a("/login")}).catch(function(e){n.setStatus(e.message),n.setSubmitting(!1)})},render:function(e){var t=e.status,a=e.isSubmitting,n=e.values;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,t?w.a.createElement("p",{role:"alert",className:"text-red-700"},t):null,w.a.createElement(Ee,{name:"email",label:"Email",placeholder:"username@domain.com",autoComplete:"username email",required:!0,autoFocus:!0,type:"email",id:"email",tabIndex:1}),w.a.createElement("input",{type:"hidden",name:"reset_password_link",hidden:!0,value:n.reset_password_link}),w.a.createElement("footer",null,w.a.createElement(F.d,{primary:!0,tabIndex:2,type:"submit",disabled:a},"Get Instructions"))))}})))}),Za=R.object().shape({email:R.string().required("Email field is required").email("Invalid email address"),token:R.string().required("Missing token to reset values. Please check for valid url from sent email"),password:R.string().required("Password field is required"),password_confirmation:R.string().required("Password confirmation field is required")});var Wa=ha(function(e){var t=e.navigate,a=e.location,n=e.xhr,r=z(a&&a.search),c=r.email,l=r.token;return c&&l||t&&t("/"),w.a.createElement("div",null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Reset Password")),w.a.createElement("div",{className:"text-center mt-16"},w.a.createElement("h1",null,"Reset Password"),w.a.createElement("p",null,"Just enter your new password to reset the password for your email address (",c,")")),w.a.createElement("div",{className:"max-w-sm mx-auto"},w.a.createElement(Y.e,{initialValues:{email:c,token:l,password:"",password_confirmation:""},validationSchema:Za,onSubmit:function(e,a){a.setStatus(),function(e){return{resetPassword:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.delete("/passwords/reset",{data:a}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(n).resetPassword(e).then(function(){alert("Your passwords updated successfully. You can now log in with the new password"),t&&t("/login")}).catch(function(e){e.formikErrors&&a.setErrors(e.formikErrors),a.setStatus(e.message),a.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,a?w.a.createElement("p",{className:"text-red-700",role:"alert"},a):null,w.a.createElement(Y.b,{name:"email",render:function(e){var t=e.field,a=t.value,n=t.name;return w.a.createElement("input",{type:"hidden",hidden:!0,name:n,value:a})}}),w.a.createElement(Y.b,{name:"token",render:function(e){var t=e.field,a=t.value,n=t.name;return w.a.createElement("input",{type:"hidden",value:a,name:n})}}),w.a.createElement(Ee,{label:"Password",name:"password",type:"password",id:"password",autoFocus:!0,autoComplete:"new-password",required:!0}),w.a.createElement(Ee,{label:"Confirm Password",name:"password_confirmation",type:"password",id:"password_confirmation",autoComplete:"new-password",required:!0}),w.a.createElement("footer",null,w.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Reset Password"))))}}),w.a.createElement("div",{className:"text-center"},"Get instructions"," ",w.a.createElement(q.a,{to:"/forgot-password?email=".concat(c),className:"text-blue-600 hover:text-blue-800"},"again")," ",w.a.createElement("br",null),"OR",w.a.createElement("br",null),w.a.createElement(q.a,{to:"/login",className:"text-blue-600 hover:text-blue-800"},"Login")," ","if you remember your password!")))}),Ka=a(154);function za(e){return Ja({items:[],byId:{},meta:{from:0,to:0,total:0,current_page:1,last_page:1},links:{}}).insert(e)}function Ja(e){var t=e||za();return{insert:function(e,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?e.reduce(function(e,t){var r=e.byId,c=e.items,l=e.meta;return r[t.id]||(c=n?[t.id].concat(c):c.concat(t.id)),r[t.id]=t,Object(H.a)({},e,{byId:Object(H.a)({},r),items:Object(Ka.a)(c),meta:Object(H.a)({},l,a||{})})},t):t},get:function(){return t.items.map(function(e){return t.byId[e]})},getItem:function(e){if(e)return t.byId[e]},getMeta:function(){return t.meta},get total(){return this.getMeta().total||0},get currentPage(){return this.getMeta().current_page||1},get lastPage(){return this.getMeta().last_page||1},get from(){return this.getMeta().from||0},get to(){return this.getMeta().to||0},get meta(){return{total:this.total,lastPage:this.lastPage,currentPage:this.currentPage,from:this.from,to:this.to}}}}function $a(e,t,a){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;if(t.list)switch(r.type){case Object(L.getType)(t.list.request):return Object(H.a)({},n,{isFetching:!0});case Object(L.getType)(t.list.success):return Object(H.a)({},n,{state:Ja(za()).insert(r.payload.data,r.payload.meta),isFetching:!1});case Object(L.getType)(t.list.failure):return Object(H.a)({},n,{isFetching:!1})}if(t.item)switch(r.type){case Object(L.getType)(t.item.request):return Object(H.a)({},n,{isFetching:!0});case Object(L.getType)(t.item.success):return Object(H.a)({},n,{state:Ja(n.state).insert([r.payload]),isFetching:!1});case Object(L.getType)(t.item.failure):return Object(H.a)({},n,{isFetching:!1})}return a?a(n,r):n}}var Xa="USER_LIST_STATE",en={isFetching:!0,state:za()},tn={list:Object(L.createAsyncAction)("@USERS/LIST_FETCH_REQUEST","@USERS/LIST_FETCH_SUCCESS","@USERS/LIST_FETCH_FAILED")(),item:Object(L.createAsyncAction)("@USERS/ITEM_FETCH_REQUEST","@USERS/ITEM_FETCH_SUCCESS","@USERS/ITEM_FETCH_FAILED")()},an=$a(en,tn);function nn(e){var t=e[Xa];return Object(H.a)({},Ja(t.state),{get state(){return e[Xa]},get isFetching(){return this.state.isFetching}})}a(320);var rn=function(){return w.a.createElement("span",{className:"spin"},w.a.createElement(F.i.SpinnerIcon,null))};function cn(e){return{getUser:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/users/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var ln=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(tn.item.request()),t.abrupt("return",cn(c).getUser(e).then(function(e){return a(tn.item.success(e)),e}).catch(function(e){return a(tn.item.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function on(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){return Object(T.c)(function(t){var a=nn(t);return{isFetching:a.isFetching,user:a.getItem(e)}})}(e),n=function(){var e=ee();return Object(x.useCallback)(function(t){return e(ln(t))},[e])}();return Object(x.useEffect)(function(){t&&e&&n(e)},[t,e,n]),Object(H.a)({},a,{fetchUser:n})}function un(e){var t=e.navigate,a=e.userId,n=on(a,!0),r=n.user,c=n.isFetching;return a?w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,r?r.name:""," | User")),w.a.createElement(q.a,{to:".."},"Back to list"),c?w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null)):r?w.a.createElement("div",null,w.a.createElement("h3",null,r.name," ",w.a.createElement(q.a,{to:"edit",title:"Edit Name"},"\u270e")),w.a.createElement("p",null,"Roles:"," ",(r.roles||[]).map(function(e,t,a){return w.a.createElement("span",{key:e.id},e.name,t!==a.length-1?" \u2022 ":"")}),w.a.createElement(q.a,{to:"edit-roles",title:"Edit Roles"},"\u270e")),"Email Verified on:"," ",r.email_verified_at?Aa.a.utc(r.email_verified_at).local().format("Do MMM, YYYY \\at hh:mm A"):"Not verified yet",w.a.createElement("br",null),"Invited on:"," ",Aa.a.utc(r.created_at).local().format("Do MMM, YYYY \\at hh:mm A")):w.a.createElement(q.d,{noThrow:!0,to:"/users"})):(t&&t("/users"),null)}var sn=a(18);function mn(e){var t=e.isFetching,a=e.total,n=e.items,r=e.render,c=e.children;return w.a.createElement(x.Fragment,null,t?w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null)):0===a?w.a.createElement("div",{className:"text-center"},"No item in the list"):c||(r?r(n):null))}var dn=mn;function fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(x.useState)(e)}var pn={q:""};function En(e){var t=e.initialParams,a=void 0===t?pn:t,n=e.onSearch,r=e.placeholder,c=void 0===r?"Search...":r;return w.a.createElement(Y.e,{initialValues:a,onSubmit:function(e){return n(e)},render:function(){return w.a.createElement(Y.d,{noValidate:!0,style:{marginBottom:"1em"}},w.a.createElement(F.j,{style:{minWidth:"280px"}},w.a.createElement(Ee,{name:"q",noGroup:!0,placeholder:c,type:"search"}),w.a.createElement(F.d,{type:"submit",secondary:!0},w.a.createElement(F.i.SearchIcon,null))))}})}var hn=En,bn=a(15);function gn(e){return{getUsers:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/users",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var vn=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(tn.list.request()),t.abrupt("return",gn(c).getUsers(e).then(function(e){var t=e.data,n=e.meta;return a(tn.list.success({data:t,meta:n})),t}).catch(function(e){return a(tn.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function _n(){var e=ee();return Object(x.useCallback)(function(t){return e(vn(t))},[e])}function yn(){return Object(H.a)({},Object(T.c)(function(e){var t=nn(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,users:t.get()})}),{fetchUsers:_n()})}function Sn(e){Object(sn.a)(e);var t=fn(),a=Object(Z.a)(t,2),n=a[0],r=a[1],c=yn(),l=c.fetchUsers,i=c.users,o=c.total,u=c.from,s=c.to,m=c.currentPage,d=c.lastPage,f=c.isFetching;return Object(x.useEffect)(function(){l({page:m})},[l]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Users")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(En,{onSearch:function(e){r(e),l(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:o,from:u,to:s,isFetching:f,currentPage:m,lastPage:d,onChange:function(e){return l(Object(H.a)({},n,{page:e}))}}))),w.a.createElement(mn,{isFetching:f,total:o},w.a.createElement(F.n,{striped:!0,bordered:!0,responsive:!0,headers:["Name","Email","Roles","Email Verified At"],rows:i.map(function(e){return[w.a.createElement(q.a,{to:e.id.toString()},e.name),w.a.createElement("span",null,e.email),w.a.createElement("span",null,e.roles.map(function(e){return e.name}).join(" \u2022 ")),w.a.createElement("span",null,e.email_verified_at?Aa.a.utc(e.email_verified_at).local().format("Do MMM, YYYY \\at hh:mm A"):"Not Verified Yet")]})})))}var On=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return gn(t).getUsers({q:e}).then(function(e){return e.data})}}))}),jn=R.object().shape({name:R.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed"),email:R.string().email("Email must be a valid email address").required("Email field is required")}),xn={name:"",email:"",invited_signup_link:""};var wn=ha(function(e){var t=e.xhr,a=e.navigate,n=e.location;return xn.invited_signup_link=n?"".concat(n.origin,"/invited-signup"):"",w.a.createElement("div",null,w.a.createElement(Y.e,{initialValues:xn,validationSchema:jn,onSubmit:function(e,n){n.setStatus(),t.post("/invited-users",e).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status,n=e.values;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Invite New User"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Name",name:"name",required:!0,placeholder:"John Tourepedia",autoComplete:"name"})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Email",type:"email",name:"email",autoComplete:"username",placeholder:"username@tourepedia.com",required:!0}))),w.a.createElement("input",{hidden:!0,type:"hidden",name:"invited_signup_link",value:n.invited_signup_link}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Invite User"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))}),Nn=R.object().shape({name:R.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed")});var Cn=ha(function(e){var t=e.xhr,a=e.navigate,n=e.userId,r=on(n,!0),c=r.user,l=r.isFetching;if(!n)return a&&a("/users"),null;if(l)return w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null));if(!c)return a&&a("/users"),null;var i={name:c.name};return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Edit User")),w.a.createElement(Y.e,{initialValues:i,validationSchema:Nn,onSubmit:function(e,r){r.setStatus(),t.patch("/users/".concat(n),e).then(function(e){var t=e.data.data;a&&a("../../".concat(t.id)),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Edit User Details"),a?w.a.createElement("div",null,a):null,w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Manager",required:!0}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Details"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))}),Tn="ROLE_LIST_STATE",kn={isFetching:!0,state:za()},An={list:Object(L.createAsyncAction)("@ROLES/LIST_FETCH_REQUEST","@ROLES/LIST_FETCH_SUCCESS","@ROLES/LIST_FETCH_FAILED")(),item:Object(L.createAsyncAction)("@ROLES/ITEM_FETCH_REQUEST","@ROLES/ITEM_FETCH_SUCCESS","@ROLES/ITEM_FETCH_FAILED")()},Pn=$a(kn,An);function qn(e){var t=e[Tn];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Fn(e){return{getRole:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/roles/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Mn=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(An.item.request()),t.abrupt("return",Fn(c).getRole(e).then(function(e){return a(An.item.success(e)),e}).catch(function(e){return a(An.item.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function In(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){return Object(T.c)(function(t){var a=qn(t);return{isFetching:a.isFetching,role:a.getItem(e)}})}(e),n=function(){var e=ee();return Object(x.useCallback)(function(t){return e(Mn(t))},[e])}();return Object(x.useEffect)(function(){t&&e&&n(e)},[t,e]),Object(H.a)({},a,{fetchRole:n})}function Dn(e){var t=e.roleId,a=e.navigate,n=In(t,!0),r=n.role,c=n.isFetching;return t?w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,r?r.name:""," Role")),w.a.createElement(q.a,{to:".."},"Back to list"),c?w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null)):r?w.a.createElement("div",null,w.a.createElement("h3",null,r.name," ",w.a.createElement(q.a,{to:"edit",title:"Edit Role"},"\u270e")),"Created at:"," ",Aa.a.utc(r.created_at).local().format("Do MMM YYYY \\at hh:mm A"),w.a.createElement("br",null),w.a.createElement("p",null,w.a.createElement("b",null,"Permissions"),":"," ",(r.permissions||[]).map(function(e,t,a){return w.a.createElement("span",{key:e.id},e.name,t!==a.length-1?" \u2022 ":"")})," ",w.a.createElement(q.a,{to:"edit-permissions",title:"Edit Permissions"},"\u270e"))):w.a.createElement(q.d,{noThrow:!0,to:"/users"})):(a&&a("/roles"),null)}function Yn(e){return{getRoles:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/roles",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getPermissions:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/permissions",{params:a}).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Rn=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(An.list.request()),t.abrupt("return",Yn(c).getRoles(e).then(function(e){return a(An.list.success(e)),e.data}).catch(function(e){return a(An.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Hn(){var e=ee();return Object(x.useCallback)(function(t){return e(Rn(t))},[e])}function Ln(){return Object(H.a)({},Object(T.c)(function(e){var t=qn(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,roles:t.get()})}),{fetchRoles:Hn()})}function Un(e){Object(sn.a)(e);var t=Ln(),a=t.roles,n=t.total,r=t.from,c=t.to,l=t.isFetching,i=t.currentPage,o=t.lastPage,u=t.fetchRoles,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:i})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Roles")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,from:r,to:c,currentPage:i,lastPage:o,isFetching:l,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{total:n,isFetching:l},w.a.createElement(F.n,{headers:["Name","Permissions"],striped:!0,bordered:!0,rows:a.map(function(e){return[w.a.createElement(q.a,{to:e.id.toString()},e.name),(e.permissions||[]).map(function(e){return e.name}).join(" \u2022\xa0")]})})))}var Vn=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0,fetch:function(e){return Yn(t).getRoles({q:e}).then(function(e){return e.data})}},a))}),Bn=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0,fetch:function(e){return Yn(t).getPermissions({q:e})}},a))}),Gn=R.object().shape({name:R.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed")}),Qn={name:""};var Zn=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement("div",null,w.a.createElement(Y.e,{initialValues:Qn,validationSchema:Gn,onSubmit:function(e,n){return n.setStatus(),t.post("/roles",e).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Role"),w.a.createElement(Ee,{label:"Name",name:"name",required:!0,placeholder:"Manager"}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Create Role"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))}),Wn=R.object().shape({name:R.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed")});var Kn=ha(function(e){var t=e.xhr,a=e.navigate,n=e.roleId,r=In(n,!0),c=r.role,l=r.isFetching;if(!n)return a&&a("/roles"),null;if(l)return w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null));if(!c)return null;var i=c.id,o=c.name,u={name:o};return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Editing ",o," Role")),w.a.createElement(Y.e,{initialValues:u,validationSchema:Wn,onSubmit:function(e,n){n.setStatus(),t.put("/roles/".concat(i),e).then(function(e){var t=e.data.data;a&&a("../../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Edit Role"),w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Manager",required:!0}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Update Role"),w.a.createElement(q.a,{className:"btn",to:".."},"Cancel"))))}}))});var zn=ha(function(e){var t=e.xhr,a=e.navigate,n=e.roleId,r=In(n,!0),c=r.role,l=r.isFetching;if(!n)return a&&a("/roles"),null;if(l)return w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null));if(!c)return a&&a("/roles"),null;var i=c.name,o=c.permissions,u={permissions:void 0===o?[]:o};return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Edit ",i,"'s permissions")),w.a.createElement(Y.e,{initialValues:u,onSubmit:function(e,r){r.setStatus(),t.post("/roles/".concat(n,"/permissions"),{permissions:e.permissions.map(function(e){return{name:e.name}})}).then(function(e){a&&a("../../".concat(c.id)),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status,n=(e.values,e.setFieldValue);return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Editing ",i,"'s permissions"),a?w.a.createElement("div",null,a):null,w.a.createElement(pe,{name:"permissions",render:function(e){var t=e.field;return w.a.createElement(Bn,Object.assign({},t,{label:"Select permission(s)",onChange:function(e,t){return n(t,e)}}))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Permissions"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Jn(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"btn float-right btn-primary branded"},"Add New Role"),w.a.createElement("h2",null,"Roles"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Dn,{path:":roleId"}),w.a.createElement(Kn,{path:":roleId/edit"}),w.a.createElement(zn,{path:":roleId/edit-permissions"}),w.a.createElement(Zn,{path:"/new"}),w.a.createElement(Un,{path:"/"})))}var $n=ha(function(e){var t=e.xhr,a=e.navigate,n=e.userId,r=on(n,!0),c=r.user,l=r.isFetching;if(!n)return a&&a("/users"),null;if(l)return w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null));if(!c)return a&&a("/users"),null;var i=c.name,o=c.roles,u={roles:void 0===o?[]:o};return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Edit ",i,"'s Roles")),w.a.createElement(Y.e,{initialValues:u,onSubmit:function(e,r){r.setStatus(),t.post("/users/".concat(n,"/roles"),{roles:e.roles.map(function(e){return{name:e.internal_name}})}).then(function(e){a&&a("../../".concat(c.id)),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status,n=(e.values,e.setFieldValue);return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Editing ",i,"'s roles"),a?w.a.createElement("div",null,a):null,w.a.createElement(pe,{name:"roles",render:function(e){var t=e.field;return w.a.createElement(Vn,Object.assign({},t,{label:"Select Role(s)",onChange:function(e,t){return n(t,e)}}))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Assign Role"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Xn(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"btn float-right btn-primary branded"},"New User"),w.a.createElement("h2",null,"Users"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(un,{path:":userId"}),w.a.createElement(Cn,{path:":userId/edit"}),w.a.createElement($n,{path:":userId/edit-roles"}),w.a.createElement(wn,{path:"/new"}),w.a.createElement(Sn,{path:"/"})))}var er="HOTELS_STATE",tr={list:Object(L.createAsyncAction)("@HOTELS/LIST_FETCH_REQUEST","@HOTELS/LIST_FETCH_SUCCESS","@HOTELS/LIST_FETCH_FAILED")(),item:Object(L.createAsyncAction)("@HOTELS/ITEM_FETCH_REQUEST","@HOTELS/ITEM_FETCH_SUCCESS","@HOTELS/ITEM_FETCH_FAILED")()},ar=$a({isFetching:!0,state:za()},tr);function nr(e){var t=e[er];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function rr(e){return{getHotels:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/hotels",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var cr=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(tr.list.request()),t.abrupt("return",rr(c).getHotels(e).then(function(e){var t=e.data,n=e.meta;return a(tr.list.success({data:t,meta:n})),t}).catch(function(e){return a(tr.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function lr(){var e=ee();return Object(x.useCallback)(function(t){return e(cr(t))},[e])}function ir(){return Object(H.a)({},Object(T.c)(function(e){var t=nr(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,hotels:t.get()})}),{fetchHotels:lr()})}function or(e){Object(sn.a)(e);var t=ir(),a=t.hotels,n=t.total,r=t.from,c=t.to,l=t.lastPage,i=t.currentPage,o=t.isFetching,u=t.fetchHotels,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:i})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Hotels List")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(En,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,isFetching:o,currentPage:i,from:r,to:c,lastPage:l,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(mn,{isFetching:o,total:n},w.a.createElement(F.n,{responsive:!0,striped:!0,bordered:!0,headers:["Name","Meal Plans","Room Type","Child extra bed age"],rows:a.map(function(e){return[w.a.createElement(x.Fragment,null,w.a.createElement("h4",{className:"text-base"},w.a.createElement(q.a,{to:e.id.toString()},e.name)),e.location.short_name," \u2022 ",e.stars," stars"),e.meal_plans.map(function(e){return e.name}).join(" \u2022 "),e.room_types.map(function(e){return e.name}).join(" \u2022 "),w.a.createElement(x.Fragment,null,e.extra_bed_child_age_start,"-",e.extra_bed_child_age_end,"yo")]})})))}var ur=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return rr(t).getHotels({q:e}).then(function(e){return e.data})}}))}),sr=a(29),mr=(a(143),R.object().shape({name:R.string().required("Contact name is required"),email:R.string().email("Email should be a valid email address"),phone_number:R.number().positive("Phone number should be a positive integer").typeError("Invalid number")}).required("Contact data is required")),dr={name:"",email:""};function fr(e){var t=e.onCreate,a=e.onCancel;return w.a.createElement(Y.e,{initialValues:dr,validationSchema:mr,onSubmit:function(e,n){n.setStatus(),t(e).then(function(){n.setSubmitting(!1),a()}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){e.setFieldValue;var t=e.isSubmitting;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement(Ee,{name:"name",label:"Name",required:!0,placeholder:"Johhny Dep"}),w.a.createElement(Ee,{name:"email",label:"Email",type:"email",placeholder:"user@domain.com"}),w.a.createElement(Ee,{name:"phone_number",label:"Phone Number",type:"number",placeholder:"9911929399"}),w.a.createElement("hr",null),w.a.createElement("footer",null,w.a.createElement(F.d,{disabled:t,primary:!0,type:"submit"},"Save")," ",w.a.createElement(F.d,{onClick:a},"Cancel")))}})}var pr="HOTEL_PRICES_STATE",Er={isFetching:!0,state:za()},hr={list:Object(L.createAsyncAction)("@HOTEL_PRICES/LIST_FETCH_REQUEST","@HOTEL_PRICES/LIST_FETCH_SUCCESS","@HOTEL_PRICES/LIST_FETCH_FAILED")()},br=$a(Er,hr);function gr(e){var t=e[pr];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function vr(e){return{getPrices:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/hotel-prices",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var _r=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(hr.list.request()),t.abrupt("return",vr(c).getPrices(e).then(function(e){return a(hr.list.success(e)),e.data}).catch(function(e){return a(hr.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function yr(e){var t=e.hotelId,a=fn(),n=Object(Z.a)(a,2),r=n[0],c=n[1],l=ee(),i=Object(x.useCallback)(function(e){return l(_r(Object(H.a)({},e,t?{hotels:[t]}:{})))},[l,t]);Object(x.useEffect)(function(){i({page:f})},[i]);var o=Object(T.c)(function(e){var t=gr(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,prices:t.get()})}),u=o.prices,s=o.total,m=o.from,d=o.to,f=o.currentPage,p=o.lastPage,E=o.isFetching;return w.a.createElement(x.Fragment,null,w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{initialParams:r,onSearch:function(e){c(e),i(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:s,from:m,to:d,currentPage:f,lastPage:p,isFetching:E,onChange:function(e){return i({page:e})}}))),w.a.createElement(dn,{isFetching:E,total:s},w.a.createElement(F.n,{responsive:!0,bordered:!0,striped:!0,headers:["Start Date","End Date"].concat(t?[]:["Hotel"]).concat(["Meal Plan","Room Type","Base Price","Persons","A.W.E.B.","C.W.E.B.","C.Wo.E.B"]),alignCols:{5:"right",6:"right",7:"right",8:"right",9:"right"},rows:u.map(function(e){var a=e.base_price,n=e.persons,r=e.start_date,c=e.end_date,l=e.hotel,i=e.adult_with_extra_bed_price,o=e.child_with_extra_bed_price,u=e.child_without_extra_bed_price,s=e.meal_plan,m=e.room_type;return[Aa.a.utc(r).local().format("DD/MM/YYYY"),Aa.a.utc(c).local().format("DD/MM/YYYY")].concat(t?[]:[w.a.createElement("span",null,l.name," ",w.a.createElement("small",null,"(",l.location.short_name," - ",l.stars," Star)"))]).concat([s.name,m.name,X(a),n.toString(),X(i),X(o),X(u)])})})))}var Sr={timezone_offset:(new Date).getTimezoneOffset(),file:"",file_name:""},Or=R.object().shape({timezone_offset:R.string().required(),file:R.mixed().required("File field is required"),file_name:R.string().required("File field is required")}),jr=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement("div",null,w.a.createElement(Y.e,{initialValues:Sr,validationSchema:Or,onSubmit:function(e,n){var r=new FormData;r.set("timezone_offset",e.timezone_offset.toString()),r.set("file",e.file),t.post("/hotel-prices",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a&&a("..")}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)}).then(function(){n.setSubmitting(!1)})},render:function(e){var t=e.setFieldValue,a=e.isSubmitting,n=e.status;return w.a.createElement(Y.d,{noValidate:!0,encType:"multipart/form-data"},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Upload file to add hotel prices"),n?w.a.createElement("p",{className:"text-red-700"},n):null,w.a.createElement(Ee,{label:"Select a csv file",name:"file_name",type:"file",accept:".csv",onChange:function(e){var a=e.currentTarget;t("file",a.files?a.files[0]:""),t(a.name,a.value)}}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:a},"Upload CSV"),w.a.createElement(q.a,{className:"btn",to:".."},"Cancel"))))}}))}),xr="MEAL_PLANS_STATE",wr={isFetching:!0,state:za()},Nr={list:Object(L.createAsyncAction)("@MEAL_PLANS/LIST_FETCH_REQUEST","@MEAL_PLANS/LIST_FETCH_SUCCESS","@MEAL_PLANS/LIST_FETCH_FAILED")()},Cr=$a(wr,Nr);function Tr(e){var t=e[xr];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function kr(e){return{getMealPlans:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/meal-plans",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Ar=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Nr.list.request()),t.abrupt("return",kr(c).getMealPlans(e).then(function(e){var t=e.data,n=e.meta;return a(Nr.list.success({data:t,meta:n})),t}).catch(function(e){return a(Nr.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Pr(){var e=ee();return Object(x.useCallback)(function(t){return e(Ar(t))},[e])}function qr(){return Object(H.a)({},Object(T.c)(function(e){var t=Tr(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,mealPlans:t.get()})}),{fetchMealPlans:Pr()})}function Fr(e){Object(sn.a)(e);var t=qr(),a=t.mealPlans,n=t.total,r=t.from,c=t.to,l=t.isFetching,i=t.currentPage,o=t.lastPage,u=t.fetchMealPlans,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:i})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Meal Plans")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,from:r,to:c,currentPage:i,lastPage:o,isFetching:l,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{total:n,isFetching:l},w.a.createElement(F.n,{striped:!0,bordered:!0,headers:["Name","Description"],rows:a.map(function(e){return[e.name,e.description]})})))}var Mr=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return kr(t).getMealPlans({q:e}).then(function(e){return e.data})}}))}),Ir=R.object().shape({name:R.string().required("Name field is required"),description:R.string().required("Description field is required")}),Dr={name:"",description:""};var Yr=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Meal Plan")),w.a.createElement(Y.e,{initialValues:Dr,validationSchema:Ir,onSubmit:function(e,n){return n.setStatus(),t.post("/meal-plans",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Meal Plan"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"MAP",required:!0})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Description",name:"description",placeholder:"Modified American Plan (Two meals: Breakfast and one of Lunch or Dinner)",required:!0}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Meal Plan"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Rr(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"float-right btn branded"},"New Meal Plan"),w.a.createElement("h2",null,"Meal Plans"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Yr,{path:"/new"}),w.a.createElement(Fr,{path:"/"})))}var Hr="ROOM_TYPES_STATE",Lr={isFetching:!0,state:za()},Ur={list:Object(L.createAsyncAction)("@ROOM_TYPES/LIST_FETCH_REQUEST","@ROOM_TYPES/LIST_FETCH_SUCCESS","@ROOM_TYPES/LIST_FETCH_FAILED")()},Vr=$a(Lr,Ur);function Br(e){var t=e[Hr];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Gr(e){return{getRoomTypes:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/room-types",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Qr=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Ur.list.request()),t.abrupt("return",Gr(c).getRoomTypes(e).then(function(e){return a(Ur.list.success(e)),e.data}).catch(function(e){return a(Ur.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Zr(){var e=Object(T.c)(function(e){var t=Br(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,roomTypes:t.get()})}),t=function(){var e=ee();return Object(x.useCallback)(function(t){return e(Qr(t))},[e])}();return Object(H.a)({},e,{fetchRoomTypes:t})}function Wr(e){var t=fn(),a=Object(Z.a)(t,2),n=a[0],r=a[1],c=Zr(),l=c.fetchRoomTypes,i=c.roomTypes,o=c.total,u=c.from,s=c.to,m=c.currentPage,d=c.lastPage,f=c.isFetching;return Object(x.useEffect)(function(){l({page:m})},[l]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Room Types")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){r(e),l(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:o,from:u,to:s,isFetching:f,currentPage:m,lastPage:d,onChange:function(e){return l(Object(H.a)({},n,{page:e}))}}))),w.a.createElement(dn,{total:o,isFetching:f},w.a.createElement(F.n,{bordered:!0,striped:!0,headers:["Name","Description"],rows:i.map(function(e){return[e.name,e.description]})})))}var Kr=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return Gr(t).getRoomTypes({q:e}).then(function(e){return e.data})}}))}),zr=R.object().shape({name:R.string().required("Name field is required"),description:R.string().required("Description field is required")}),Jr={name:"",description:""};var $r=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Room Type")),w.a.createElement(Y.e,{initialValues:Jr,validationSchema:zr,onSubmit:function(e,n){return n.setStatus(),t.post("/room-types",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Room Type"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Delux",required:!0})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Description",name:"description",placeholder:"Luxury room",required:!0}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Room Type"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Xr(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"btn branded float-right"},"New Room Type"),w.a.createElement("h2",null,"Room Types"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement($r,{path:"/new"}),w.a.createElement(Wr,{path:"/"})))}function ec(e){return w.a.createElement(Ee,Object.assign({type:"date",placeholder:"dd/mm/yyyy"},e))}var tc={prices:[{start_date:"",end_date:"",base_price:0,persons:2,adult_with_extra_bed_price:0,child_with_extra_bed_price:0,child_without_extra_bed_price:0,hotel:void 0,meal_plan:void 0,room_type:void 0}]},ac=R.object().shape({prices:R.array().of(R.object().shape({hotel:R.object().required("Hotel is required"),start_date:R.string().required("Start date field is required"),end_date:R.string().required("End date field is required"),base_price:R.number().required("Base price field is required").positive("Price should be positive"),persons:R.number().required("Persons field is required").integer().positive("Persons should be positive number"),adult_with_extra_bed_price:R.number().required("Price for adult with extra bed is required").min(0,"Price should not be negative"),child_with_extra_bed_price:R.number().required("Price for child with extra bed is required").min(0,"Price should not be negative"),child_without_extra_bed_price:R.number().nullable(!0).min(0,"Price should not be negative").required("Price for child without extra bed is required"),meal_plan:R.object().required("Meal plan should be selected"),room_type:R.object().required("Room type should be selected")}))});var nc=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Add Prices")),w.a.createElement(Y.e,{initialValues:tc,validationSchema:ac,onSubmit:function(){var e=Object(D.a)(I.a.mark(function e(n,r){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setStatus(),e.abrupt("return",t.post("/hotel-prices",{prices:n.prices.reduce(function(e,t){var a=t.meal_plan,n=t.room_type,r=t.hotel,c=t.start_date,l=t.end_date,i=Object(ue.a)(t,["meal_plan","room_type","hotel","start_date","end_date"]),o=[];return o.push(Object(H.a)({},i,{start_date:Aa()(c).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),end_date:Aa()(l).hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),hotel_id:r&&r.id,meal_plan_id:a&&a.id,room_type_id:n&&n.id})),e.concat(o)},[])}).then(function(){a&&a(".."),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)}));case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),render:function(e){var t=e.isSubmitting,a=e.setFieldValue,n=e.values;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",{style:{minInlineSize:"auto"}},w.a.createElement("legend",null,"Add Hotel Price"),w.a.createElement(Y.c,{name:"prices",render:function(e){var t=e.name,r=e.remove,c=e.push;return w.a.createElement("ol",{className:"list"},n.prices.map(function(e,l){return w.a.createElement("li",{key:l},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(ec,{label:"Start Date",name:"".concat(t,".").concat(l,".start_date")})),w.a.createElement(Va,null,w.a.createElement(ec,{label:"End Date",name:"".concat(t,".").concat(l,".end_date")})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(t,".").concat(l,".hotel"),render:function(e){var t=e.field;return w.a.createElement(ur,Object.assign({},t,{multiple:!1,label:"Hotel",onChange:function(e,t){return a(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"prices.".concat(l,".meal_plan"),render:function(t){var n=t.field;return w.a.createElement(Mr,Object.assign({label:"Meal Plan"},n,{searchable:!1,multiple:!1,options:e.hotel&&e.hotel.meal_plans,onChange:function(e,t){return a(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"prices.".concat(l,".room_type"),render:function(t){var n=t.field;return w.a.createElement(Kr,Object.assign({},n,{label:"Room Type",searchable:!1,multiple:!1,options:e.hotel&&e.hotel.room_types,onChange:function(e,t){a(t,e),e&&e.allowed_extra_beds||(a("prices.".concat(l,".adult_with_extra_bed_price"),0),a("prices.".concat(l,".child_with_extra_bed_price"),0))}}))}}))),w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Prices"),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Number of persons",name:"".concat(t,".").concat(l,".persons"),type:"number"})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Base Price",name:"".concat(t,".").concat(l,".base_price"),type:"number"})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Adult with extra bed price",name:"".concat(t,".").concat(l,".adult_with_extra_bed_price"),type:"number",title:e.room_type?e.room_type.allowed_extra_beds?void 0:"No extra bed allowed":"Please select a room type",disabled:!e.room_type||!e.room_type.allowed_extra_beds})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Child with extra bed price",name:"".concat(t,".").concat(l,".child_with_extra_bed_price"),type:"number",title:e.room_type?e.room_type.allowed_extra_beds?void 0:"No extra bed allowed":"Please select a room type",disabled:!e.room_type||!e.room_type.allowed_extra_beds})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Child without extra bed price",name:"".concat(t,".").concat(l,".child_without_extra_bed_price"),type:"number"})))),w.a.createElement("hr",null),w.a.createElement("div",{className:"button-group form-group"},w.a.createElement(F.d,{className:"btn--secondary",onClick:function(t){return c(e)}},"+ Duplicate"),n.prices.length>1?w.a.createElement(F.d,{className:"btn--secondary",onClick:function(e){return r(l)}},"\xd7 Remove"):null))}),w.a.createElement("div",{className:"form-group"},w.a.createElement("hr",null),w.a.createElement(F.d,{onClick:function(e){return c(tc.prices[0])}},"+ Add More")))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Hotel Prices"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function rc(e){return{getPrice:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/prices",{params:{hotels:a}}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var cc=R.object().shape({hotels:R.array().of(R.object().shape({start_date:R.string().required("Start Date field is required."),no_of_nights:te().required("Number of nights field is required").integer("Number of nights should be an integer").positive("Number of nights should be a positive number"),hotel:R.object().required("Hotel field is required"),meal_plan:R.object().required("Meal Plan field is required"),rooms_detail:R.object().shape({room_type:R.object().required("Room type field is required"),adults_with_extra_bed:te().integer("Adult with extra bed should be an interger").required("Adult with extra bed is required"),children_with_extra_bed:te().integer("Child with extra bed should be an integer").required("Child with extra bed is required"),children_without_extra_bed:te().integer("Child without extra bed should be an integer").required("Child without extra bed is required"),no_of_rooms:te().positive("Number of rooms should be a positive number").integer("Number of room should be an integer").required("Number of rooms is required")})}))}),lc={hotels:[{start_date:"",no_of_nights:1,hotel:void 0,meal_plan:void 0,rooms_detail:{room_type:void 0,adults_with_extra_bed:0,children_with_extra_bed:0,children_without_extra_bed:0,no_of_rooms:1},calculated_price:void 0,given_price:0,edited_given_price:!1,comments:""}]},ic=ha(function(e){var t=e.initialValues,a=e.shouldEmptyInitialValues,n=void 0!==a&&a,r=e.xhr,c=e.onChange,l=e.bookingFrom,i=e.bookingTo,o=t||(n?{hotels:[]}:lc),u=Object(x.useCallback)(function(e){c&&c(e.hotels.reduce(function(e,t){return e+parseFloat((t.given_price?t.given_price:0).toString())},0),e.hotels.map(function(e){var t=e.start_date,a=e.no_of_nights,n=e.rooms_detail,r=e.hotel,c=e.meal_plan,l=Object(ue.a)(e,["start_date","no_of_nights","rooms_detail","hotel","meal_plan"]),i=n||{room_type:void 0},o=i.room_type,u=Object(ue.a)(i,["room_type"]);return Object(H.a)({},l,{checkin:Aa()(t).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),checkout:Aa()(t).add(a-1,"days").hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),hotel_id:r&&r.id,meal_plan_id:c&&c.id},u,{room_type_id:o&&o.id})}))},[c]);Object(F.q)(function(){u(o)});var s=Object(x.useMemo)(function(){for(var e=[],t=Aa()(i).diff(Aa()(l),"days"),a=0;a<=t;a++)e.push({id:a,name:Aa()(l).add(a,"day").format("YYYY-MM-DD")});return e},[l,i]),m=Object(x.useCallback)(function(){var e=Object(D.a)(I.a.mark(function e(t,a){var n,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setStatus(),n=[],c={hotels:[]},t.hotels.forEach(function(e){var t=e.start_date,a=e.no_of_nights,r=e.hotel,l=e.meal_plan,i=e.rooms_detail;if(r&&t&&a&&l&&i&&i.room_type){var o=i.room_type,u=i.adults_with_extra_bed,s=i.children_with_extra_bed,m=i.children_without_extra_bed,d=i.no_of_rooms;c.hotels.push(Object(H.a)({},e,{start_date:Aa()(t).format("YYYY-MM-DD"),no_of_nights:a})),n.push({checkin:Aa()(t).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),checkout:Aa()(t).add(a-1,"days").hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),hotel_id:r.id,meal_plan_id:l.id,room_type_id:o.id,adults_with_extra_bed:u,children_with_extra_bed:s,children_without_extra_bed:m,no_of_rooms:d})}}),e.abrupt("return",rc(r).getPrice(n).then(function(e){c.hotels=c.hotels.map(function(t,a){return Object(H.a)({},t,{calculated_price:e.hotels[a].price,price_calculation_string:e.hotels[a].price_calculation_string,given_price:t.edited_given_price?t.given_price:e.hotels[a].price,no_price_for_dates:e.hotels[a].no_price_for_dates})}),a.setValues(c),u(c)}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors)}));case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),[r,u]),d=Object(x.useRef)(!0);return w.a.createElement(Y.e,{initialValues:o,validationSchema:cc,onSubmit:function(e,t){return m(e,t).then(function(){t.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.values,n=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement(Y.c,{name:"hotels",render:function(e){var r=e.name,c=e.push,o=e.remove;return w.a.createElement("div",null,a.hotels.map(function(e,a){return w.a.createElement("div",{key:a,className:"border-gray-300 border-b-4"},w.a.createElement(Ua,null,w.a.createElement(Va,{md:7,className:"py-3"},w.a.createElement(Ua,null,w.a.createElement(Va,{md:12},w.a.createElement(Ua,null,w.a.createElement(Va,null,l&&i?w.a.createElement(pe,{name:"".concat(r,".").concat(a,".start_date"),render:function(t){var a=t.field;return w.a.createElement(F.m,Object.assign({},a,{label:"Checkin Date",options:s,searchable:!1,placeholder:"Select a date...",required:!0,onQuery:function(){},value:s.find(function(t){return t.name===e.start_date}),onChange:function(e,t){n(t,e.name)}}))}}):w.a.createElement(ec,{label:"Checkin Date",name:"".concat(r,".").concat(a,".start_date"),required:!0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Stay Nights",name:"".concat(r,".").concat(a,".no_of_nights"),type:"number",min:1,max:1e3})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(r,".").concat(a,".hotel"),render:function(e){var t=e.field;return w.a.createElement(ur,Object.assign({},t,{label:"Hotel",multiple:!1,onChange:function(e,t){return n(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(r,".").concat(a,".meal_plan"),render:function(t){var a=t.field;return w.a.createElement(Mr,Object.assign({},a,{label:"Meal Plan",multiple:!1,searchable:!1,options:e.hotel?e.hotel.meal_plans:[],onChange:function(e,t){return n(t,e)}}))}})))),w.a.createElement(Va,{md:12},w.a.createElement("div",null,w.a.createElement(Y.b,{name:"".concat(r,".").concat(a,".rooms_detail"),render:function(t){var r=t.field,c=r.name,l=r.value;return w.a.createElement(Ua,{key:a},w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(c,".room_type"),render:function(t){var a=t.field;return w.a.createElement(Kr,Object.assign({},a,{label:"Room Type",options:e.hotel?e.hotel.room_types:[],searchable:!1,multiple:!1,onChange:function(e,t){n(t,e),e&&e.allowed_extra_beds||(n("".concat(c,".adults_with_extra_bed"),0),n("".concat(c,".children_with_extra_bed"),0))}}))}})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(c,".no_of_rooms"),label:"No. of rooms",type:"number",min:1,max:1e3,onChange:function(e){var t=parseInt(e.currentTarget.value,10),a=l.room_type,r=l.adults_with_extra_bed,i=l.children_with_extra_bed;if(!isNaN(t)&&a){n(e.currentTarget.name,t);var o=a.allowed_extra_beds*t;r+i>o&&(n("".concat(c,".adults_with_extra_bed"),Math.min(o,r)),n("".concat(c,".children_with_extra_bed"),Math.min(o-Math.min(o,r),i)))}}})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(c,".adults_with_extra_bed"),label:"AWEB",type:"number",min:0,max:100,disabled:!l.room_type||!l.room_type.allowed_extra_beds,onChange:function(e){var t=e.currentTarget.name,a=parseInt(e.currentTarget.value,10),r=l.room_type,c=l.no_of_rooms,i=l.children_with_extra_bed;if(!isNaN(a)&&r){var o=r.allowed_extra_beds;n(t,Math.min(o*c-i,a))}}})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(c,".children_with_extra_bed"),label:"CWEB",type:"number",min:0,max:100,disabled:!l.room_type||!l.room_type.allowed_extra_beds,onChange:function(e){var t=e.currentTarget.name,a=parseInt(e.currentTarget.value,10),r=l.room_type,c=l.no_of_rooms,i=l.adults_with_extra_bed;if(!isNaN(a)&&r){var o=r.allowed_extra_beds;n(t,Math.min(o*c-i,a))}}})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(c,".children_without_extra_bed"),label:"CWoEB",min:0,max:100,type:"number"})))}}))))),w.a.createElement(Va,{md:4,className:"md:border-l py-3"},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(F.h,null,w.a.createElement("div",{className:"mb-1 white-space-pre"},"Calculated Price"),t?w.a.createElement(rn,null):void 0!==e.calculated_price?w.a.createElement(F.b,{primary:!0},w.a.createElement(F.i.RupeeIcon,null)," ",e.calculated_price):w.a.createElement(F.d,{type:"submit",secondary:!0,branded:!0,disabled:t},"Get Price"),e.no_price_for_dates&&e.no_price_for_dates.length?w.a.createElement("p",{className:"text-yellow-800"},"No prices available for"," ",e.no_price_for_dates.map(function(e){return Aa.a.utc(e).local().format("Do MMM")}).join(", ")):null)),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Given Price",name:"".concat(r,".").concat(a,".given_price"),type:"number",value:e.given_price,onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)&&(t=void 0),d.current=!1,n("".concat(r,".").concat(a,".edited_given_price"),!0),n(e.target.name,t)},min:0})),e.price_calculation_string&&e.price_calculation_string.length?w.a.createElement(Va,{sm:12,className:"mb-2"},e.price_calculation_string.map(function(e,t){var a=e.date,n=e.price,r=e.how;return w.a.createElement("div",{key:t},w.a.createElement(F.b,null,w.a.createElement(F.i.RupeeIcon,null)," ",n),w.a.createElement("b",null,Aa.a.utc(a).local().format(" DD/MM/YYYY ")),"(",r,")")})):null,w.a.createElement(Va,{sm:12},w.a.createElement(Ee,{label:"Comments",name:"".concat(r,".").concat(a,".comments"),maxLength:191,value:e.comments,placeholder:"Regarding pricing difference or any other",className:"w-full",onChange:function(e){var t=e.target.value;d.current=!1,n(e.target.name,t)}})))),w.a.createElement(Va,{md:1,className:"text-right md:border-l py-3"},w.a.createElement(F.d,{fullWidth:!0,onClick:function(){return c(e)}},"Duplicate"),w.a.createElement(F.d,{fullWidth:!0,onClick:function(){return o(a)}},"Remove"))))}),w.a.createElement("div",{className:"pt-4"},w.a.createElement(F.d,{secondary:!0,branded:!0,onClick:function(){return c(lc.hotels[0])}},"+ Add ",a.hotels.length?"Another":""," Hotel Query")))}}),w.a.createElement(he,{onChange:function(e){u(e.values),d.current?e.isSubmitting||cc.validate(e.values).then(Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.setSubmitting(!0),t.abrupt("return",m(e.values,e).then(function(){e.setSubmitting(!1)}));case 4:case"end":return t.stop()}},t)}))).catch(function(){}):d.current=!0}}))}})});function oc(e){var t=Object(x.useState)(0),a=Object(Z.a)(t,2),n=a[0],r=a[1];return w.a.createElement("div",null,w.a.createElement("div",{className:"flex align-items-center mb-8"},w.a.createElement(q.a,{to:"..",className:"mr-4 text-blue-600 hover:text-blue-800 text-lg px-2 border rounded-full"},w.a.createElement(F.i.ChevronDownIcon,{className:"rotate-90"})),w.a.createElement("h3",{className:"m-0"},"Calculate Hotel Prices")),w.a.createElement("p",null,"Please enter the desired hotel configuration query and press get price to get the prices."),w.a.createElement("div",{className:"bg-white px-4 pb-4 rounded shadow"},w.a.createElement(ic,{onChange:function(e){return r(e)}})),w.a.createElement("footer",{className:"mt-4"},w.a.createElement("mark",{className:"inilne-block text-xl font-bold rounded px-4 py-2"},"Total Price: ",X(n))))}function uc(e){return w.a.createElement(ie,null,w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("h2",{className:"white-space-pre"},"Hotel Prices")),w.a.createElement(Va,{className:"text-right d-flex align-items-center justify-content-end"},w.a.createElement("div",{className:"button-group"},w.a.createElement(q.a,{to:"upload-prices",className:"btn branded"},"Upload Prices"),w.a.createElement(q.a,{to:"new",className:"btn"},"Add Prices"),w.a.createElement(q.a,{to:"calculate-price",className:"btn btn-primary branded"},"Calculate Price")))),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(nc,{path:"/new"}),w.a.createElement(jr,{path:"/upload-prices"}),w.a.createElement(oc,{path:"/calculate-price"}),w.a.createElement(yr,{path:"/"})))}a(144);var sc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(F.a,Object.assign({},a,{fetch:function(e){return t.get("/hotel-extra-services",{params:{q:e}}).then(function(e){return e.data.data})}}))}),mc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(F.a,Object.assign({},a,{fetch:function(e){return t.get("/transport-extra-services",{params:{q:e}}).then(function(e){return e.data.data})}}))}),dc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(F.a,Object.assign({},a,{fetch:function(e){return t.get("/other-extra-services",{params:{q:e}}).then(function(e){return e.data.data})}}))});var fc=R.object().shape({hotel_extras:R.array().of(R.object().shape({service:R.object().typeError("Service field is required").required("Service field is required"),date:R.string(),hotel:R.object(),price:te().positive("Price should be positive"),comments:R.string()}))}),pc={hotel_extras:[{service:void 0,date:"",hotel:void 0,price:void 0,comments:""}]},Ec=ha(function(e){var t=e.initialValues,a=e.shouldEmptyInitialValues,n=void 0===a||a,r=e.xhr,c=e.onChange,l=e.bookingFrom,i=e.bookingTo,o=t||(n?{hotel_extras:[]}:pc),u=Object(x.useCallback)(function(e){c&&c(e.hotel_extras.reduce(function(e,t){return e+parseFloat((t.price?t.price:0).toString())},0),e.hotel_extras.map(function(e){var t=e.service,a=e.date,n=e.hotel,r=e.price,c=Object(ue.a)(e,["service","date","hotel","price"]);return Object(H.a)({},c,{service:t?t.name:void 0,date:a?Aa()(a).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"):"",hotel_id:n&&n.id,price:r})}))},[c]);Object(F.q)(function(){u(o)});var s=Object(x.useMemo)(function(){for(var e=[],t=Aa()(i).diff(Aa()(l),"days"),a=0;a<=t;a++)e.push({id:a,name:Aa()(l).add(a,"day").format("YYYY-MM-DD")});return e},[l,i]),m=Object(x.useCallback)(function(){var e=Object(D.a)(I.a.mark(function e(t,a){var n,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setStatus(),n=[],r={hotel_extras:[]},t.hotel_extras.forEach(function(e){var t=e.date,a=e.service,c=e.hotel,l=Object(ue.a)(e,["date","service","hotel"]);a&&(r.hotel_extras.push(Object(H.a)({},e,{date:t?Aa()(t).format("YYYY-MM-DD"):""})),n.push(Object(H.a)({},l,{date:t?Aa()(t).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"):"",hotel_id:c&&c.id,service:a&&a.name})))}),e.abrupt("return",function(){var e=Object(D.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({hotel_extras:t}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(n).then(function(e){r.hotel_extras=r.hotel_extras.map(function(t,a){return Object(H.a)({},t,{price:e.hotel_extras[a].price})}),a.setValues(r),u(r)}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors)}));case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),[r,u]),d=Object(x.useRef)(!0);return w.a.createElement(Y.e,{initialValues:o,validationSchema:fc,onSubmit:function(e,t){return m(e,t).then(function(){t.setSubmitting(!1)})},render:function(e){var t=e.values,a=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement(Y.c,{name:"hotel_extras",render:function(e){var n=e.name,r=e.push,c=e.remove;return w.a.createElement("div",null,t.hotel_extras.map(function(e,t){return w.a.createElement("div",{key:t,className:"border-gray-300 border-b-4"},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(n,".").concat(t,".service"),render:function(e){var t=e.field;return w.a.createElement(sc,Object.assign({},t,{label:"Service",placeholder:"Select or add a service...",required:!0,creatable:!0,fetchOnMount:!0,onChange:function(e,t){a(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Price",name:"".concat(n,".").concat(t,".price"),type:"number",placeholder:"3000",min:0})),w.a.createElement(Va,null,l&&i?w.a.createElement(pe,{name:"".concat(n,".").concat(t,".date"),render:function(t){var n=t.field;return w.a.createElement(F.m,Object.assign({},n,{label:"Date",options:s,searchable:!1,placeholder:"Select a date...",required:!0,value:s.find(function(t){return t.name===e.date}),onChange:function(e,t){a(t,e.name)}}))}}):w.a.createElement(ec,{label:"Date",name:"".concat(n,".").concat(t,".date"),required:!0})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(n,".").concat(t,".hotel"),render:function(e){var t=e.field;return w.a.createElement(ur,Object.assign({},t,{label:"Hotel",multiple:!1,onChange:function(e,t){return a(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(n,".").concat(t,".comments"),label:"Comments",placeholder:"Any comments regarding service"})),w.a.createElement(Va,{className:"pt-4 border-l text-right"},w.a.createElement(F.e,null,w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return r(e)}},"+ Duplicate"),w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return c(t)}},"\xd7 Remove")))))}),w.a.createElement("div",{className:"mt-4"},w.a.createElement(F.d,{onClick:function(){return r(pc.hotel_extras[0])}},"+ Add ",t.hotel_extras.length?"Another":""," Hotel Extra Service")))}}),w.a.createElement(he,{onChange:function(e){u(e.values),d.current?e.isSubmitting||fc.validate(e.values).then(Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.setSubmitting(!0),t.abrupt("return",m(e.values,e).then(function(){e.setSubmitting(!1)}));case 4:case"end":return t.stop()}},t)}))).catch(function(){}):d.current=!0}}),w.a.createElement("button",{type:"submit",className:"invisible"},"Get Price"))}})});function hc(e){return{getHotel:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/hotels/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),createContact:function(){var t=Object(D.a)(I.a.mark(function t(a,n){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/hotel-contacts",Object(H.a)({hotel_id:a},n)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}}var bc=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(tr.item.request()),t.abrupt("return",hc(c).getHotel(e).then(function(e){return a(tr.item.success(e)),e}).catch(function(e){return a(tr.item.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function gc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){return Object(T.c)(function(t){var a=nr(t);return{isFetching:a.isFetching,hotel:a.getItem(e)}})}(e),n=function(){var e=ee();return Object(x.useCallback)(function(t){return e(bc(t))},[e])}();return Object(x.useEffect)(function(){t&&e&&n(e)},[n,e,t]),Object(H.a)({},a,{fetchHotel:n})}var vc=ha(function(e){var t=e.hotelId,a=e.navigate,n=e.xhr,r=Object(sr.c)(),c=Object(Z.a)(r,3),l=c[0],i=c[1],o=c[2],u=gc(t,!0),s=u.hotel,m=u.isFetching,d=u.fetchHotel;if(!t)return a&&a("/hotels"),null;if(m)return w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null));if(!s)return null;var f=s.name,p=s.stars,E=s.extra_bed_child_age_start,h=s.extra_bed_child_age_end,b=s.meal_plans,g=s.room_types,v=s.location,_=s.contacts,y=s.payment_preference;return w.a.createElement("div",null,w.a.createElement(q.a,{to:".."},"Back"),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("h3",null,f," \u2022 ",v.short_name," \u2022 ",p," Star"),w.a.createElement("dl",null,w.a.createElement("dt",null,"Meal Plans:"),w.a.createElement("dd",null,b.map(function(e){return e.name}).join(" \u2022 ")),w.a.createElement("dt",null,"Room Types:"),w.a.createElement("dd",null,g.map(function(e){return"".concat(e.name,"(").concat(e.allowed_extra_beds," AEBs)")}).join(" \u2022 ")),w.a.createElement("dt",null,"Payment Preference"),w.a.createElement("dd",null,y?y.name:"NOT SET"),w.a.createElement("dt",null,"Extra bed child ages:"),w.a.createElement("dd",null,"From ",E," to ",h," ","years"))),w.a.createElement(Va,{sm:"auto",xs:12},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Contacts"),w.a.createElement("ul",null,(_||[]).map(function(e){return w.a.createElement("li",{key:e.id},e.name," ",e.phone_number,"<",e.email,">")})),w.a.createElement(sr.a,{open:l,onClose:o},w.a.createElement(sr.a.Header,{closeButton:!0},w.a.createElement(sr.a.Title,null,"Add Contact")),w.a.createElement(sr.a.Body,null,w.a.createElement(fr,{onCancel:o,onCreate:function(){var e=Object(D.a)(I.a.mark(function e(a){var r,c,l,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.name,c=a.email,l=a.phone_number,i=a.country,e.abrupt("return",hc(n).createContact(t,{name:r,email:c,phone_number:l,country_id:i?i.id:void 0}).then(function(e){return d(t),e}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}))),w.a.createElement(F.d,{onClick:i,"data-testid":"add_contact"},"Add Contact")))),w.a.createElement("div",{className:"mt-4"},w.a.createElement(q.a,{to:"/hotel-prices/new?id=".concat(s.id),className:"btn float-right"},"Add Prices"),w.a.createElement("h3",null,"Prices"),w.a.createElement(q.e,null,w.a.createElement(yr,{hotelId:s.id,path:"/"}))))}),_c="LOCATIONS_STATE",yc={isFetching:!0,state:za()},Sc={list:Object(L.createAsyncAction)("@LOCATIONS/LIST_FETCH_REQUEST","@LOCATIONS/LIST_FETCH_SUCCESS","@LOCATIONS/LIST_FETCH_FAILED")()},Oc=$a(yc,Sc);function jc(e){var t=e[_c];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function xc(e){return{getLocations:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/locations",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getCountries:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/locations/countries",{params:a}).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getStates:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/locations/states",{params:a}).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getCities:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/locations/cities",{params:a}).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var wc=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Sc.list.request()),t.abrupt("return",xc(c).getLocations(e).then(function(e){return a(Sc.list.success(e)),e.data}).catch(function(e){return a(Sc.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Nc(){var e=ee();return Object(x.useCallback)(function(t){return e(wc(t))},[e])}function Cc(){return Object(H.a)({},Object(T.c)(function(e){var t=jc(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,locations:t.get()})}),{fetchLocations:Nc()})}function Tc(e){var t=Cc(),a=t.locations,n=t.total,r=t.from,c=t.to,l=t.isFetching,i=t.currentPage,o=t.lastPage,u=t.fetchLocations,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:i})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Locations")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,from:r,to:c,currentPage:i,lastPage:o,isFetching:l,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{total:n,isFetching:l},w.a.createElement(F.n,{striped:!0,bordered:!0,headers:["Name","Latitude","Longitude"],responsive:!0,rows:a.map(function(e){return[e.name,e.latitude,e.longitude]})})))}var kc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return xc(t).getLocations({q:e}).then(function(e){return e.data})}}))}),Ac=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return xc(t).getCountries({q:e})}}))}),Pc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return xc(t).getStates({q:e})}}))}),qc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return xc(t).getCities({q:e})}}))}),Fc=R.object().shape({country:R.object().required("Country field is required"),latitue:R.string(),longitude:R.string()}),Mc={city:void 0,state:void 0,country:void 0,latitude:"",longitude:""};var Ic=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Location")),w.a.createElement(Y.e,{initialValues:Mc,validationSchema:Fc,onSubmit:function(e,n){n.setStatus();var r=e.country,c=e.state,l=e.city,i=e.latitude,o=e.longitude;t.post("/locations",{country:r?r.id:void 0,state:c?c.name:void 0,city:l?l.name:void 0,latitude:i,longitude:o}).then(function(){a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status,n=(e.values,e.setFieldValue);return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Location"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(pe,{name:"city",render:function(e){var t=e.field;return w.a.createElement(qc,Object.assign({},t,{multiple:!1,label:"City",onChange:function(e,t){return n(t,e)},placeholder:"Type to search.. (e.g. Jaipur)",creatable:!0}))}})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(pe,{name:"state",render:function(e){var t=e.field;return w.a.createElement(Pc,Object.assign({},t,{multiple:!1,label:"State",onChange:function(e,t){return n(t,e)},placeholder:"Type to search.. (e.g. Rajasthan)",creatable:!0}))}})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(pe,{name:"country",render:function(e){var t=e.field;return w.a.createElement(Ac,Object.assign({},t,{multiple:!1,label:"Country",placeholder:"Type to search.. (e.g. India)",onChange:function(e,t){n(t,e)}}))}})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{name:"latitude",label:"Latitude",placeholder:"27\xb0 2' 9.6252'' N"})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{name:"longitude",label:"Longitude",placeholder:"88\xb0 15' 45.6192'' E"}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Location"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Dc(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"float-right btn branded btn-primary"},"New Location"),w.a.createElement("h2",null,"Locations"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Ic,{path:"/new"}),w.a.createElement(Tc,{path:"/"})))}var Yc="HOTEL_PAYMENT_PREFERENCES_STATE",Rc={isFetching:!0,state:za()},Hc={list:Object(L.createAsyncAction)("@HOTEL_PAYMENT_PREFERENCES/LIST_FETCH_REQUEST","@HOTEL_PAYMENT_PREFERENCES/LIST_FETCH_SUCCESS","@HOTEL_PAYMENT_PREFERENCES/LIST_FETCH_FAILED")()},Lc=$a(Rc,Hc);function Uc(e){var t=e[Yc];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Vc(e){return{getHotelPaymentPreferences:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/hotel-payment-preferences",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getHotelPaymentReferences:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/hotel-payment-preferences/references",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Bc=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Hc.list.request()),t.abrupt("return",Vc(c).getHotelPaymentPreferences(e).then(function(e){return a(Hc.list.success(e)),e.data}).catch(function(e){return a(Hc.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Gc(){var e=ee();return Object(x.useCallback)(function(t){return e(Bc(t))},[e])}function Qc(){return Object(H.a)({},Object(T.c)(function(e){var t=Uc(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,hotelPaymentPreferences:t.get()})}),{fetchHotelPaymentPreferences:Gc()})}function Zc(e){var t=fn(),a=Object(Z.a)(t,2),n=a[0],r=a[1],c=Qc(),l=c.hotelPaymentPreferences,i=c.fetchHotelPaymentPreferences,o=c.total,u=c.from,s=c.to,m=c.isFetching,d=c.currentPage,f=c.lastPage;return Object(x.useEffect)(function(){i({page:d})},[i]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Hotel Payment Preferences List")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){r(e),i(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:o,from:u,to:s,currentPage:d,lastPage:f,isFetching:m,onChange:function(e){return i(Object(H.a)({},n,{page:e}))}}))),w.a.createElement(dn,{total:o,isFetching:m},w.a.createElement(F.n,{headers:["Description"],bordered:!0,striped:!0,rows:l.map(function(e){return[e.name]})})))}var Wc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return Vc(t).getHotelPaymentPreferences({q:e}).then(function(e){return e.data})}}))}),Kc=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return Vc(t).getHotelPaymentReferences({q:e}).then(function(e){return e.data})}}))}),zc=R.object().shape({breakdowns:R.array().of(R.object().shape({reference:R.object().required("Reference field is required"),day_offset:R.number().integer().required("Day offset field is required"),amount_share:R.number().integer().positive("Amount share should be positive integer").max(100,"Amount share can not be greater then 100").required("Amount share field is required")})).min(1,"Atleast on breakdown is required.")}),Jc={breakdowns:[{reference:void 0,day_offset:0,amount_share:100}]};var $c=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Trip Stage")),w.a.createElement(Y.e,{initialValues:Jc,validationSchema:zc,onSubmit:function(e,n){n.setStatus();var r=e.breakdowns.reduce(function(e,t){return e+t.amount_share},0);return 100!==r?(n.setStatus("Total amount share(".concat(r,") should be 100%")),void n.setSubmitting(!1)):t.post("/hotel-payment-preferences",{breakdowns:e.breakdowns.map(function(e){return Object(H.a)({},e,{reference:e.reference?e.reference.id:null})})}).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status,n=e.values,r=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add new Hotel Payment Preferences"),w.a.createElement(Y.c,{name:"breakdowns",render:function(e){var t=e.name,a=e.push,c=e.remove;return w.a.createElement("ul",{className:"list"},n.breakdowns.map(function(e,a,n){return w.a.createElement(Ua,{as:"li",key:a},w.a.createElement(Va,{md:3},w.a.createElement(pe,{name:"".concat(t,".").concat(a,".reference"),render:function(e){var t=e.field;return w.a.createElement(Kc,Object.assign({},t,{label:"Reference Event",required:!0,fetchOnMount:!0,multiple:!1,onChange:function(e,t){return r(t,e)}}))}})),w.a.createElement(Va,{md:3},w.a.createElement(Ee,{label:"Day offset from reference",name:"".concat(t,".").concat(a,".day_offset"),required:!0,type:"number"})),w.a.createElement(Va,{md:3},w.a.createElement(Ee,{label:w.a.createElement("span",{className:"whitespace-pre"},"Amount share from total amount"),name:"".concat(t,".").concat(a,".amount_share"),required:!0,type:"number",min:1,max:100})),w.a.createElement(Va,{md:3,className:"d-flex align-items-center"},n.length>1?w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return c(a)}},"\xd7 Remove"):null))}),w.a.createElement("li",{key:"add_more"},w.a.createElement(F.d,{onClick:function(){return a({amount_share:100-n.breakdowns[0].amount_share})}},"+ Add More")))}}),a?w.a.createElement("div",{className:"text--error"},a):null,w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Preference"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Xc(e){return w.a.createElement(ie,null,w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("h2",{className:"white-space-pre"},"Hotel Payment Preferences")),w.a.createElement(Va,{className:"d-flex align-items-center justify-content-end"},w.a.createElement(q.a,{to:"new",className:"btn btn-primary branded"},"New Hotel Payment Preference"))),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement($c,{path:"/new"}),w.a.createElement(Zc,{path:"/"})))}var el=R.object().shape({name:R.string().required("Name field is required"),stars:R.number().positive("Star rating field should a positive integer.").integer("Star rating field should be positive integer").required("Stars rating field is required"),extra_bed_child_age_start:R.number().positive("Child start age should be a positive number").integer("Child start age should be an integer").required("Child start age is required"),extra_bed_child_age_end:R.number().positive("Child end age should be a positive number").integer("Child end age should be an integer").required("Child end age is required"),meal_plans:R.array().min(1,"Please select atleast one meal plan"),room_types:R.array().of(R.object().shape({room_types:R.array().min(1,"Please select atleast one room type").required("Please select a room type"),allowed_extra_beds:R.number().typeError("Allowed extra bed must be a number").integer("Allowed extra beds should be an integer").min(0,"Allowed extra beds should not be negative").required("Allowed extra beds field is required")})).min(1,"Please select atleast one room type"),location:R.object().required("Location field is required")}),tl={name:"",stars:1,extra_bed_child_age_start:6,extra_bed_child_age_end:12,meal_plans:[],room_types:[{room_types:[],allowed_extra_beds:1}],location:void 0};var al=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Hotel")),w.a.createElement(Y.e,{initialValues:tl,validationSchema:el,onSubmit:function(e,n){n.setStatus(),t.post("/hotels",Object(H.a)({},e,{meal_plans:e.meal_plans.map(function(e){return e.id}),room_types:e.room_types.reduce(function(e,t){var a=t.room_types,n=t.allowed_extra_beds;return e.concat(a.map(function(e){return{room_type_id:e.id,allowed_extra_beds:n}}))},[]),location_id:e.location?e.location.id:void 0,payment_preference_id:e.payment_preference?e.payment_preference.id:void 0})).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.setFieldValue,n=e.values,r=e.status;return w.a.createElement(Y.d,{noValidate:!0},r?w.a.createElement("div",null,r):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add Hotel"),w.a.createElement(Ua,null,w.a.createElement(Va,{lg:!0,md:4,sm:6,xs:12},w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Taj Hotel",required:!0})),w.a.createElement(Va,{lg:!0,md:4,sm:6,xs:12},w.a.createElement(pe,{name:"location",render:function(e){var t=e.field;return w.a.createElement(kc,Object.assign({},t,{label:"Location",multiple:!1,onChange:function(e,t){return a(t,e)}}))}})),w.a.createElement(Va,{lg:!0,md:4,sm:6},w.a.createElement(pe,{name:"payment_preference",render:function(e){var t=e.field;return w.a.createElement(Wc,Object.assign({},t,{label:"Payment Preference",multiple:!1,onChange:function(e,t){return a(t,e)},fetchOnMount:!0}))}})),w.a.createElement(Va,{lg:!0,md:4,sm:4,xs:8},w.a.createElement(pe,{name:"meal_plans",render:function(e){var t=e.field;return w.a.createElement(Mr,Object.assign({},t,{label:"Meal Plan(s) served",onChange:function(e,t){return a(t,e)},fetchOnMount:!0}))}})),w.a.createElement(Va,{lg:1,md:4,sm:2,xs:4},w.a.createElement(Ee,{label:"Stars",name:"stars",type:"number",required:!0,max:5,min:1}))),w.a.createElement(Y.c,{name:"room_types",render:function(e){var t=e.name,r=e.push,c=e.remove;return w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Room Type(s) Available"),w.a.createElement("ul",{className:"list"},n.room_types.map(function(e,n,r){return w.a.createElement("li",{key:n},w.a.createElement(Ua,null,w.a.createElement(Va,{xs:"auto"},w.a.createElement(pe,{name:"".concat(t,".").concat(n,".room_types"),render:function(e){var t=e.field;return w.a.createElement(Kr,Object.assign({},t,{label:"Room Types",fetchOnMount:!0,onChange:function(e,t){return a(t,e)}}))}})),w.a.createElement(Va,{xs:"auto"},w.a.createElement(Ee,{label:"Allowed extra bed(s)",type:"number",name:"".concat(t,".").concat(n,".allowed_extra_beds"),value:e.allowed_extra_beds,min:0})),w.a.createElement(Va,{xs:"auto",className:"d-flex align-items-center"},r.length>1?w.a.createElement(F.d,{onClick:function(e){return c(n)},className:"btn--secondary"},"\xd7 Remove"):null)))}),w.a.createElement("li",null,w.a.createElement(F.d,{onClick:function(e){return r(n.room_types[0])}},"+ Add More Room Types"))))}}),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Extra bed child start age",name:"extra_bed_child_age_start",required:!0,type:"number",min:1})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Extra bed child end age",name:"extra_bed_child_age_end",required:!0,type:"number",min:1}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Hotel Details"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function nl(e){return w.a.createElement(ie,null,w.a.createElement("div",{className:"float-right button-group"},w.a.createElement(q.a,{to:"/hotel-prices",className:"btn branded"},"Hotel Prices"),w.a.createElement(q.a,{to:"/hotel-prices/upload-prices",className:"btn"},"Upload Prices"),w.a.createElement(q.a,{to:"new",className:"btn btn-primary branded"},"New Hotel")),w.a.createElement("h2",null,"Hotels"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(al,{path:"new"}),w.a.createElement(vc,{path:":hotelId/*"}),w.a.createElement(or,{path:"/"})))}var rl="CAB_TYPES_STATE",cl={isFetching:!0,state:za()},ll={list:Object(L.createAsyncAction)("@CAB_TYPES/LIST_FETCH_REQUEST","@CAB_TYPES/LIST_FETCH_SUCCESS","@CAB_TYPES/LIST_FETCH_FAILED")()},il=$a(cl,ll);function ol(e){var t=e[rl];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function ul(e){return{getCabTypes:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/cab-types",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var sl=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(ll.list.request()),t.abrupt("return",ul(c).getCabTypes(e).then(function(e){var t=e.data,n=e.meta;return a(ll.list.success({data:t,meta:n})),t}).catch(function(e){return a(ll.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function ml(){var e=ee();return Object(x.useCallback)(function(t){return e(sl(t))},[e])}function dl(){return Object(H.a)({},Object(T.c)(function(e){var t=ol(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,cabTypes:t.get()})}),{fetchCabTypes:ml()})}function fl(e){var t=dl(),a=t.cabTypes,n=t.isFetching,r=t.total,c=t.currentPage,l=t.lastPage,i=t.from,o=t.to,u=t.fetchCabTypes,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:c})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Cab Types")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:r,from:i,to:o,currentPage:c,lastPage:l,isFetching:n,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{isFetching:n,total:r},w.a.createElement(F.n,{headers:["Name","Capacity"],alignCols:{1:"right"},bordered:!0,striped:!0,rows:a.map(function(e){return[e.name,e.capacity]})})))}var pl=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return ul(t).getCabTypes({q:e}).then(function(e){return e.data})}}))}),El=R.object().shape({name:R.string().required("Name field is required"),capacity:R.number().positive("Capacity should be a positive integer").integer("Capacity should be a positive integer").required("Capacity field is required")}),hl={name:"",capacity:4};var bl=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Cab Type")),w.a.createElement(Y.e,{initialValues:hl,validationSchema:El,onSubmit:function(e,n){n.setStatus(),t.post("/cab-types",e).then(function(){a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add Cab Type"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Medium",required:!0})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Capacity",name:"capacity",required:!0,type:"number",min:1}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Cab Type"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function gl(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"btn btn-primary branded float-right"},"New Cab Type"),w.a.createElement("h2",null,"Cab Types"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(bl,{path:"/new"}),w.a.createElement(fl,{path:"/"})))}var vl="CAB_LIST_STATE",_l={isFetching:!0,state:za()},yl={list:Object(L.createAsyncAction)("@CABS/LIST_FETCH_REQUEST","@CABS/LIST_FETCH_SUCCESS","@CABS/LIST_FETCH_FAILED")(),item:Object(L.createAsyncAction)("@CABS/ITEM_FETCH_REQUEST","@CABS/ITEM_FETCH_SUCCESS","@CABS/ITEM_FETCH_FAILED")()},Sl=$a(_l,yl);function Ol(e){var t=e[vl];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function jl(e){return{getCab:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/cabs/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var xl=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(yl.item.request()),t.abrupt("return",jl(c).getCab(e).then(function(e){return a(yl.item.success(e)),e}).catch(function(e){return a(yl.item.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function wl(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){return Object(T.c)(function(t){var a=Ol(t);return{isFetching:a.isFetching,cab:a.getItem(e)}})}(e),n=function(){var e=ee();return Object(x.useCallback)(function(t){return e(xl(t))},[e])}();return Object(x.useEffect)(function(){t&&e&&n(e)},[e,t,n]),Object(H.a)({},a,{fetchCab:n})}function Nl(e){var t=e.cabId,a=e.navigate,n=wl(t,!0),r=n.cab,c=n.isFetching;return t?w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,r?r.number_plate:""," Cab")),w.a.createElement(q.a,{to:".."},"Back to list"),c?"Loading...":r?w.a.createElement("div",null,r.name," - ",r.cab_type.name," - ",r.number_plate,w.a.createElement("br",null),"Created at:"," ",Aa.a.utc(r.created_at).local().toLocaleString(),w.a.createElement("br",null)):w.a.createElement(q.d,{noThrow:!0,to:"/cabs"})):(a&&a("/cabs"),null)}function Cl(e){return{getCabs:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/cabs",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Tl=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(yl.list.request()),t.abrupt("return",Cl(c).getCabs(e).then(function(e){var t=e.data,n=e.meta;return a(yl.list.success({data:t,meta:n})),t}).catch(function(e){return a(yl.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function kl(){var e=Object(T.b)();return Object(x.useCallback)(function(t){return e(Tl(t))},[e])}function Al(){return Object(H.a)({},Object(T.c)(function(e){var t=Ol(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,cabs:t.get()})}),{fetchCabs:kl()})}function Pl(e){var t=Al(),a=t.cabs,n=t.total,r=t.from,c=t.to,l=t.currentPage,i=t.lastPage,o=t.isFetching,u=t.fetchCabs,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:l})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Cabs")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(En,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,from:r,to:c,currentPage:l,lastPage:i,isFetching:o,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(mn,{isFetching:o,total:n},w.a.createElement(F.n,{headers:["Name","Number Plate"],striped:!0,bordered:!0,rows:a.map(function(e){return[w.a.createElement(q.a,{to:e.id.toString()},e.name),e.number_plate]})})))}ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0,fetch:function(e){return Cl(t).getCabs({q:e}).then(function(e){return e.data})}},a))});var ql=R.object().shape({name:R.string().required("Name for the cab is required."),number_plate:R.string().required("Number Plate is required").max(299,"Maximum 299 characters allowed"),cab_type:R.object().required("Cab type is required")}),Fl={name:"",number_plate:"",cab_type:void 0};var Ml=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement("div",null,w.a.createElement(Y.e,{initialValues:Fl,validationSchema:ql,onSubmit:function(e,n){var r=e.number_plate,c=e.cab_type,l=e.name;if(r&&c&&l)return n.setStatus(),t.post("/cabs",{name:l,number_plate:r,cab_type_id:c.id}).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)});n.setStatus("Please fill the required fields")},render:function(e){var t=e.isSubmitting,a=e.status,n=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Cab"),w.a.createElement(Ee,{label:"Name",name:"name",required:!0,placeholder:"Suzuki Wagon R"}),w.a.createElement(pe,{name:"cab_type",render:function(e){var t=e.field;return w.a.createElement(pl,Object.assign({},t,{label:"Cab Type",multiple:!1,placeholder:"Type to search... (e.g. Wagon)",onChange:function(e,t){return n(t,e)}}))}}),w.a.createElement(Ee,{label:"Number Plate",name:"number_plate",required:!0,placeholder:"RJ18 CC 7838"}),w.a.createElement("footer",null,w.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Submit"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Il(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"btn float-right"},"Add New Cab"),w.a.createElement("h2",null,"Cabs"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Ml,{path:"/new"}),w.a.createElement(Nl,{path:":cabId"}),w.a.createElement(Pl,{path:"/"})))}var Dl=a(21),Yl=a.n(Dl),Rl="TRIP_LIST_STATE",Hl={isFetching:!0,state:za()},Ll={list:Object(L.createAsyncAction)("@TRIPS/LIST_FETCH_REQUEST","@TRIPS/LIST_FETCH_SUCCESS","@TRIPS/LIST_FETCH_FAILED")(),item:Object(L.createAsyncAction)("@TRIPS/ITEM_FETCH_REQUEST","@TRIPS/ITEM_FETCH_SUCCESS","@TRIPS/ITEM_FETCH_FAILED")()},Ul=$a(Hl,Ll);function Vl(e){var t=e[Rl];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Bl(e){return!!e.converted_at}var Gl="TRIP_STAGES_STATE",Ql={isFetching:!0,state:za()},Zl={list:Object(L.createAsyncAction)("@TRIP_STAGES/LIST_FETCH_REQUEST","@TRIP_STAGES/LIST_FETCH_SUCCESS","@TRIP_STAGES/LIST_FETCH_FAILED")()},Wl=$a(Ql,Zl);function Kl(e){var t=e[Gl];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function zl(e){return{getTripStages:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trip-stages",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Jl=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Zl.list.request()),t.abrupt("return",zl(c).getTripStages(e).then(function(e){return a(Zl.list.success(e)),e.data}).catch(function(e){return a(Zl.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function $l(){var e=ee();return Object(x.useCallback)(function(t){return e(Jl(t))},[e])}function Xl(){return Object(H.a)({},Object(T.c)(function(e){var t=Kl(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,tripStages:t.get()})}),{fetchTripStages:$l()})}function ei(e){Object(sn.a)(e);var t=fn(),a=Object(Z.a)(t,2),n=a[0],r=a[1],c=Xl(),l=c.fetchTripStages,i=c.tripStages,o=c.total,u=c.from,s=c.to,m=c.currentPage,d=c.lastPage,f=c.isFetching;return Object(x.useEffect)(function(){l({page:m})},[l]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Trip Stages")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){r(e),l(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:o,from:u,to:s,currentPage:m,lastPage:d,isFetching:f,onChange:function(e){return l(Object(H.a)({},n,{page:e}))}}))),w.a.createElement(dn,{total:o,isFetching:f},w.a.createElement(F.n,{striped:!0,bordered:!0,headers:["Name","Description"],rows:i.map(function(e){return[e.name,e.description]})})))}var ti=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return zl(t).getTripStages({q:e}).then(function(e){return e.data})}}))}),ai=R.object().shape({name:R.string().required("Name field is required"),description:R.string().required("Description field is required")}),ni={name:"",description:""};var ri=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Trip Stage")),w.a.createElement(Y.e,{initialValues:ni,validationSchema:ai,onSubmit:function(e,n){return n.setStatus(),t.post("/trip-stages",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add new Trip Stage"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Converted",required:!0})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Description",name:"description",placeholder:"Trip Converted",required:!0}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function ci(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"float-right btn btn-primary branded"},"New Trip Stage"),w.a.createElement("h2",null,"Trip Stages"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(ri,{path:"/new"}),w.a.createElement(ei,{path:"/"})))}a(145);function li(e,t){return{getTags:function(){var a=Object(D.a)(I.a.mark(function a(n){return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.get("/".concat(t,"-tags"),{params:n}).then(function(e){return e.data}));case 1:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),storeTags:function(){var a=Object(D.a)(I.a.mark(function a(n,r){return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e.post("/".concat(t,"-tags"),{items:n,tags:r}).then(function(e){return e.data}));case 1:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()}}var ii=ha(function(e){var t=e.xhr,a=e.type,n=Object(ue.a)(e,["xhr","type"]);return w.a.createElement(F.a,Object.assign({multiple:!0,creatable:!0},n,{fetch:function(e){return li(t,a).getTags({q:e}).then(function(e){return e.data})}}))});function oi(e){return{getTrips:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trips",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var ui=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Ll.list.request()),t.abrupt("return",oi(c).getTrips(e).then(function(e){return a(Ll.list.success(e)),e.data}).catch(function(e){return a(Ll.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function si(){var e=ee();return Object(x.useCallback)(function(t){return e(ui(t))},[e])}function mi(){return Object(H.a)({},Object(T.c)(function(e){var t=Vl(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,trips:t.get()})}),{fetchTrips:si()})}function di(e){Object(sn.a)(e);var t=fn(),a=Object(Z.a)(t,2),n=a[0],r=a[1],c=mi(),l=c.trips,i=c.fetchTrips,o=c.total,u=c.from,s=c.to,m=c.currentPage,d=c.lastPage,f=c.isFetching,p=Object(x.useCallback)(function(e){i(e)},[i]);return Object(x.useEffect)(function(){var e=n.stages,t=void 0===e?[]:e,a=n.tags,r=void 0===a?[]:a,c=n.hotels_not_booked,l=void 0!==c&&c,i=Object(ue.a)(n,["stages","tags","hotels_not_booked"]);p(Object(H.a)({stages:t.map(function(e){return e.name}),tags:r.map(function(e){return e.name}),hotels_not_booked:Number(l)},i,{page:1}))},[n,p]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"List of trips")),w.a.createElement("div",null,w.a.createElement(q.a,{to:"new",className:"float-right btn branded"},"Add New Trip"),w.a.createElement("h2",null,"List of Trips")),w.a.createElement("hr",null),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{placeholder:"Search by id, destination...",onSearch:function(e){r(Object(H.a)({},n,e))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:o,from:u,to:s,currentPage:m,lastPage:d,isFetching:f,onChange:function(e){return p(Object(H.a)({},n,{page:e}))}}))),w.a.createElement(Ua,null,w.a.createElement(Va,{md:"auto"},w.a.createElement(fi,{onChange:function(e){var t=e.stages,a=void 0===t?[]:t,c=e.tags,l=void 0===c?[]:c,i=e.hotels_not_booked,o=void 0!==i&&i,u=Object(ue.a)(e,["stages","tags","hotels_not_booked"]);r(Object(H.a)({},n,{stages:a,tags:l,hotels_not_booked:o},u))}})),w.a.createElement(Va,null,w.a.createElement(dn,{total:o,isFetching:f},w.a.createElement(F.n,{striped:!0,bordered:!0,responsive:!0,headers:["Destinations","Dates","Traveler","Stage","Owners"],rows:l.map(function(e){var t=e.id,a=e.trip_source,n=e.trip_id,r=e.locations,c=e.no_of_adults,l=e.children,i=e.contact,o=e.latest_stage,u=e.created_by,s=e.created_at,m=e.latest_given_quote,d=e.sales_team,f=void 0===d?[]:d,p=e.operations_team,E=void 0===p?[]:p,h=e.converted_at,b=Aa.a.utc(e.start_date),g=Aa.a.utc(e.end_date),v=g.diff(b,"days");return[w.a.createElement("div",null,w.a.createElement("div",null,w.a.createElement(q.a,{to:t.toString()},w.a.createElement("span",null,r.map(function(e){return e.short_name}).join(" \u2022\xa0")),m&&m.locations.length?w.a.createElement("span",{className:"text-gray-600"},w.a.createElement("br",null),w.a.createElement("small",null,"(",m.locations.map(function(e){return e.short_name}).join("-"),")")):null,w.a.createElement("br",null),w.a.createElement("span",{className:"text-black"},n||t,"-",a.short_name)))),w.a.createElement("div",null,w.a.createElement("div",null,ae(b.format("Do MMM, YYYY"),Yl()("Night",v,!0))),w.a.createElement("small",{className:"text-gray-600"},"(",Aa.a.utc().isBefore(b)?"".concat(Aa.a.utc(b).local().diff(Aa()(),"days")," days remaining"):Aa.a.utc().isAfter(g)?"".concat(Aa.a.utc().diff(g,"days")," days ago"):"On Trip",")")),i?w.a.createElement("div",null,w.a.createElement("div",null,Yl()("Adult",c,!0),l?" with ".concat(l," children"):""),w.a.createElement("div",{className:"text-gray-600"},i.name),w.a.createElement("small",null,ae([i.phone_number,w.a.createElement("a",{href:"tel:".concat(i.phone_number),className:"text-gray-600"},i.phone_number)],[i.email,w.a.createElement("a",{href:"mailto:".concat(i.email),className:"text-gray-600"},i.email)]))):null,w.a.createElement("div",null,w.a.createElement("div",null,o?o.name:"Initiated"),w.a.createElement("small",null,m?w.a.createElement("span",null,w.a.createElement(F.b,{primary:!!h},w.a.createElement(F.i.RupeeIcon,null)," ",X(m.given_price))," ","by ",m.created_by.name," \u2022 ",Aa.a.utc(s).local().fromNow()):w.a.createElement("span",null,"Initiated by ",u.name," \u2022"," ",Aa.a.utc(s).local().fromNow()))),w.a.createElement("div",null,f.concat(E).map(function(e){return e.name}).join(" \u2022 "))]})})))))}function fi(e){var t=e.label,a=void 0===t?"Filters":t,n=e.onChange;return w.a.createElement(Y.e,{initialValues:{},onSubmit:function(e){n(e)},render:function(e){var t=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("h5",{className:"mb-4 border-b"},a),w.a.createElement(pe,{name:"stages",render:function(e){var a=e.field;return w.a.createElement(ti,Object.assign({},a,{label:"Trip Stage",fetchOnMount:!0,placeholder:"Select stage(s)...",onChange:function(e,a){return t(a,e)}}))}}),w.a.createElement(pe,{name:"tags",render:function(e){var a=e.field;return w.a.createElement(ii,Object.assign({},a,{type:"trip",label:"Tags",placeholder:"Search and select tag(s)...",onChange:function(e,a){return t(a,e)}}))}}),w.a.createElement(Ee,{name:"hotels_not_booked",type:"checkbox",label:"Hotels Not Booked"}),w.a.createElement(he,{onChange:function(e){var t=e.values;n(t)}}),w.a.createElement("hr",null),w.a.createElement(F.d,{type:"submit",secondary:!0},"Apply Filters"))}})}function pi(e){var t=e.initialState,a=e.render,n=e.children,r=Object(x.useState)(t),c=Object(Z.a)(r,2),l={state:c[0],setState:c[1]};return a?a(l):"function"===typeof n?n(l):n||null}function Ei(e){return{getQuotes:function(){var t=Object(D.a)(I.a.mark(function t(a,n){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trips/".concat(a,"/quotes"),{params:n}).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),giveQuote:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/given-quotes",a).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getInstalments:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/quote-instalments/".concat(a)).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var hi=R.object().shape({given_price:R.number().positive("Given price should a positive number").required("Give price field is required"),comments:R.string()}).required("Quote data is required");function bi(e){var t=e.quote,a=e.readOnly,n=void 0!==a&&a,r=e.navigate,c=e.showHotelBookingStatus,l=ba(),i=t.id,o=t.total_price,u=t.hotels,s=t.hotel_extras,m=t.cabs,d=t.transport_extras,f=t.other_extras,p=t.comments,E=t.created_by,h=t.created_at,b=t.trip_id,g=Object(F.p)(),v=Object(Z.a)(g,3),_=v[0],y=v[1],S=v[2],O=Object(F.r)(function(){return Ei(l).getInstalments(i).then(function(e){return e.data})}),j=Object(Z.a)(O,3),x=j[0],N=j[1],C=j[2].isFetching;return w.a.createElement("div",null,w.a.createElement("header",{className:"mb-4"},w.a.createElement("h6",null,"Cost Price: ",w.a.createElement(F.i.RupeeIcon,null)," ",X(o)," /-"),w.a.createElement("blockquote",null,p?w.a.createElement("p",null,p):null,w.a.createElement("em",null,"on"," ",Aa.a.utc(h).local().format("DD MMM, YYYY [at] hh:mm A")," ","by ",E.name,"<",E.email,">"))),u.length||s.length?w.a.createElement("section",null,w.a.createElement("div",{className:"flex"},w.a.createElement("span",{className:"inline-flex w-8 h-8 align-items-center justify-content-center bg-primary-100 rounded-full mr-2"},w.a.createElement(F.i.BedIcon,null)),w.a.createElement("div",{className:"w-full"},u.length?w.a.createElement("div",null,w.a.createElement("h6",null,"Accommodation"),w.a.createElement(F.n,{striped:!0,bordered:!0,caption:"Bellow are the details of daywise hotel accomodation and their prices",responsive:!0,headers:["Date","Hotel","Meal Plan","Rooms","Price"].concat(c?["Booking Stage"]:[]),alignCols:{4:"right",5:"center"},rows:u.map(function(e){var t=e.hotel,a=e.checkin,n=e.checkout,r=e.meal_plan,l=e.room_type,i=e.no_of_rooms,o=e.comments,u=e.given_price,s=e.latest_booking_stage;return[w.a.createElement("span",{className:"whitespace-pre"},Aa.a.utc(a).local().format("DD MMM YYYY"),w.a.createElement("br",null),w.a.createElement("small",null,Aa.a.utc(n).diff(Aa.a.utc(a),"days")+1," ","Nights")),w.a.createElement("div",null,w.a.createElement("b",null,t.name),w.a.createElement("br",null),w.a.createElement("small",null,t.location.short_name,", ",t.stars," Star"),o?w.a.createElement("blockquote",null,o):null),r.name,w.a.createElement("div",null,l.name,w.a.createElement("br",null),w.a.createElement("small",null,i," Rooms")),X(u)].concat(c?[w.a.createElement("span",null,s?s.name:"Pending")]:[])})})):null,s.length?w.a.createElement("div",null,w.a.createElement("h6",null,"Hotel Extra Services"),w.a.createElement(F.n,{striped:!0,bordered:!0,caption:"Extras services for hotels",responsive:!0,headers:["Service","Date","Hotel","Price"],alignCols:{3:"right"},rows:s.map(function(e){var t=e.service,a=e.date,n=e.hotel,r=e.given_price,c=e.comments;return[w.a.createElement("div",null,w.a.createElement("div",null,t.name),c?w.a.createElement("blockquote",null,c):null),a?w.a.createElement("span",{className:"whitespace-pre"},Aa.a.utc(a).local().format("DD MMM YYYY")," "):null,n&&n.name,X(r)]})})):null))):null,m.length||d.length?w.a.createElement("section",null,w.a.createElement("div",{className:"flex"},w.a.createElement("span",{className:"inline-flex w-8 h-8 align-items-center justify-content-center bg-primary-100 rounded-full mr-2"},w.a.createElement(F.i.BusIcon,null)),w.a.createElement("div",{className:"w-full"},m.length?w.a.createElement("div",null,w.a.createElement("h6",null,"Transportation"),w.a.createElement(F.n,{striped:!0,bordered:!0,caption:"Bellow are the details for the daywise transportation and their prices",responsive:!0,headers:["Date","Service","Cabs","Price"],alignCols:{3:"right"},rows:m.map(function(e){var t=e.from_date,a=e.to_date,n=e.cab_type,r=e.transport_service,c=e.cab_locality,l=e.no_of_cabs,i=e.comments,o=e.given_price;return[w.a.createElement("span",{className:"whitespace-pre"},Aa.a.utc(t).local().format("DD MMM YYYY")," ",w.a.createElement("br",null),w.a.createElement("small",null,Aa.a.utc(a).diff(Aa.a.utc(t),"days")+1," ","Days")),w.a.createElement("div",null,r.name,i?w.a.createElement("blockquote",null,i):null),w.a.createElement("div",null,n.name,w.a.createElement("br",null),w.a.createElement("small",null,l," cabs"),c?w.a.createElement("span",null," ","\u2022 ",w.a.createElement("small",null,c.name)):""),X(o)]})})):null,d.length?w.a.createElement("div",null,w.a.createElement("h6",null,"Transport Extra Services"),w.a.createElement(F.n,{striped:!0,bordered:!0,caption:"Extras services for Transportation",responsive:!0,headers:["Service","Date","Price"],alignCols:{2:"right"},rows:d.map(function(e){var t=e.service,a=e.date,n=e.given_price,r=e.comments;return[w.a.createElement("div",null,w.a.createElement("div",null,t.name),r?w.a.createElement("blockquote",null,r):null),a?w.a.createElement("span",{className:"whitespace-pre"},Aa.a.utc(a).local().format("DD MMM YYYY")," "):null,X(n)]})})):null))):null,f.length?w.a.createElement("section",null,w.a.createElement("div",{className:"flex"},w.a.createElement("span",{className:"inline-flex w-8 h-8 align-items-center justify-content-center bg-primary-100 rounded-full mr-2"},w.a.createElement(F.i.StarEmptyIcon,null)),w.a.createElement("div",{className:"w-full"},w.a.createElement("h6",null,"Other Services"),w.a.createElement(F.n,{striped:!0,bordered:!0,caption:"Other Services provided with this quote",responsive:!0,headers:["Service","Date","Price"],alignCols:{2:"right"},rows:f.map(function(e){var t=e.service,a=e.date,n=e.given_price,r=e.comments;return[w.a.createElement("div",null,w.a.createElement("div",null,t.name),r?w.a.createElement("blockquote",null,r):null),a?w.a.createElement("span",{className:"whitespace-pre"},Aa.a.utc(a).local().format("DD MMM YYYY")," "):null,X(n)]})})))):null,n?null:w.a.createElement("div",null,w.a.createElement(F.e,null,w.a.createElement(F.d,{onClick:y},"Give this quote"),w.a.createElement(F.f,{open:_,onClose:S},w.a.createElement(F.f.Header,null,w.a.createElement(F.f.Title,{as:"h4"},"Give this quote (price: ",t.total_price,")")),w.a.createElement(F.f.Body,null,w.a.createElement(Y.e,{initialValues:{comments:"",factor:1.3,given_price:Math.ceil(1.3*t.total_price)},validationSchema:hi,onSubmit:function(e,t){var a,n,c;window.confirm("Are you sure you want to give this quote to the customer?")?(a=i,n=e.given_price,c=e.comments,Ei(l).giveQuote({given_price:n,quote_id:a,comments:c})).then(S).then(function(){r&&r("../given-quotes")}):t.setSubmitting(!1)},render:function(e){var a=e.isSubmitting,n=e.setFieldValue,r=e.values;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Multiplication Factor",name:"factor",type:"number",step:.01,onChange:function(e){n("given_price",Math.ceil(t.total_price*parseFloat(e.currentTarget.value))),n(e.currentTarget.name,e.currentTarget.value)}}),w.a.createElement(Ee,{name:"given_price",label:"Given Price",type:"number"})),w.a.createElement(Va,null,w.a.createElement(pi,{initialState:15},function(e){var a=e.state,n=e.setState,c=Number(Number(r.given_price-t.total_price-r.given_price*a/100).toFixed(2)),l=Number((c+t.total_price)/t.total_price).toFixed(2);return w.a.createElement("div",{className:"form-group"},w.a.createElement("div",{className:"pb-2"},"See effective factor and profit (after commission)"),w.a.createElement("label",{htmlFor:"commission_factor"},"Any commission"),w.a.createElement(F.j,null,w.a.createElement(fe,{value:a,type:"number",id:"commission_factor",min:0,max:100,onChange:function(e){return n(Math.max(Math.min(parseFloat(e.currentTarget.value||"0"),100),0))}}),w.a.createElement(F.k,null,"%")),w.a.createElement("div",{className:"mt-2"},"Effective Factor: ",l,w.a.createElement("br",null),"Profit:"," ",w.a.createElement(F.b,{primary:!0},w.a.createElement(F.i.RupeeIcon,null)," ",X(c))))}))),w.a.createElement(Ee,{name:"comments",as:"textarea",label:"Any Comments",placeholder:"Write comments regarding prices or anything else..."}),w.a.createElement(F.f.Footer,null,w.a.createElement(F.d,{primary:!0,type:"submit",disabled:a},"Give Quote"),w.a.createElement(F.d,{onClick:S,className:"btn--secondary"},"Cancel")))}}))),w.a.createElement(F.d,{onClick:N},"Get Instalments for Hotels and Cabs"," ",C?w.a.createElement(rn,null):null),w.a.createElement(q.a,{to:"/trips/".concat(b,"/new-quote"),state:{quote:t},className:"btn"},"Edit")),x?w.a.createElement(F.n,{striped:!0,bordered:!0,headers:["Amount","Due Date"],alignCols:{0:"right"},autoWidth:!0,rows:x.map(function(e){return[e.amount.toFixed(2),Aa.a.utc(e.due_date).local().format("DD/MM/YYYY")]})}):null))}function gi(e){var t=e.trip,a=e.navigate,n=ba(),r=Object(x.useState)([]),c=Object(Z.a)(r,2),l=c[0],i=c[1];return Object(x.useEffect)(function(){Ei(n).getQuotes(t.id).then(i)},[]),w.a.createElement("div",{className:"mt-4"},0===l.length?w.a.createElement("p",{className:"text-center"},"No quote created for this trip"):w.a.createElement("ol",null,l.map(function(e){return w.a.createElement("li",{key:e.id,className:"p-4 shadow rounded mb-8 bg-white"},w.a.createElement(bi,{quote:e,navigate:a,readOnly:!!t.converted_at}))})))}function vi(e){return{getGivenQuotes:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/given-quotes",{params:a}).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getInstalments:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/given-quote-instalments/".concat(a)).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}function _i(e){var t=e.givenQuote,a=e.readOnly,n=e.showHotelBookingStatus,r=ba(),c=t.id,l=t.given_price,i=t.quote,o=t.comments,u=t.created_by,s=t.created_at,m=Object(F.r)(function(){return vi(r).getInstalments(c).then(function(e){return e.data})}),d=Object(Z.a)(m,3),f=d[0],p=d[1],E=d[2].isFetching;return w.a.createElement("div",null,w.a.createElement("header",{className:"mb-8"},w.a.createElement("h5",null,"Given Price:"," ",w.a.createElement("mark",null,w.a.createElement(F.i.RupeeIcon,null)," ",X(l)," /-")),w.a.createElement("blockquote",null,o?w.a.createElement("p",null,o):null,w.a.createElement("em",null,"on"," ",Aa.a.utc(s).local().format("DD MMM, YYYY [at] hh:mm A")," ","by ",u.name,"<",u.email,">"))),w.a.createElement(bi,{quote:i,readOnly:!0,showHotelBookingStatus:n}),a?null:w.a.createElement(F.d,{onClick:p},"Get Instalments for Customer"," ",E?w.a.createElement(rn,null):null),f?w.a.createElement(F.n,{striped:!0,bordered:!0,headers:["Amount","Due Date"],alignCols:{0:"right"},autoWidth:!0,rows:f.map(function(e){return[e.amount.toFixed(2),Aa.a.utc(e.due_date).local().format("DD/MM/YYYY")]})}):null)}function yi(e){var t=e.trip,a=Object(x.useState)([]),n=Object(Z.a)(a,2),r=n[0],c=n[1],l=ba();return Object(x.useEffect)(function(){vi(l).getGivenQuotes({trip_id:t.id}).then(c)},[]),w.a.createElement("div",{className:"mt-4"},0===r.length?w.a.createElement("p",{className:"text-center"},"No quote given yet"):w.a.createElement("ol",null,r.map(function(e){return w.a.createElement("li",{key:e.id,className:"p-4 shadow rounded mb-8 bg-white"},w.a.createElement(_i,{givenQuote:e}))})))}var Si="TRANSPORT_SERVICE_PRICES_STATE",Oi={isFetching:!0,state:za()},ji={list:Object(L.createAsyncAction)("@TRANSPORT_SERVICE_PRICES/LIST_FETCH_REQUEST","@TRANSPORT_SERVICE_PRICES/LIST_FETCH_SUCCESS","@TRANSPORT_SERVICE_PRICES/LIST_FETCH_FAILED")()},xi=$a(Oi,ji);function wi(e){var t=e[Si];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Ni(e){return{getTransportServicePrices:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/cab-prices",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Ci=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(ji.list.request()),t.abrupt("return",Ni(c).getTransportServicePrices(e).then(function(e){var t=e.data,n=e.meta;return a(ji.list.success({data:t,meta:n})),t}).catch(function(e){return a(ji.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Ti(){var e=Object(T.c)(function(e){var t=wi(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,transportServicePrices:t.get()})}),t=function(){var e=ee();return Object(x.useCallback)(function(t){return e(Ci(t))},[e])}();return Object(H.a)({},e,{fetchTransportServicePrices:t})}function ki(e){var t=Ti(),a=t.fetchTransportServicePrices,n=t.transportServicePrices,r=t.total,c=t.from,l=t.to,i=t.currentPage,o=t.lastPage,u=t.isFetching,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){a({page:i})},[a]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Transport Service Prices Listing")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),a(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:r,from:c,to:l,currentPage:i,lastPage:o,isFetching:u,onChange:function(e){a(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{total:r,isFetching:u},w.a.createElement(F.n,{bordered:!0,striped:!0,responsive:!0,headers:["Start Date","End Date","Cab Type","Service","Locality","Per Day","Per Day Parking","Fixed","/km","Toll","Parking","Night","Min Km/Day"],rows:n.map(function(e){var t=e.start_date,a=e.end_date,n=e.cab_type,r=e.cab_locality,c=e.transport_service,l=e.per_day_charges,i=e.per_day_parking_charges,o=e.price,u=e.per_km_charges,s=e.minimum_km_per_day,m=e.night_charges,d=e.parking_charges,f=e.toll_charges;return[Aa.a.utc(t).local().format("DD/MM/YYYY"),Aa.a.utc(a).local().format("DD/MM/YYYY"),n.name,c.name,r?r.name:"",X(l),X(i),X(o),u,f,d,m,X(s)]}),alignCols:{4:"right",5:"right",6:"right",7:"right",8:"right",9:"right"}})))}var Ai={timezone_offset:(new Date).getTimezoneOffset(),file:"",file_name:""},Pi=R.object().shape({timezone_offset:R.string().required(),file:R.mixed().required("File field is required"),file_name:R.string().required("File field is required")}),qi=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement("div",null,w.a.createElement(Y.e,{initialValues:Ai,validationSchema:Pi,onSubmit:function(e,n){var r=new FormData;r.set("timezone_offset",e.timezone_offset.toString()),r.set("file",e.file),t.post("/cab-prices",r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){a&&a("..")}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)}).then(function(){n.setSubmitting(!1)})},render:function(e){var t=e.setFieldValue,a=e.isSubmitting,n=e.status;return w.a.createElement(Y.d,{noValidate:!0,encType:"multipart/form-data"},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Upload file to add cab prices"),n?w.a.createElement("p",{className:"text-red-700"},n):null,w.a.createElement(Ee,{label:"Select a csv file",name:"file_name",type:"file",accept:".csv",onChange:function(e){var a=e.currentTarget;t("file",a.files?a.files[0]:""),t(a.name,a.value)}}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:a,primary:!0},"Upload"),w.a.createElement(q.a,{className:"btn",to:".."},"Cancel"))))}}))});a(146);var Fi=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(F.a,Object.assign({multiple:!0,creatable:!0},a,{fetch:function(e){return function(e){return{getTransportLocations:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/transport-locations",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(t).getTransportLocations({q:e}).then(function(e){return e.data})}}))}),Mi="TRANSPORT_SERVICES_STATE",Ii={isFetching:!0,state:za()},Di={list:Object(L.createAsyncAction)("@TRANSPORT_SERVICES/LIST_FETCH_REQUEST","@TRANSPORT_SERVICES/LIST_FETCH_SUCCESS","@TRANSPORT_SERVICES/LIST_FETCH_FAILED")()},Yi=$a(Ii,Di);function Ri(e){var t=e[Mi];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Hi(e){return{getTransportServices:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/transport-services",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Li=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Di.list.request()),t.abrupt("return",Hi(c).getTransportServices(e).then(function(e){return a(Di.list.success(e)),e.data}).catch(function(e){return a(Di.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Ui(){var e=Object(T.c)(function(e){var t=Ri(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,transportServices:t.get()})}),t=function(){var e=ee();return Object(x.useCallback)(function(t){return e(Li(t))},[e])}();return Object(H.a)({},e,{fetchTransportServices:t})}function Vi(e){Object(sn.a)(e);var t=Ui(),a=t.fetchTransportServices,n=t.transportServices,r=t.total,c=t.from,l=t.to,i=t.currentPage,o=t.lastPage,u=t.isFetching,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){a({page:i})},[a]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Transport Services List")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),a(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:r,from:c,to:l,isFetching:u,currentPage:i,lastPage:o,onChange:function(e){return a(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{total:r,isFetching:u},w.a.createElement(F.n,{responsive:!0,striped:!0,bordered:!0,headers:["Destinations","Distance (kms)"],alignCols:{1:"right"},rows:n.map(function(e){var t=e.name,a=e.comments,n=e.distance;return[w.a.createElement("div",null,t,a?w.a.createElement("blockquote",null,a):null),n]})})))}var Bi=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return Hi(t).getTransportServices({q:e}).then(function(e){return e.data})}}))}),Gi=R.object().shape({via:R.array().of(R.object().required("Destination is required")).min(1,"Atleast one locations required").required("Via field is required"),is_sightseeing:R.boolean(),distance:R.number().positive("Distance should be a positive number").integer("Distance should be an integer").required("Distance field is required"),comments:R.string()}),Qi={via:[void 0],is_sightseeing:!1,distance:0,comments:""};var Zi=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Add New Transport Service")),w.a.createElement(Y.e,{initialValues:Qi,validationSchema:Gi,onSubmit:function(){var e=Object(D.a)(I.a.mark(function e(n,r){var c,l,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setStatus(),c=n.via,l=n.is_sightseeing,i=Object(ue.a)(n,["via","is_sightseeing"]),e.abrupt("return",t.post("/transport-services",Object(H.a)({},i,{via:c.map(function(e){return e.name}),is_sightseeing:+!!l})).then(function(){a&&a(".."),r.setSubmitting(!1)}).catch(function(e){return r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1),Promise.reject(e)}));case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),render:function(e){var t=e.isSubmitting,a=e.values,n=e.status,r=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},n?w.a.createElement("div",null,n):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Transport Service"),w.a.createElement(Y.c,{name:"via",render:function(e){var t=e.name,n=e.remove,c=e.push;return w.a.createElement("div",{className:"form-group"},w.a.createElement("p",null,"Add destinations for the transportation"),w.a.createElement(Ua,null,a.via.map(function(e,a,c){return w.a.createElement(Va,{md:3,key:a,style:{marginBottom:"10px"}},w.a.createElement(pe,{name:"".concat(t,".").concat(a),render:function(e){var t=e.field;return w.a.createElement(Fi,Object.assign({},t,{label:"Destination",multiple:!1,onChange:function(e,t){return r(t,e)}}))}}),c.length>1?w.a.createElement(F.d,{tertiary:!0,onClick:function(e){return n(a)}},"\xd7 Remove"):null)})),w.a.createElement(F.d,{onClick:function(e){return c(void 0)}},"+ Add More Destinations"))}}),w.a.createElement("hr",null),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(Ee,{name:"distance",type:"number",label:"Total distance for the transportation (in kms)",placeholder:"420",required:!0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Any Comments",name:"comments",type:"text"})),w.a.createElement(Va,{className:"mt-4"},w.a.createElement(Ee,{name:"is_sightseeing",type:"checkbox",label:"Includes sightseeing"}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Service"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Wi(e){return w.a.createElement(ie,null,w.a.createElement("div",{className:"float-right button-group"},w.a.createElement(q.a,{to:"/transport-service-prices",className:"btn branded"},"Prices"),w.a.createElement(q.a,{to:"/transport-service-prices/upload-prices",className:"btn"},"Upload Prices"),w.a.createElement(q.a,{to:"new",className:"btn btn-primary branded"},"New Transport Service")),w.a.createElement("h2",null,"Transport Services"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Zi,{path:"/new"}),w.a.createElement(Vi,{path:"/"})))}var Ki=R.object().shape({prices:R.array().of(R.object().shape({start_date:R.string().required("Start date is required"),end_date:R.string().required("End date is required"),cab_type:R.object().required("Cab type is required"),transport_service:R.object().required("Transport service is required"),cab_locality:R.object(),per_day_charges:te(),per_day_parking_charges:te(),price:te(),per_km_charges:te(),minimum_km_per_day:te(),night_charges:te(),toll_charges:te(),parking_charges:te()}))}),zi={prices:[{start_date:"",end_date:"",cab_type:void 0,transport_service:void 0,cab_locality:void 0,per_day_charges:void 0,per_day_parking_charges:void 0,price:void 0,per_km_charges:void 0,minimum_km_per_day:void 0,toll_charges:void 0,night_charges:void 0,parking_charges:void 0}]};var Ji=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(Y.e,{initialValues:zi,validationSchema:Ki,onSubmit:function(e,n){n.setStatus();var r=[];e.prices.forEach(function(e){var t=e.cab_type,a=e.transport_service,n=e.cab_locality,c=e.start_date,l=e.end_date,i=Object(ue.a)(e,["cab_type","transport_service","cab_locality","start_date","end_date"]);t&&a&&r.push(Object(H.a)({},i,{start_date:Aa()(c).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),end_date:Aa()(l).hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),cab_type_id:t.id,transport_service_id:a.id,cab_locality_id:n&&n.name}))}),function(e){return{storePrice:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/cab-prices",a).then(function(e){return e.data.cab_price}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(t).storePrice({prices:r}).then(function(){n.setSubmitting(!1),a&&a("..")}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.status,a=e.isSubmitting,n=e.values,r=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",{style:{minInlineSize:"auto"}},w.a.createElement("legend",null,"Add Transport Service Price"),w.a.createElement(Y.c,{name:"prices",render:function(e){var t=e.name,a=e.push,c=e.remove;return w.a.createElement("ol",{className:"list"},n.prices.map(function(e,n,l){return w.a.createElement("li",{key:n},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(ec,{label:"Start Date",name:"".concat(t,".").concat(n,".start_date"),required:!0})),w.a.createElement(Va,null,w.a.createElement(ec,{label:"End Date",name:"".concat(t,".").concat(n,".end_date"),required:!0})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(t,".").concat(n,".cab_type"),render:function(e){var t=e.field;return w.a.createElement(pl,Object.assign({},t,{label:"Cab Type",multiple:!1,required:!0,fetchOnMount:!0,onChange:function(e,t){return r(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(t,".").concat(n,".transport_service"),render:function(e){var t=e.field;return w.a.createElement(Bi,Object.assign({},t,{label:"Transport Service",multiple:!1,required:!0,fetchOnMount:!0,onChange:function(e,t){return r(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(t,".").concat(n,".cab_locality"),render:function(e){var t=e.field;return w.a.createElement(Fi,Object.assign({},t,{label:"Cab Locality",multiple:!1,fetchOnMount:!0,onChange:function(e,t){return r(t,e)}}))}}))),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Per Day Charges",name:"".concat(t,".").concat(n,".per_day_charges"),type:"number",min:0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Per Day Parking Charges",name:"".concat(t,".").concat(n,".per_day_parking_charges"),type:"number",min:0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Price (fixed Per Service)",name:"".concat(t,".").concat(n,".price"),type:"number",min:0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Charges per Km",name:"".concat(t,".").concat(n,".per_km_charges"),type:"number",min:0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Minimum Kms per Day",name:"".concat(t,".").concat(n,".minimum_km_per_day"),type:"number",min:0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Toll charges per Km",name:"".concat(t,".").concat(n,".toll_charges"),type:"number",min:0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Night Charges per Km",name:"".concat(t,".").concat(n,".night_charges"),type:"number",min:0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Parking Charges per km",name:"".concat(t,".").concat(n,".parking_charges"),type:"number",min:0}))),w.a.createElement("div",{className:"button-group mt-4"},w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return a(e)}},"+ Duplicate"),l.length>1?w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return c(n)}},"\xd7 Remove"):null))}),w.a.createElement("div",{className:"form-group"},w.a.createElement("hr",null),w.a.createElement(F.d,{branded:!0,onClick:function(){return a(zi.prices[0])}},"+ Add More Transport Prices")))}}),t?w.a.createElement("div",null,t):null,w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:a},"Save Prices"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}})});function $i(e){return{getPrice:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/prices",{params:{cabs:a}}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Xi=R.object().shape({cabs:R.array().of(R.object().shape({start_date:R.string().required("Start date field is required"),no_of_days:te().positive("Number of days should be a positive integer").integer("Number of days should be a positive integer").required("Number of days is required."),cab_type:R.object().required("Cab type field is required"),transport_service:R.object().required("Service is required"),cab_locality:R.object().nullable(!0),no_of_cabs:te().positive("Number of cabs should be a positive integer").integer("Number of cabs should be a positive integer.").required("Number of cabs is required")}))}),eo={cabs:[{start_date:"",no_of_days:1,cab_type:void 0,transport_service:void 0,cab_locality:void 0,no_of_cabs:1,calculated_price:void 0,edited_given_price:!1,given_price:0,comments:""}]},to=ha(function(e){var t=e.initialValues,a=e.shouldEmptyInitialValues,n=void 0!==a&&a,r=e.xhr,c=e.onChange,l=e.bookingFrom,i=e.bookingTo,o=t||(n?{cabs:[]}:eo),u=Object(x.useCallback)(function(e){c&&c(e.cabs.reduce(function(e,t){return e+parseFloat((t.given_price?t.given_price:0).toString())},0),e.cabs.map(function(e){var t=e.start_date,a=e.no_of_days,n=e.cab_type,r=e.transport_service,c=e.cab_locality,l=Object(ue.a)(e,["start_date","no_of_days","cab_type","transport_service","cab_locality"]);return Object(H.a)({},l,{from_date:Aa()(t).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),to_date:Aa()(t).add(a-1,"days").hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),cab_type_id:n&&n.id,transport_service_id:r&&r.id,cab_locality_id:c&&c.id})}))},[c]);Object(F.q)(function(){u(o)});var s=Object(x.useMemo)(function(){for(var e=[],t=Aa()(i).diff(Aa()(l),"days"),a=0;a<=t;a++)e.push({id:a,name:Aa()(l).add(a,"day").format("YYYY-MM-DD")});return e},[l,i]),m=Object(x.useCallback)(function(){var e=Object(D.a)(I.a.mark(function e(t,a){var n,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setStatus(),n=[],c={cabs:[]},t.cabs.forEach(function(e){var t=e.start_date,a=e.no_of_days,r=e.cab_type,l=e.transport_service,i=e.cab_locality,o=e.no_of_cabs;t&&a&&r&&l&&o&&(c.cabs.push(Object(H.a)({},e,{start_date:Aa()(t).format("YYYY-MM-DD"),no_of_days:a})),n.push({from_date:Aa()(t).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),to_date:Aa()(t).add(a-1,"days").hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),cab_type_id:r.id,transport_service_id:l.id,cab_locality_id:i?i.id:null,no_of_cabs:o}))}),e.abrupt("return",$i(r).getPrice(n).then(function(e){c.cabs=c.cabs.map(function(t,a){return Object(H.a)({},t,{calculated_price:e.cabs[a].price,given_price:t.edited_given_price?t.given_price:e.cabs[a].price,no_price_for_dates:e.cabs[a].no_price_for_dates})}),a.setValues(c),u(c)}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors)}));case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),[r,u]),d=Object(x.useRef)(!0);return w.a.createElement(Y.e,{initialValues:o,validationSchema:Xi,onSubmit:function(e,t){return m(e,t).then(function(){t.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.values,n=e.status,r=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},n?w.a.createElement("p",{className:"text-red-700 mb-2"},n):null,w.a.createElement(Y.c,{name:"cabs",render:function(e){var n=e.name,c=e.push,o=e.remove;return w.a.createElement("div",null,a.cabs.map(function(e,a){return w.a.createElement("div",{key:a,className:"border-gray-300 border-b-4"},w.a.createElement(Ua,null,w.a.createElement(Va,{md:7,className:"py-3"},w.a.createElement(Ua,null,w.a.createElement(Va,null,l&&i?w.a.createElement(pe,{name:"".concat(n,".").concat(a,".start_date"),render:function(t){var a=t.field;return w.a.createElement(F.m,Object.assign({},a,{label:"Start Date",options:s,searchable:!1,onQuery:function(){},value:s.find(function(t){return t.name===e.start_date}),placeholder:"Select a date...",required:!0,onChange:function(e,t){r(t,e.name)}}))}}):w.a.createElement(ec,{label:"Start Date",name:"".concat(n,".").concat(a,".start_date"),required:!0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"No of days",name:"".concat(n,".").concat(a,".no_of_days"),type:"number",required:!0,min:1,max:1e4})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(n,".").concat(a,".cab_type"),render:function(e){var t=e.field;return w.a.createElement(pl,Object.assign({},t,{label:"Cab Type",multiple:!1,fetchOnMount:!0,onChange:function(e,t){return r(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(n,".").concat(a,".transport_service"),render:function(e){var t=e.field;return w.a.createElement(Bi,Object.assign({},t,{label:"Transport Service",multiple:!1,onChange:function(e,t){return r(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(n,".").concat(a,".cab_locality"),render:function(e){var t=e.field;return w.a.createElement(Fi,Object.assign({},t,{creatable:!1,label:"Cab Locality",multiple:!1,onChange:function(e,t){return r(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"No of cabs",name:"".concat(n,".").concat(a,".no_of_cabs"),min:1,max:1e3,type:"number",required:!0})))),w.a.createElement(Va,{md:4,className:"md:border-l py-3"},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(F.h,null,w.a.createElement("div",{className:"mb-1 white-space-pre"},"Calculated Price"),t?w.a.createElement(rn,null):void 0!==e.calculated_price?w.a.createElement(F.b,{primary:!0},w.a.createElement(F.i.RupeeIcon,null)," ",e.calculated_price):w.a.createElement(F.d,{type:"submit",secondary:!0,branded:!0,disabled:t},"Get Price"),e.no_price_for_dates&&e.no_price_for_dates.length?w.a.createElement("p",{className:"text-yellow-800"},"No prices available for"," ",e.no_price_for_dates.map(function(e){return Aa.a.utc(e).local().format("Do MMM")}).join(", ")):null)),w.a.createElement(Va,null,w.a.createElement(F.h,null,w.a.createElement("label",null,"Given Price"),w.a.createElement(fe,{name:"".concat(n,".").concat(a,".given_price"),type:"number",value:e.given_price,onChange:function(e){var t=parseInt(e.target.value,10);d.current=!1,r(e.target.name,t),r("".concat(n,".").concat(a,".edited_given_price"),!0)},min:0}))),w.a.createElement(Va,{sm:12},w.a.createElement(Ee,{label:"Commets",name:"".concat(n,".").concat(a,".comments"),maxLength:191,value:e.comments,placeholder:"Regarding pricing difference or any other",className:"w-full",onChange:function(e){var t=e.target.value;d.current=!1,r(e.target.name,t)}})))),w.a.createElement(Va,{md:1,className:"text-right md:border-l py-3"},w.a.createElement(F.d,{fullWidth:!0,onClick:function(){return c(e)}},"Duplicate"),w.a.createElement(F.d,{fullWidth:!0,onClick:function(){return o(a)}},"Remove"))))}),w.a.createElement("div",{className:"pt-4"},w.a.createElement(F.d,{secondary:!0,branded:!0,onClick:function(){return c(eo.cabs[0])}},"+ Add More Price Queries")))}}),w.a.createElement(he,{onChange:function(e){u(e.values),d.current?e.isSubmitting||Xi.validate(e.values).then(Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.setSubmitting(!0),t.abrupt("return",m(e.values,e).then(function(){e.setSubmitting(!1)}));case 4:case"end":return t.stop()}},t)}))).catch(function(){}):d.current=!0}}))}})});function ao(e){var t=Object(x.useState)(0),a=Object(Z.a)(t,2),n=a[0],r=a[1];return w.a.createElement("div",null,w.a.createElement("div",{className:"flex align-items-center mb-8"},w.a.createElement(q.a,{to:"..",className:"mr-4 text-blue-600 hover:text-blue-800 text-lg px-2 border rounded-full"},w.a.createElement(F.i.ChevronDownIcon,{className:"rotate-90"})),w.a.createElement("h3",{className:"m-0"},"Calculate Transportation Prices")),w.a.createElement("p",null,"Please enter your transportation query and press get price to get the prices."),w.a.createElement("div",{className:"bg-white px-4 pb-4 rounded shadow"},w.a.createElement(to,{onChange:function(e){return r(e)}})),w.a.createElement("footer",{className:"mt-4"},w.a.createElement("mark",{className:"inline-block text-2xl font-bold px-4 py-2 rounded"},"Total Price: ",X(n))))}function no(e){return w.a.createElement(ie,null,w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("h2",{className:"white-space-pre"},"Transport Service Prices")),w.a.createElement(Va,{className:"text-right d-flex align-items-center justify-content-end"},w.a.createElement("div",{className:"button-group"},w.a.createElement(q.a,{to:"upload-prices",className:"btn branded"},"Upload Prices"),w.a.createElement(q.a,{to:"new",className:"btn"},"Add Prices"),w.a.createElement(q.a,{to:"calculate-price",className:"btn branded btn-primary"},"Calculate Price")))),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Ji,{path:"/new"}),w.a.createElement(qi,{path:"/upload-prices"}),w.a.createElement(ao,{path:"/calculate-price"}),w.a.createElement(ki,{path:"/"})))}var ro=R.object().shape({transport_extras:R.array().of(R.object().shape({service:R.object().typeError("Service field is required").required("Service field is required"),date:R.string(),price:te().positive("Price should be positive"),comments:R.string()}))}),co={transport_extras:[{service:void 0,date:"",price:void 0,comments:""}]},lo=ha(function(e){var t=e.initialValues,a=e.shouldEmptyInitialValues,n=void 0===a||a,r=e.xhr,c=e.onChange,l=e.bookingFrom,i=e.bookingTo,o=t||(n?{transport_extras:[]}:co),u=Object(x.useCallback)(function(e){c&&c(e.transport_extras.reduce(function(e,t){return e+parseFloat((t.price?t.price:0).toString())},0),e.transport_extras.map(function(e){var t=e.service,a=e.date,n=Object(ue.a)(e,["service","date"]);return Object(H.a)({},n,{date:a?Aa()(a).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"):"",service:t?t.name:void 0})}))},[c]);Object(F.q)(function(){u(o)});var s=Object(x.useMemo)(function(){for(var e=[],t=Aa()(i).diff(Aa()(l),"days"),a=0;a<=t;a++)e.push({id:a,name:Aa()(l).add(a,"day").format("YYYY-MM-DD")});return e},[l,i]),m=Object(x.useCallback)(function(){var e=Object(D.a)(I.a.mark(function e(t,a){var n,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setStatus(),n=[],r={transport_extras:[]},t.transport_extras.forEach(function(e){var t=e.date,a=e.service,c=Object(ue.a)(e,["date","service"]);a&&(r.transport_extras.push(Object(H.a)({},e,{date:t?Aa()(t).format("YYYY-MM-DD"):""})),n.push(Object(H.a)({},c,{date:t?Aa()(t).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"):"",service:a&&a.name})))}),e.abrupt("return",function(){var e=Object(D.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({transport_extras:t}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(n).then(function(e){r.transport_extras=r.transport_extras.map(function(t,a){return Object(H.a)({},t,{price:e.transport_extras[a].price})}),a.setValues(r),u(r)}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors)}));case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),[r,u]),d=Object(x.useRef)(!0);return w.a.createElement(Y.e,{initialValues:o,validationSchema:ro,onSubmit:function(e,t){return m(e,t).then(function(){t.setSubmitting(!1)})},render:function(e){e.isSubmitting;var t=e.values,a=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement(Y.c,{name:"transport_extras",render:function(e){var n=e.name,r=e.push,c=e.remove;return w.a.createElement("div",null,t.transport_extras.map(function(e,t){return w.a.createElement("div",{key:t,className:"border-gray-300 border-b-4"},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(n,".").concat(t,".service"),render:function(e){var t=e.field;return w.a.createElement(mc,Object.assign({},t,{label:"Service",placeholder:"Select or add a service...",required:!0,creatable:!0,fetchOnMount:!0,onChange:function(e,t){a(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Price",name:"".concat(n,".").concat(t,".price"),type:"number",placeholder:"3000",min:0})),w.a.createElement(Va,null,l&&i?w.a.createElement(pe,{name:"".concat(n,".").concat(t,".date"),render:function(t){var n=t.field;return w.a.createElement(F.m,Object.assign({},n,{label:"Date",options:s,searchable:!1,placeholder:"Select a date...",required:!0,value:s.find(function(t){return t.name===e.date}),onChange:function(e,t){a(t,e.name)}}))}}):w.a.createElement(ec,{label:"Date",name:"".concat(n,".").concat(t,".date"),required:!0})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(n,".").concat(t,".comments"),label:"Comments",placeholder:"Any comments regarding service"})),w.a.createElement(Va,{className:"pt-4 border-l text-right"},w.a.createElement(F.e,null,w.a.createElement(F.d,{onClick:function(){return r(e)}},"+ Duplicate"),w.a.createElement(F.d,{onClick:function(){return c(t)}},"\xd7 Remove")))))}),w.a.createElement("div",{className:"mt-4"},w.a.createElement(F.d,{onClick:function(){return r(co.transport_extras[0])}},"+ Add ",t.transport_extras.length?"Another":""," ","Transport Extra Service")))}}),w.a.createElement(he,{onChange:function(e){u(e.values),d.current?e.isSubmitting||ro.validate(e.values).then(Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.setSubmitting(!0),t.abrupt("return",m(e.values,e).then(function(){e.setSubmitting(!1)}));case 4:case"end":return t.stop()}},t)}))).catch(function(){}):d.current=!0}}),w.a.createElement("button",{type:"submit",className:"invisible"},"Get Price"))}})});var io=R.object().shape({other_extras:R.array().of(R.object().shape({service:R.object().typeError("Service field is required").required("Service field is required"),date:R.string(),price:te().positive("Price should be positive"),comments:R.string()}))}),oo={other_extras:[{service:void 0,date:"",price:void 0,comments:""}]},uo=ha(function(e){var t=e.initialValues,a=e.shouldEmptyInitialValues,n=void 0===a||a,r=e.xhr,c=e.onChange,l=e.bookingFrom,i=e.bookingTo,o=t||(n?{other_extras:[]}:oo),u=Object(x.useCallback)(function(e){c&&c(e.other_extras.reduce(function(e,t){return e+parseFloat((t.price?t.price:0).toString())},0),e.other_extras.map(function(e){var t=e.service,a=e.date,n=Object(ue.a)(e,["service","date"]);return Object(H.a)({},n,{date:a?Aa()(a).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"):"",service:t?t.name:void 0})}))},[c]);Object(F.q)(function(){u(o)});var s=Object(x.useMemo)(function(){for(var e=[],t=Aa()(i).diff(Aa()(l),"days"),a=0;a<=t;a++)e.push({id:a,name:Aa()(l).add(a,"day").format("YYYY-MM-DD")});return e},[l,i]),m=Object(x.useCallback)(function(){var e=Object(D.a)(I.a.mark(function e(t,a){var n,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setStatus(),n=[],r={other_extras:[]},t.other_extras.forEach(function(e){var t=e.date,a=e.service,c=Object(ue.a)(e,["date","service"]);a&&(r.other_extras.push(Object(H.a)({},e,{date:Aa()(t).format("YYYY-MM-DD")})),n.push(Object(H.a)({},c,{date:t?Aa()(t).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"):"",service:a?a.name:void 0})))}),e.abrupt("return",function(){var e=Object(D.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({other_extras:t}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(n).then(function(e){r.other_extras=r.other_extras.map(function(t,a){return Object(H.a)({},t,{price:e.other_extras[a].price})}),a.setValues(r),u(r)}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors)}));case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),[r,u]),d=Object(x.useRef)(!0);return w.a.createElement(Y.e,{initialValues:o,validationSchema:io,onSubmit:function(e,t){return m(e,t).then(function(){t.setSubmitting(!1)})},render:function(e){e.isSubmitting;var t=e.values,a=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement(Y.c,{name:"other_extras",render:function(e){var n=e.name,r=e.push,c=e.remove;return w.a.createElement("div",null,t.other_extras.map(function(e,t){return w.a.createElement("div",{key:t,className:"border-gray-300 border-b-4"},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(pe,{name:"".concat(n,".").concat(t,".service"),render:function(e){var t=e.field;return w.a.createElement(dc,Object.assign({},t,{label:"Service",placeholder:"Select or add a service...",required:!0,creatable:!0,fetchOnMount:!0,onChange:function(e,t){a(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Price",name:"".concat(n,".").concat(t,".price"),type:"number",placeholder:"3000",min:0})),w.a.createElement(Va,null,l&&i?w.a.createElement(pe,{name:"".concat(n,".").concat(t,".date"),render:function(t){var n=t.field;return w.a.createElement(F.m,Object.assign({},n,{label:"Date",options:s,searchable:!1,placeholder:"Select a date...",required:!0,value:s.find(function(t){return t.name===e.date}),onChange:function(e,t){a(t,e.name)}}))}}):w.a.createElement(ec,{label:"Date",name:"".concat(n,".").concat(t,".date"),required:!0})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(n,".").concat(t,".comments"),label:"Comments",placeholder:"Any comments regarding service"})),w.a.createElement(Va,{className:"pt-4 border-l text-right"},w.a.createElement(F.e,null,w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return r(e)}},"+ Duplicate"),w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return c(t)}},"\xd7 Remove")))))}),w.a.createElement("div",{className:"mt-4"},w.a.createElement(F.d,{onClick:function(){return r(oo.other_extras[0])}},"+ Add ",t.other_extras.length?"Another":""," Quote Extra Service")))}}),w.a.createElement(he,{onChange:function(e){u(e.values),d.current?e.isSubmitting||io.validate(e.values).then(Object(D.a)(I.a.mark(function t(){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.setSubmitting(!0),t.abrupt("return",m(e.values,e).then(function(){e.setSubmitting(!1)}));case 4:case"end":return t.stop()}},t)}))).catch(function(){}):d.current=!0}}),w.a.createElement("button",{type:"submit",className:"invisible"},"Get Price"))}})});var so=ha(function(e){var t=e.xhr,a=e.navigate,n=e.trip,r=e.location,c=r&&r.state&&r.state.quote,l=Object(x.useState)(0),i=Object(Z.a)(l,2),o=i[0],u=i[1],s=Object(x.useState)(0),m=Object(Z.a)(s,2),d=m[0],f=m[1],p=Object(x.useState)([]),E=Object(Z.a)(p,2),h=E[0],b=E[1],g=Object(x.useState)([]),v=Object(Z.a)(g,2),_=v[0],y=v[1],S=Object(x.useState)(0),O=Object(Z.a)(S,2),j=O[0],N=O[1],C=Object(x.useState)(0),T=Object(Z.a)(C,2),k=T[0],A=T[1],P=Object(x.useState)(0),q=Object(Z.a)(P,2),M=q[0],Y=q[1],R=Object(x.useState)([]),L=Object(Z.a)(R,2),U=L[0],V=L[1],B=Object(x.useState)([]),G=Object(Z.a)(B,2),Q=G[0],W=G[1],K=Object(x.useState)([]),z=Object(Z.a)(K,2),J=z[0],$=z[1],ee=Object(x.useState)(c&&c.comments||""),te=Object(Z.a)(ee,2),ae=te[0],ne=te[1],re=Object(x.useState)(null),ce=Object(Z.a)(re,2),le=ce[0],ie=ce[1],oe=Object(x.useRef)(null),se=Object(x.useCallback)(function(){ie(null),function(e){return{saveQuote:function(){var t=Object(D.a)(I.a.mark(function t(a,n){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/trips/".concat(a,"/quotes"),n).then(function(e){return e.data.quote}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}}(t).saveQuote(n.id,{total_price:o+d+j+k+M,hotels:h,cabs:U,hotel_extras:_,transport_extras:Q,other_extras:J,comments:ae}).then(function(){a&&a("../quotes")}).catch(function(e){ie(e);var t=oe.current;t&&(t.querySelectorAll("[type='submit']").forEach(function(e){return"function"===typeof e.click?e.click():null}),setTimeout(function(){var t=oe.current;if(t){var a=t.querySelectorAll("[class='error-message']");a.length&&(a[0].scrollIntoView?a[0].scrollIntoView({behavior:"smooth",block:"center"}):window.alert(e.message))}},300))})},[t,n,a,ae,h,o,U,d,_,j,Q,k,J,M]),me=Object(x.useCallback)(function(e,t){ie(null),u(e),b(t)},[u,b]),de=Object(x.useCallback)(function(e,t){ie(null),N(e),y(t)},[y,y]),pe=Object(x.useCallback)(function(e,t){ie(null),f(e),V(t)},[f,V]),Ee=Object(x.useCallback)(function(e,t){ie(null),A(e),W(t)},[A,W]),he=Object(x.useCallback)(function(e,t){ie(null),Y(e),$(t)},[Y,$]),be=Object(x.useMemo)(function(){return{hotels:c?{hotels:c.hotels.map(function(e){var t=e.checkin,a=e.checkout,n=e.room_type,r=e.adults_with_extra_bed,c=e.children_with_extra_bed,l=e.children_without_extra_bed,i=e.no_of_rooms,o=Object(ue.a)(e,["checkin","checkout","room_type","adults_with_extra_bed","children_with_extra_bed","children_without_extra_bed","no_of_rooms"]);return Object(H.a)({},o,{start_date:Aa.a.utc(t).local().format("YYYY-MM-DD"),no_of_nights:Aa.a.utc(a).diff(Aa.a.utc(t),"days")+1,edited_given_price:o.calculated_price!==o.given_price,rooms_detail:{room_type:n,adults_with_extra_bed:r,children_with_extra_bed:c,children_without_extra_bed:l,no_of_rooms:i}})})}:void 0,cabs:c?{cabs:c.cabs.map(function(e){var t=e.from_date,a=e.to_date,n=Object(ue.a)(e,["from_date","to_date"]);return Object(H.a)({edited_given_price:n.calculated_price!==n.given_price,start_date:Aa.a.utc(t).local().format("YYYY-MM-DD"),no_of_days:Aa.a.utc(a).diff(Aa.a.utc(t),"days")+1},n)})}:void 0,hotel_extras:c?{hotel_extras:c.hotel_extras.map(function(e){var t=e.given_price,a=e.date,n=Object(ue.a)(e,["given_price","date"]);return Object(H.a)({},n,{price:t,date:a?Aa.a.utc(a).local().format("YYYY-MM-DD"):void 0})})}:void 0,transport_extras:c?{transport_extras:c.transport_extras.map(function(e){var t=e.given_price,a=e.date,n=Object(ue.a)(e,["given_price","date"]);return Object(H.a)({},n,{price:t,date:a?Aa.a.utc(a).local().format("YYYY-MM-DD"):void 0})})}:void 0,other_extras:c?{other_extras:c.other_extras.map(function(e){var t=e.given_price,a=e.date,n=Object(ue.a)(e,["given_price","date"]);return Object(H.a)({},n,{price:t,date:a?Aa.a.utc(a).local().format("YYYY-MM-DD"):void 0})})}:void 0}},[c]),ge=Aa.a.utc(n.start_date).local().format("YYYY-MM-DD HH:mm:ss"),ve=Aa.a.utc(n.end_date).local().format("YYYY-MM-DD HH:mm:ss");return w.a.createElement("div",{className:"pb-8 mt-4",ref:oe},w.a.createElement("h3",{className:"mb-8"},"Create a new quote"),w.a.createElement("section",{className:"mb-16"},w.a.createElement("header",{className:"flex"},w.a.createElement("div",{className:"mr-2"},w.a.createElement("span",{className:"inline-flex w-12 h-12 align-items-center justify-content-center bg-primary-600 text-white rounded-full"},w.a.createElement(F.i.BedIcon,null))),w.a.createElement("div",null,w.a.createElement("h4",null,"Hotels"),w.a.createElement("p",null,"Please fill hotel details and get the respective prices. Update the given price if necessary."))),w.a.createElement("div",{className:"bg-white rounded shadow"},w.a.createElement("div",{className:"mb-8 px-4"},w.a.createElement(ic,{bookingFrom:ge,bookingTo:Aa()(ve).subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),initialValues:be.hotels,onChange:me})),w.a.createElement("hr",null),w.a.createElement("div",{className:"p-4"},w.a.createElement("h5",null,"Any extra services in hotels"),w.a.createElement("p",null,"Add any extra services for hotels e.g. special dinner, honeymoon cake etc."),w.a.createElement(Ec,{bookingFrom:ge,bookingTo:ve,initialValues:be.hotel_extras,onChange:de}))),w.a.createElement("footer",null,w.a.createElement("mark",{className:"inline-block"},"Total price for Accommodation:"," ",X(o+j)))),w.a.createElement("section",{className:"mb-16"},w.a.createElement("header",{className:"flex"},w.a.createElement("div",{className:"mr-2"},w.a.createElement("span",{className:"inline-flex w-12 h-12 align-items-center justify-content-center bg-primary-600 text-white rounded-full"},w.a.createElement(F.i.BusIcon,null))),w.a.createElement("div",null,w.a.createElement("h4",null,"Transportation"),w.a.createElement("p",null,"Please fill the transportation details and click on get price to get the corresponding prices. Update given prices if necessary."))),w.a.createElement("div",{className:"bg-white rounded shadow"},w.a.createElement("div",{className:"mb-8 px-4"},w.a.createElement(to,{bookingFrom:ge,bookingTo:ve,initialValues:be.cabs,onChange:pe})),w.a.createElement("hr",null),w.a.createElement("div",{className:"p-4"},w.a.createElement("h5",null,"Any extra services in transportation"),w.a.createElement("p",null,"Add any extra services like any side destination trip that is provided only per customer request"),w.a.createElement(lo,{bookingFrom:ge,bookingTo:ve,initialValues:be.transport_extras,onChange:Ee}))),w.a.createElement("footer",null,w.a.createElement("mark",{className:"inline-block"},"Total price for Transportation:"," ",X(d+k)))),w.a.createElement("section",{className:"mb-16"},w.a.createElement("header",{className:"flex"},w.a.createElement("div",{className:"mr-2"},w.a.createElement("span",{className:"inline-flex w-12 h-12 align-items-center justify-content-center bg-primary-600 text-white rounded-full"},w.a.createElement(F.i.StarEmptyIcon,null))),w.a.createElement("div",null,w.a.createElement("h4",null,"Any extra service for this trip"),w.a.createElement("p",null,"Add any extra services like off road dinner, side tracking etc that are associated with overall trip package"))),w.a.createElement("div",{className:"bg-white rounded p-4 shadow"},w.a.createElement(uo,{bookingFrom:ge,bookingTo:ve,initialValues:be.other_extras,onChange:he})),w.a.createElement("footer",null,w.a.createElement("mark",{className:"inline-block"},"Extra Stuff Price: ",X(M)))),w.a.createElement(F.h,null,w.a.createElement("label",null,"Any comments for this quote"),w.a.createElement(fe,{name:"comments",as:"textarea",value:ae,onChange:function(e){return ne(e.target.value)},placeholder:"Any comments regarding customer request or anything special about this quote or anything else...",maxLength:191})),w.a.createElement("footer",{className:"mt-16"},w.a.createElement("div",{className:"mb-4"},w.a.createElement("mark",{className:"inline-block font-bold text-2xl"},"Total Cost Price:"," ",X(o+d+j+k+M))),w.a.createElement(F.d,{className:"py-2 text-lg",primary:!0,branded:!0,onClick:se},"Create Quote"),le?w.a.createElement("p",{className:"text-red-700 my-2"},le.message):null))}),mo=ha(function(e){var t=e.type,a=e.itemId,n=e.xhr,r=e.tags,c=void 0===r?[]:r,l=e.onCancel,i=e.onSuccess;return w.a.createElement(Y.e,{initialValues:{items:[a],tags:c},onSubmit:function(e,a){a.setStatus(),li(n,t).storeTags(e.items,e.tags.map(function(e){return e.name})).then(function(){a.setSubmitting(!1),i()}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors),a.setSubmitting(!1)})},render:function(e){var a=e.setFieldValue,n=e.isSubmitting,r=e.status;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Edit Tags"),r?w.a.createElement("p",{className:"error-message"},r):null,w.a.createElement(pe,{name:"tags",render:function(e){var n=e.field;return w.a.createElement(ii,Object.assign({},n,{label:"Select existing or create new tags",type:t,onChange:function(e,t){a(t,e)}}))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",primary:!0,disabled:n},"Save"),w.a.createElement(F.d,{disabled:n,onClick:function(){l()}},"Cancel"))))}})});function fo(e){var t=e.type,a=e.itemId,n=e.users,r=void 0===n?[]:n,c=e.onCancel,l=e.onSuccess,i=ba();return w.a.createElement(Y.e,{initialValues:{items:[a],users:r},onSubmit:function(e,a){a.setStatus(),i.put("/trip-owners",{items:e.items,users:e.users.map(function(e){return e.id}),type:t}).then(function(){a.setSubmitting(!1),l()}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors),a.setSubmitting(!1)})},render:function(e){var t=e.setFieldValue,a=e.isSubmitting,n=e.status;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Edit Owners"),n?w.a.createElement("p",{className:"error-message"},n):null,w.a.createElement(pe,{name:"users",render:function(e){var a=e.field;return w.a.createElement(On,Object.assign({},a,{label:"Select User(s)",onChange:function(e,a){t(a,e)}}))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",primary:!0,disabled:a},"Save"),w.a.createElement(F.d,{disabled:a,onClick:function(){c()}},"Cancel"))))}})}function po(e){var t=e.trip,a=t.customer_payments,n=t.hotel_payments,r=t.cab_payments;return w.a.createElement("section",{className:"bg-white p-4"},a?w.a.createElement(yo,{payments:a}):null,n?w.a.createElement(So,{payments:n}):null,r?w.a.createElement(_o,{payments:r}):null)}function Eo(e){var t=e.dueAmount,a=e.dueDate,n="Due";if(t<=0)n="Paid";else{var r=Aa.a.utc(a).local(),c=Aa()();r.isBefore(c)&&(n="Overdue")}return"Due"===n?null:w.a.createElement(F.b,{className:me()("Paid"===n&&"bg-green-200 text-green-800 border border-green-300","Overdue"===n&&"bg-red-200 text-red-800 border border-red-300")},n)}function ho(e){var t=e.date;return w.a.createElement("span",null,Aa.a.utc(t).local().format("DD MMM, YYYY"))}function bo(e){var t=e.amount;return w.a.createElement("span",null,X(t))}function go(e){var t=e.date,a=e.amount;return w.a.createElement("div",null,w.a.createElement(ho,{date:t}),w.a.createElement("br",null),w.a.createElement(Eo,{dueAmount:a,dueDate:t}))}function vo(e){var t=e.instalment;return w.a.createElement("div",null,t.transactions&&t.transactions.length?w.a.createElement("div",null,t.transactions.map(function(e){return w.a.createElement("div",{key:e.id},Aa.a.utc(e.date).local().format("DD MMM, YYYY [at] hh:mm A")," - ",X(e.amount)," /-",e.comments?w.a.createElement("blockquote",null,e.comments):null)})):w.a.createElement("p",null,"Nothing yet"),t.due_amount>0?w.a.createElement(Oo,{instalment:t}):null)}function _o(e){var t=e.payments;return t&&t.length?w.a.createElement(F.n,{caption:"Payments for Transportation",headers:["Transportation","Due Date","Due","Total","Paid","Transactions"],striped:!1,bordered:!0,autoWidth:!0},w.a.createElement("tbody",null,t.map(function(e){var t=e.paymentable.cab_type,a=e.paymentable.transport_service;return w.a.createElement(x.Fragment,{key:e.id},e.instalments.map(function(e,n,r){return w.a.createElement("tr",{key:e.id},0===n?w.a.createElement("td",{rowSpan:r.length,className:"vertical-align-middle"},w.a.createElement("b",null,a.name),w.a.createElement("br",null),w.a.createElement("small",null,t.name)):null,w.a.createElement("td",null,w.a.createElement(go,{date:e.due_date,amount:e.due_amount})),w.a.createElement("td",null,w.a.createElement(bo,{amount:e.due_amount})),w.a.createElement("td",null,w.a.createElement(bo,{amount:e.amount})),w.a.createElement("td",null,w.a.createElement(bo,{amount:e.paid_amount})),w.a.createElement("td",null,w.a.createElement(vo,{instalment:e})))}))}))):null}function yo(e){var t=e.payments;return t&&t.length?w.a.createElement(F.n,{autoWidth:!0,caption:"Payments towards customer",headers:["Due Date","Due","Total","Paid","Transactions"],alignCols:{2:"right",3:"right"},bordered:!0,rows:t.reduce(function(e,t){return e.concat(t.instalments)},[]).map(function(e){return[w.a.createElement(go,{date:e.due_date,amount:e.due_amount}),w.a.createElement(bo,{amount:e.due_amount}),w.a.createElement(bo,{amount:e.amount}),w.a.createElement(bo,{amount:e.paid_amount}),w.a.createElement(vo,{instalment:e})]})}):null}function So(e){var t=e.payments;return t&&t.length?w.a.createElement(F.n,{caption:"Payments for accomodation",headers:["Hotel","Due Date","Due Amount","Total Amount","Paid Amount","Transactions"],striped:!1,bordered:!0,autoWidth:!0},w.a.createElement("tbody",null,t.map(function(e){var t=e.paymentable.hotel;return w.a.createElement(x.Fragment,{key:e.id},e.instalments.map(function(e,a,n){return w.a.createElement("tr",{key:e.id},0===a?w.a.createElement("td",{rowSpan:n.length,className:"vertical-align-middle"},w.a.createElement("b",null,t.name),w.a.createElement("br",null),w.a.createElement("small",null,t.location.short_name,", ",t.stars," Star")):null,w.a.createElement("td",null,w.a.createElement(go,{date:e.due_date,amount:e.due_amount})),w.a.createElement("td",null,w.a.createElement(bo,{amount:e.due_amount})),w.a.createElement("td",null,w.a.createElement(bo,{amount:e.amount})),w.a.createElement("td",null,w.a.createElement(bo,{amount:e.amount})),w.a.createElement("td",null,w.a.createElement(vo,{instalment:e})))}))}))):null}var Oo=ha(function(e){var t=e.instalment,a=e.xhr,n=Object(F.p)(),r=Object(Z.a)(n,3),c=r[0],l=r[1],i=r[2];return w.a.createElement(w.a.Fragment,null,w.a.createElement(F.d,{onClick:l},"Add"),w.a.createElement(F.f,{open:c,onClose:i},w.a.createElement(F.f.Header,{closeButton:!0},w.a.createElement(F.f.Title,null,"Log Transaction")),w.a.createElement(F.f.Body,null,w.a.createElement("p",null,w.a.createElement("mark",null,"INR ",X(t.due_amount))," is due by",w.a.createElement("mark",null,Aa.a.utc(t.due_date).local().format("DD MMM, YYYY"))),w.a.createElement(Y.e,{initialValues:{amount:t.due_amount,payment_mode:"netbanking",comments:""},onSubmit:function(e,n){var r=e.amount,c=e.comments,l=e.payment_mode;n.setStatus(),function(e){return{logTransaction:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/payment-transactions",a).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(a).logTransaction({instalment_id:t.id,amount:r,payment_mode:l,comments:c}).then(function(){n.setSubmitting(!1),window.location=window.location}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("p",{className:"error"},a):null,w.a.createElement(Ee,{name:"amount",label:"Paid Amount (INR)",required:!0}),w.a.createElement(Ee,{as:"select",name:"payment_mode",label:"Payment Mode",required:!0},w.a.createElement("option",{value:"cash"},"Cash"),w.a.createElement("option",{value:"netbanking"},"Netbanking"),w.a.createElement("option",{value:"upi"},"UPI"),w.a.createElement("option",{value:"others"},"Others")),w.a.createElement(Ee,{name:"comments",as:"textarea",label:"Comments",placeholder:"Any comments consisting reference id or payment details"}),w.a.createElement(F.f.Footer,null,w.a.createElement(F.d,{disabled:t,type:"submit"},"Update"),w.a.createElement(F.d,{onClick:i},"Cancel")))}}))))});var jo=R.object().shape({instalments:R.array().of(R.object().shape({due_date:R.string().required("Instalment due date is required"),amount:R.number().positive("Instalment amount should a positive number").required("Instalment amount is required"),percentage:R.number().positive("Percentage should be a positive number").required("Percentage field is required")})).min(1,"Atleast one instalment should is required"),comments:R.string(),details_verified:R.boolean().required("Please verify the details before conversion")}).required("Conversion fields are required");function xo(e){var t=e.trip,a=e.isConvertVisible,n=e.hideConvert,r=e.onConvert,c=t.id,l=t.locations,i=t.latest_given_quote,o=t.start_date,u=t.end_date,s=t.no_of_adults,m=t.children,d=ba(),f=Object(F.r)(Object(D.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",Promise.reject("No given quote for the trip"));case 2:return e.abrupt("return",vi(d).getInstalments(i.id).then(function(e){return e.data}));case 3:case"end":return e.stop()}},e)})),{isFetching:!0}),p=Object(Z.a)(f,3),E=p[0],h=p[1],b=p[2].isFetching;return Object(x.useEffect)(function(){a&&h()},[a]),i?w.a.createElement(F.f,{open:a,onClose:n},w.a.createElement(F.f.Header,null,w.a.createElement(F.f.Title,null,"Trip Conversion")),w.a.createElement(F.f.Body,null,b?w.a.createElement(rn,null):w.a.createElement(Y.e,{initialValues:{comments:"",details_verified:!1,instalments:(E||[]).map(function(e){var t=e.amount,a=e.due_date;return{amount:parseFloat(t.toFixed(2)),due_date:Aa.a.utc(a).local().format("YYYY-MM-DD"),percentage:parseFloat((100*t/i.given_price).toFixed(2))}})},validationSchema:jo,onSubmit:function(e,t){var a=e.details_verified,l=e.instalments,o=e.comments,u=i.given_price;if(t.setStatus(),!a)return t.setStatus("Please verify the details and select the checkbox when done."),void t.setSubmitting(!1);var s=l.reduce(function(e,t){return e+t.amount},0);if(s<u)return t.setStatus("Instalments doesn't sumup(Rs: ".concat(s," /-) with given quote's price (Rs: ").concat(u,") /-")),void t.setSubmitting(!1);window.confirm("".concat(s>u?"Total instalment is greater then given quote's amount. ":"","Are you sure you want to mark this trip as converted ?"))?r({instalments:l.map(function(e){e.percentage;return Object(ue.a)(e,["percentage"])}),comments:o,trip_id:c}).then(function(){t.setSubmitting(!1),n()}).catch(function(e){return t.setStatus(e.message),e.formikErrors&&t.setErrors(e.formikErrors),t.setSubmitting(!1),Promise.reject(e)}):t.setSubmitting(!1)},render:function(e){var t=e.isSubmitting,a=e.values,r=e.setFieldValue,c=e.status;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,w.a.createElement("b",null,"Please verify following details with the customer")),w.a.createElement("p",null,w.a.createElement("b",null,"Trip to"," ",w.a.createElement("mark",null,l.map(function(e){return e.short_name}).join(", "))," ","from"," ",w.a.createElement("mark",null,Aa.a.utc(o).local().format("DD MMM, YYYY"))," ","to"," ",w.a.createElement("mark",null,Aa.a.utc(u).local().format("DD MMM, YYYY"))," ","with"," ",w.a.createElement("mark",null,s," Adults",m?" and ".concat(m," children"):"")," ","where the package cost is"," ",w.a.createElement("mark",null,w.a.createElement(F.i.RupeeIcon,null)," ",X(i.given_price)," /-"),".")),w.a.createElement("h5",null,"Given Quote Details"),w.a.createElement("hr",null),w.a.createElement("h6",null,"Given Price:"," ",w.a.createElement("mark",null,w.a.createElement(F.i.RupeeIcon,null)," ",X(i.given_price)," /-")),w.a.createElement("blockquote",null,i.comments?w.a.createElement("p",null,i.comments):null,w.a.createElement("em",null,"on"," ",Aa.a.utc(i.created_at).local().format("DD MMM, YYYY [at] hh:mm A")," ","by ",i.created_by.name,"<",i.created_by.email,">")),w.a.createElement(bi,{quote:i.quote,readOnly:!0})),w.a.createElement("hr",null),w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Customer Instalments"),w.a.createElement(Y.c,{name:"instalments",render:function(e){var t=e.name,n=e.push,c=e.remove;return w.a.createElement(w.a.Fragment,null,w.a.createElement("ul",{className:"list"},a.instalments.map(function(e,a,l){return w.a.createElement("li",{key:a},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(t,".").concat(a,".due_date"),label:"Date",type:"date"})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Percentage",name:"".concat(t,".").concat(a,".percentage"),onChange:function(e){r("".concat(t,".").concat(a,".amount"),i.given_price*parseFloat(e.currentTarget.value||"0")/100),r(e.currentTarget.name,e.currentTarget.value)},type:"number"})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Amount",name:"".concat(t,".").concat(a,".amount"),onChange:function(e){r("".concat(t,".").concat(a,".percentage"),100*parseFloat(e.currentTarget.value||"0")/i.given_price),r(e.currentTarget.name,e.currentTarget.value)},type:"number"})),w.a.createElement(Va,{className:"d-flex align-items-center"},w.a.createElement("div",{className:"button-group"},w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return n(e)}},"+ Duplicate"),l.length>1?w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return c(a)}},"\xd7 Remove"):null))))})),w.a.createElement("footer",null,w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){var e=Math.max(100-a.instalments.reduce(function(e,t){return e+t.percentage},0),0);n({due_date:"",amount:i.given_price*e/100,percentage:e})}},"+ Add More Instalments")))}})),w.a.createElement(Ee,{name:"comments",label:"Comments",as:"textarea",placeholder:"Any comments regarding verification or prices etc.."}),w.a.createElement(Ee,{name:"details_verified",type:"checkbox",label:"Verified travel details with customer ?"}),c?w.a.createElement("p",{className:"error"},c):null,w.a.createElement(F.f.Footer,null,w.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Mark as converted"),w.a.createElement(F.d,{onClick:n},"Cancel")))}}))):null}var wo=function(e){var t=e.trip,a=ba(),n=Object(F.p)(),r=Object(Z.a)(n,3),c=r[0],l=r[1],i=r[2],o=t.latest_given_quote,u=t.converted_at;return o?w.a.createElement("div",{className:"p-4 bg-white rounded-b"},w.a.createElement("h4",{className:"mb-4 pb-2 text-gray-600 border-b"},u?"Quote used for conversion":"Latest Given Quote"),w.a.createElement(_i,{givenQuote:o,readOnly:!!u,showHotelBookingStatus:!!u}),w.a.createElement(xo,{trip:t,isConvertVisible:c,hideConvert:i,onConvert:function(e){return function(e){return{convertTrip:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/converted-trips",a).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}(a).convertTrip(e)}}),u?null:w.a.createElement("footer",null,w.a.createElement(F.d,{onClick:l,primary:!0},"Mark as converted"))):null},No="HOTEL_BOOKING_STAGES_STATE",Co={isFetching:!0,state:za()},To={list:Object(L.createAsyncAction)("@HOTEL_BOOKING_STAGES/LIST_FETCH_REQUEST","@HOTEL_BOOKING_STAGES/LIST_FETCH_SUCCESS","@HOTEL_BOOKING_STAGES/LIST_FETCH_FAILED")()},ko=$a(Co,To);function Ao(e){var t=e[No];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Po(e){return{getHotelBookingStages:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/hotel-booking-stages",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var qo=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(To.list.request()),t.abrupt("return",Po(c).getHotelBookingStages(e).then(function(e){var t=e.data,n=e.meta;return a(To.list.success({data:t,meta:n})),t}).catch(function(e){return a(To.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Fo(){var e=ee();return Object(x.useCallback)(function(t){return e(qo(t))},[e])}function Mo(){return Object(H.a)({},Object(T.c)(function(e){var t=Ao(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,hotelBookingStages:t.get()})}),{fetchHotelBookingStages:Fo()})}function Io(e){var t=Mo(),a=t.hotelBookingStages,n=t.total,r=t.from,c=t.to,l=t.isFetching,i=t.currentPage,o=t.lastPage,u=t.fetchHotelBookingStages,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:i})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Hotel Booking Stages")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,from:r,to:c,currentPage:i,lastPage:o,isFetching:l,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{total:n,isFetching:l},w.a.createElement(F.n,{bordered:!0,striped:!0,headers:["Name","Description"],rows:a.map(function(e){return[e.name,e.description]})})))}var Do=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return Po(t).getHotelBookingStages({q:e}).then(function(e){return e.data})}}))}),Yo=R.object().shape({name:R.string().required("Name field is required"),description:R.string().required("Description field is required")}),Ro={name:"",description:""};var Ho=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Hotel Booking Stage")),w.a.createElement(Y.e,{initialValues:Ro,validationSchema:Yo,onSubmit:function(e,n){n.setStatus(),t.post("/hotel-booking-stages",e).then(function(){a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Hotel Booking Stage"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Booked",required:!0})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Description",name:"description",placeholder:"Hotel Booked",required:!0}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save Booking Stage"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Lo(e){return w.a.createElement(ie,null,w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("h2",{className:"white-space-pre"},"Hotel Booking Stages")),w.a.createElement(Va,{className:"d-flex align-items-center justify-content-end"},w.a.createElement(q.a,{to:"new",className:"btn branded"},"New Hotel Booking Stage"))),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Ho,{path:"/new"}),w.a.createElement(Io,{path:"/"})))}var Uo=R.object().shape({stage:R.object().required("Stage field is required").typeError("Stage field is required")});function Vo(e){var t=e.quoteHotels,a=ba(),n=t[0].latest_booking_stage,r=Object(x.useState)(!1),c=Object(Z.a)(r,2),l=c[0],i=c[1];return l?w.a.createElement("div",{className:"text-left"},w.a.createElement(Y.e,{initialValues:{stage:n},validationSchema:Uo,onSubmit:function(e,n){if(!e.stage)return n.setStatus("Stage field is required"),void n.setSubmitting(!1);n.setStatus(!1),function(e){return{changeHotelBookingStage:function(){var t=Object(D.a)(I.a.mark(function t(a,n){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.patch("/quote-hotel-booking-stages",{items:a,stage:n}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}}(a).changeHotelBookingStage(t.map(function(e){return e.id}),e.stage.id).then(function(){window.location=window.location}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Change Booking Stage"),w.a.createElement(pe,{name:"stage",render:function(e){var t=e.field;return w.a.createElement(Do,Object.assign({},t,{label:"Select the booking stage",multiple:!1,fetchOnMount:!0,onChange:function(e,t){return a(t,e)}}))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{disabled:t,primary:!0,type:"submit"},"Save"),w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return i(!1)}},"Cancel"))))}})):w.a.createElement("div",null,w.a.createElement("div",{className:"flex items-center"},w.a.createElement("h4",null,n?n.name:"Pending"),w.a.createElement("button",{className:"ml-2",onClick:function(){return i(!0)}},"\u270e")),n?w.a.createElement("div",{className:"text-sm text-gray-600"},ae("by ".concat(n.pivot.created_by.name),Aa.a.utc(n.pivot.created_at).local().fromNow())):null)}function Bo(e){if(!e)return[];var t=e.quote.hotels.reduce(function(e,t){var a=t.hotel;return e[a.id]||(e[a.id]=[]),e[a.id].push(t),e},{});return Object.keys(t).reduce(function(e,a){return e.push(t[a]),e},[])}function Go(e){var t=e.quoteHotels,a=e.trip,n=le().user;if(!t.length||!n)return null;var r=t[0][0].hotel,c=t.reduce(function(e,t){return e+Number(t.reduce(function(e,t){return e+Number(t.given_price)},0))},0),l=n.tenant;return w.a.createElement(pi,{initialState:!1},function(e){var n=e.state,i=e.setState;return w.a.createElement(x.Fragment,null,w.a.createElement(F.d,{onClick:function(){return i(!0)}},"Compose Email"),w.a.createElement(F.f,{open:n,onClose:function(){return i(!1)}},w.a.createElement(F.f.Header,{closeButton:!0},w.a.createElement("h4",{className:"mb-2 font-semibold"},r.name),w.a.createElement("div",{className:"text-sm text-gray-600"},ae(r.location.short_name,"".concat(r.stars," Star")))),w.a.createElement(F.f.Body,null,w.a.createElement("p",{className:"mb-4 text-gray-600 text-sm"},"Copy this email content to your composer and edit any information before send"),w.a.createElement("div",null,w.a.createElement(F.d,{primary:!0,className:"float-right",onClick:function(){!function(e){try{var t,a=Object(F.o)();if(!a||!window)throw new Error("HTMLDOM and Window must be in context for selection to work");if(!(t="string"===typeof e?a.querySelector(e):e))throw new Error("Node not found");var n=a.createRange();n.selectNode(t);var r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(n),a.execCommand("copy"))}catch(c){console.error(c),window.alert("Please press Ctrl/Cmd+C to copy")}}("#hotel_email")}},"Copy to Clipboard")),w.a.createElement("div",{id:"hotel_email",className:"p-2 border rounded",style:{fontFamily:"Verdana, sans-serif",fontWeight:"normal",fontSize:"small"}},w.a.createElement("div",null,"Dear Sir/Mam,"),w.a.createElement("br",null),l?w.a.createElement(x.Fragment,null,w.a.createElement("div",null,"Greetings from ",l.name,"."),w.a.createElement("br",null)):null,w.a.createElement("div",null,"We are pleased to inform you that we have a new booking with the following details:"),w.a.createElement("br",null),w.a.createElement("div",{style:{marginBottom:"10px"}},w.a.createElement("small",null,"Hotel")),w.a.createElement("div",null,w.a.createElement("b",null,r.name,", ",r.location.short_name," (",r.stars," ","Star)")),w.a.createElement("br",null),w.a.createElement("div",{style:{marginBottom:"10px"}},w.a.createElement("small",null,"Guest Details")),w.a.createElement("div",null,w.a.createElement("b",null,a.contacts.map(function(e){return e.name}).join(", "))),w.a.createElement("div",null,w.a.createElement("b",null,a.no_of_adults," Adults",a.children?", ".concat(a.children," children"):"")),w.a.createElement("br",null),w.a.createElement("div",{style:{marginBottom:"10px"}},w.a.createElement("small",null,"Room Details")),w.a.createElement("ul",{style:{listStyle:"circle",paddingLeft:"20px"}},t.map(function(e){if(!e.length)return null;var t=e[0],a=Aa.a.utc(t.checkin).local(),n=Aa.a.utc(t.checkout).local().diff(a,"days")+1,r=a.format("Do MMM, YYYY"),c=e.reduce(function(e,t){return e+Number(t.given_price)},0);return w.a.createElement("li",{key:"".concat(t.id,"-").concat(r),style:{marginBottom:"10px"}},w.a.createElement("div",null,w.a.createElement("b",null,r," -"," ",Yl()("Night",n,!0),"  (INR ",X(c)," /-)")),e.map(function(e,t){var a=e.meal_plan,n=e.room_type,c=e.no_of_rooms,l=e.adults_with_extra_bed,i=e.children_with_extra_bed,o=e.children_without_extra_bed;return w.a.createElement("div",{key:"".concat(e.id,"-").concat(r,"-").concat(t)},w.a.createElement("b",null,a.name," - ",c," ",n.name),l||i||o?w.a.createElement("small",null," ","(",[l?"".concat(Yl()("Adult",l,!0)," with EB"):void 0,i?"".concat(Yl()("Child",i,!0)," with EB"):void 0,o?"".concat(Yl()("Child",o,!0)," without EB"):void 0].filter(function(e){return e}).join(", "),")"):null)}))})),w.a.createElement("br",null),w.a.createElement("div",null,w.a.createElement("span",null,"Total Price:")," ",w.a.createElement("b",null,"INR ",X(c)," /-")),w.a.createElement("br",null),w.a.createElement("div",null,w.a.createElement("strong",null,"Please confirm this booking.")))),w.a.createElement(F.f.Footer,null,w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return i(!1)}},"Close"))))})}function Qo(e){var t=e.hotel,a=e.quoteId,n=e.isBooked;return w.a.createElement(pi,{initialState:!1},function(e){var r=e.state,c=e.setState;return w.a.createElement(x.Fragment,null,w.a.createElement(F.d,{onClick:function(){return c(!0)},branded:n},"Generate Voucher"),w.a.createElement(F.f,{open:r,onClose:function(){return c(!1)}},w.a.createElement(Y.e,{initialValues:{hotel_confirmation_number:"",voucher_number:""},onSubmit:function(){},render:function(e){var n=e.values;return w.a.createElement(x.Fragment,null,w.a.createElement(F.f.Header,{closeButton:!0},w.a.createElement(F.f.Title,null,"Generate Voucher for ",t.name)),w.a.createElement(F.f.Body,null,w.a.createElement(Ee,{type:"text",name:"hotel_confirmation_number",label:"Hotel Confirmation Number (optional)",placeholder:"TSK123"}),w.a.createElement(Ee,{type:"text",name:"voucher_number",label:"Voucher Number (optional)",placeholder:"6525"})),w.a.createElement(F.f.Footer,null,w.a.createElement(ga,{href:"/hotel-voucher-pdf",query:{hotel:t.id,to:(new Date).getTimezoneOffset(),quote:a,hcn:n.hotel_confirmation_number,vn:n.voucher_number},target:"_blank",className:"btn btn-primary"},"Generate Voucher")," ",w.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return c(!1)}},"Close")))}})))})}function Zo(e){var t=e.trip,a=t.latest_given_quote,n=Bl(t),r=Object(x.useMemo)(function(){return a?Bo(a):[]},[a]);return n&&a?w.a.createElement("div",{className:"rounded-b bg-white"},r.map(function(e){if(!e.length)return null;var n=e[0],r=n.hotel,c=e.reduce(function(e,t){return e+Number(t.given_price)},0),l=function(e){var t=e.reduce(function(e,t){var a=t.checkin,n=t.checkout;return e["".concat(a,"-").concat(n)]||(e["".concat(a,"-").concat(n)]=[]),e["".concat(a,"-").concat(n)].push(t),e},{});return Object.keys(t).reduce(function(e,a){return e.push(t[a]),e},[])}(e);return w.a.createElement("div",{key:r.id,className:"p-4 border-b"},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("div",{className:"mb-4"},w.a.createElement("h4",{className:"mb-2 font-semibold"},r.name),w.a.createElement("div",{className:"text-sm text-gray-600"},ae(r.location.short_name,"".concat(r.stars," Star"))),w.a.createElement("div",{className:"mt-2"},w.a.createElement(F.b,null,w.a.createElement(F.i.RupeeIcon,null)," ",X(c)))),w.a.createElement("div",{className:"mb-4"},w.a.createElement(Vo,{quoteHotels:e})),w.a.createElement("div",{className:"btn-group"},w.a.createElement(Go,{quoteHotels:l,trip:t}),w.a.createElement(Qo,{hotel:r,quoteId:a.quote.id,isBooked:!!n.booked_at}))),w.a.createElement(Va,null,w.a.createElement("div",null,w.a.createElement(F.n,{striped:!0,bordered:!0,responsive:!0,headers:["Date","Meal Plan and Rooms","Given Price"],alignCols:{2:"right"},rows:l.map(function(e){if(!e.length)return[];var t=e[0],a=Aa.a.utc(t.checkin).local(),n=Aa.a.utc(t.checkout).local().diff(a,"days")+1,r=a.format("Do MMM, YYYY"),c=e.reduce(function(e,t){return e+Number(t.given_price)},0);return[w.a.createElement("span",{className:"whitespace-pre"},r,w.a.createElement("br",null),w.a.createElement("small",null,Yl()("Night",n,!0))),w.a.createElement("div",null,e.map(function(e,t){var a=e.meal_plan,n=e.room_type,c=e.no_of_rooms,l=e.comments,i=e.given_price,o=e.adults_with_extra_bed,u=e.children_with_extra_bed,s=e.children_without_extra_bed;return w.a.createElement("div",{key:"".concat(e.id,"-").concat(r,"-").concat(t)},w.a.createElement("div",null,ae(a.name,"".concat(c," ").concat(n.name),[!!o,"".concat(o," AWEB")],[!!u,"".concat(u," CWEB")],[!!s,"".concat(s," CWoEB")])," ","(",X(i),")"),l?w.a.createElement("blockquote",null,l):null)})),X(c)]})})))))})):w.a.createElement("div",null,"Trip not converted Yet")}function Wo(e){return{getTrip:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trips/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),convertTrip:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/converted-trips",a).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),changeTripStage:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.put("/trip-active-stages",a).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Ko=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Ll.item.request()),t.abrupt("return",Wo(c).getTrip(e).then(function(e){return a(Ll.item.success(e)),e}).catch(function(e){return a(Ll.item.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function zo(e){var t=e.trip,a=t.trip_id,n=t.id;return w.a.createElement("nav",{className:"flex items-center mb-2"},w.a.createElement(q.a,{to:"/",className:"text-gray-600"},"Home"),w.a.createElement(F.i.ChevronDownIcon,{className:"rotate-270 text-gray-500 text-sm"}),w.a.createElement(q.a,{to:"/trips",className:"text-gray-600"},"Trips"),w.a.createElement(F.i.ChevronDownIcon,{className:"rotate-270 text-gray-500 text-sm"}),w.a.createElement(q.a,{to:"/trips/".concat(n),className:"text-gray-500"},a))}function Jo(e){var t=e.trip,a=Na().hasPermission,n=ba(),r=t.id,c=t.locations,l=t.no_of_adults,i=t.children,o=t.trip_source,u=t.trip_id,s=t.contacts,m=t.tags,d=t.latest_stage,f=t.created_by,p=t.created_at,E=t.latest_given_quote,h=t.sales_team,b=void 0===h?[]:h,g=t.operations_team,v=void 0===g?[]:g,_=Aa.a.utc(t.start_date).local(),y=Aa.a.utc(t.end_date).local().diff(Aa.a.utc(_),"days");return w.a.createElement("section",null,w.a.createElement("header",{className:"px-4 py-2 rounded-t bg-white"},w.a.createElement(Ua,null,w.a.createElement(Va,{className:"my-2"},w.a.createElement("h3",{className:"text-2xl m-0"},c.map(function(e){return e.short_name}),E?w.a.createElement("span",{className:"ml-1"},"(",E.locations.map(function(e){return e.short_name}).join("-"),")"):null),w.a.createElement("div",{className:"text-sm text-gray-600"},u||r,"-",o.short_name),w.a.createElement("div",{className:"mt-2"},w.a.createElement("div",{className:"flex items-center py-1"},w.a.createElement(F.i.CalendarIcon,{className:"mr-2"}),w.a.createElement("div",{className:"whitespace-pre"},ae(_.format("DD MMM, YYYY"),"".concat(Yl()("Night",y,!0),", ").concat(Yl()("Day",y+1,!0))))),w.a.createElement("div",{className:"flex items-center py-1"},w.a.createElement(F.i.UsersIcon,{className:"mr-2"}),w.a.createElement("div",null,Yl()("Adult",l,!0),i?w.a.createElement("span",null," with ",i," Children"):"")))),w.a.createElement(Va,{className:"my-2"},w.a.createElement("div",{className:"mb-1 uppercase text-gray-600 font-bold text-sm tracking-wide"},"Guest"),w.a.createElement("div",null,s.map(function(e){return w.a.createElement("div",{key:e.id},w.a.createElement("div",{className:"mb-1"},e.name),w.a.createElement("div",{className:"text-sm"},e.phone_number?w.a.createElement("div",null,w.a.createElement("a",{href:"tel:".concat(e.phone_number),className:"text-gray-600"},e.phone_number)):null,e.email?w.a.createElement("div",null,w.a.createElement("a",{href:"mailto:".concat(e.email),className:"text-gray-600"},e.email)):null))}))),w.a.createElement(Va,{className:"my-2"},w.a.createElement(pi,{initialState:!1},function(e){var t=e.state,a=e.setState;return w.a.createElement("div",null,t?null:w.a.createElement("header",null,w.a.createElement("div",{className:"mb-1 uppercase text-gray-600 font-bold text-sm tracking-wide"},"Stage",w.a.createElement("button",{onClick:function(){return a(!0)},className:"ml-2"},w.a.createElement("span",{className:"rotate-90 inline-block"},"\u270e")))),t?w.a.createElement(Y.e,{initialValues:{stage:d},onSubmit:function(e,t){var c=e.stage;Wo(n).changeTripStage({trips:[r],stage:c?c.id:null}).then(function(){t.setSubmitting(!1),a(!1)}).catch(function(e){return t.setStatus(e.message),e.formikErrors&&t.setErrors(e.formikErrors),t.setSubmitting(!1),Promise.reject(e)})},render:function(e){var t=e.setFieldValue,n=e.isSubmitting,r=e.status;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Edit Trip Stage"),r?w.a.createElement("p",{className:"text-red-700 mb-2"},r):null,w.a.createElement(pe,{name:"stage",render:function(e){var a=e.field;return w.a.createElement(ti,Object.assign({},a,{label:"Select next stage for the trip*",fetchOnMount:!0,multiple:!1,onChange:function(e,a){return t(a,e)}}))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{disabled:n,type:"submit",primary:!0},"Update")," ",w.a.createElement(F.d,{disabled:n,onClick:function(){return a(!1)}},"Cancel"))))}}):w.a.createElement("div",null,w.a.createElement("div",{className:"mb-1"},d?d.name:"Initiated"),w.a.createElement("div",{className:"text-sm text-gray-600"},w.a.createElement("div",null,"by"," ",d?d.pivot.created_by.name:f.name),w.a.createElement("div",null,Aa.a.utc(d?d.pivot.created_at:p).local().fromNow()))))})),w.a.createElement(Va,{className:"my-2"},w.a.createElement(pi,{initialState:!1},function(e){var a=e.state,n=e.setState;return w.a.createElement("div",null,a?null:w.a.createElement("header",{className:"mb-2"},w.a.createElement("div",{className:"mb-1 uppercase text-gray-600 font-bold text-sm tracking-wide"},"Tags",w.a.createElement("button",{className:"ml-2",onClick:function(){n(!0)}},w.a.createElement("span",{className:"rotate-90 inline-block"},"\u270e")))),a?w.a.createElement(mo,{type:"trip",tags:m,itemId:t.id,onSuccess:function(){n(!1)},onCancel:function(){n(!1)}}):w.a.createElement("div",null,m&&m.length?w.a.createElement(F.c,{style:{marginLeft:"-5px"}},m.map(function(e){return w.a.createElement(F.b,{key:e.id},e.name)})):w.a.createElement("div",{className:"text-gray-600 text-sm",title:"Tag trips to quickly indentify and group trips"},"No Tags")))})))),w.a.createElement("footer",{className:"px-4 py-2 text-sm bg-gray-200 rounded-b"},w.a.createElement(Ua,null,w.a.createElement(Va,{className:"py-1"},w.a.createElement("div",{className:"flex items-center"},w.a.createElement("span",{className:"text-gray-600"},"Sales Team: "),w.a.createElement("div",{className:"ml-2"},w.a.createElement("div",{className:"flex items-center"},w.a.createElement("span",null,b.map(function(e){return e.name})),a(wa.MANAGE_TRIP_OWNERS)?w.a.createElement(pi,{initialState:!1},function(e){var a=e.state,n=e.setState;return w.a.createElement("div",{className:"ml-2"},a?null:w.a.createElement("button",{className:"text-sm",onClick:function(){n(!0)}},w.a.createElement("span",{className:"rotate-90 inline-block mr-1"},"\u270e")),a?w.a.createElement(fo,{type:"sales_team",users:b,itemId:t.id,onSuccess:function(){n(!1)},onCancel:function(){n(!1)}}):null)}):null)))),w.a.createElement(Va,{className:"py-1"},w.a.createElement("div",{className:"flex items-center"},w.a.createElement("span",{className:"text-gray-600"},"Operations Team: "),w.a.createElement("div",{className:"ml-2"},w.a.createElement("div",{className:"flex items-center"},w.a.createElement("span",null,v.map(function(e){return e.name})),a(wa.MANAGE_TRIP_OWNERS)?w.a.createElement(pi,{initialState:!1},function(e){var a=e.state,n=e.setState;return w.a.createElement("div",{className:"ml-2"},a?null:w.a.createElement("button",{className:"text-sm",onClick:function(){n(!0)}},w.a.createElement("span",{className:"rotate-90 inline-block mr-1"},"\u270e")),a?w.a.createElement(fo,{type:"operations_team",users:v,itemId:t.id,onSuccess:function(){n(!1)},onCancel:function(){n(!1)}}):null)}):null)))))))}function $o(e){var t=e.trip,a=t.activity_logs;return w.a.createElement("div",{className:"p-4 bg-white rounded-b"},a&&t.total_quotes?w.a.createElement("div",null,w.a.createElement("h5",null,"Activities"),w.a.createElement("ol",{className:"list-disc pl-4"},a.map(function(e){return w.a.createElement("li",{key:e.id,className:"py-2"},w.a.createElement("span",null,e.description)," ",w.a.createElement("br",null),e.causer?w.a.createElement("small",{className:"text-gray-600"}," ","by ",e.causer.name," \u2022"," ",Aa.a.utc(e.created_at).local().fromNow()):null)}))):null)}function Xo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){return Object(T.c)(function(t){var a=Vl(t);return{isFetching:a.isFetching,trip:a.getItem(e)}})}(e),n=function(){var e=ee();return Object(x.useCallback)(function(t){return e(Ko(t))},[e])}();return Object(x.useEffect)(function(){t&&e&&n(e)},[t,e,n]),Object(H.a)({},a,{fetchTrip:n})}function eu(e){var t=e.tripId,a=e.navigate,n=Xo(t,!0),r=n.trip,c=n.isFetching;if(!t)return a&&a(".."),null;if(c)return w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null));if(!r)return null;var l=r.locations,i=r.latest_given_quote,o=r.trip_id,u=r.trip_source;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"".concat(l.map(function(e){return e.short_name})," (").concat(i?i.locations.map(function(e){return e.short_name}).join("-"):"",") | ").concat(o,"-").concat(u.short_name))),w.a.createElement("div",{className:"mb-16"},w.a.createElement(zo,{trip:r}),w.a.createElement(Jo,{trip:r})),r.total_quotes?w.a.createElement("ul",{className:"tabs bg-gray-200 border-b border-gray-400"},r.converted_at?w.a.createElement(Ta,{to:"hotel-bookings"},"Hotel Bookings"):null,r.converted_at?w.a.createElement(Ta,{to:"payments"},"Payments"):null,w.a.createElement(Ta,{to:""},"Latest Given Quote"),r.latest_given_quote?w.a.createElement(Ta,{to:"given-quotes"},"Given Quotes"):null,r.total_quotes&&!r.converted_at?w.a.createElement(Ta,{to:"quotes"},"Quotes"):null,r.converted_at?null:w.a.createElement(Ta,{to:"new-quote"},"New Quote"),w.a.createElement(Ta,{to:"activities"},"Activities")):w.a.createElement("div",{className:"my-4 text-center"},w.a.createElement(q.a,{to:"new-quote",className:"btn btn-primary px-3 py-2 text-lg"},"Create Quote")),w.a.createElement(q.e,null,w.a.createElement(wo,{path:"/",trip:r}),w.a.createElement(yi,{path:"given-quotes",trip:r}),w.a.createElement(gi,{path:"quotes",trip:r}),w.a.createElement(so,{path:"new-quote",trip:r}),w.a.createElement(po,{path:"payments",trip:r}),w.a.createElement(Zo,{path:"hotel-bookings",trip:r}),w.a.createElement($o,{path:"activities",trip:r})))}var tu="TRIP_SOURCES_STATE",au={isFetching:!0,state:za()},nu={list:Object(L.createAsyncAction)("@TRIP_SOURCES/LIST_FETCH_REQUEST","@TRIP_SOURCES/LIST_FETCH_SUCCESS","@TRIP_SOURCES/LIST_FETCH_FAILED")()},ru=$a(au,nu);function cu(e){var t=e[tu];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function lu(e){return{getTripSources:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trip-sources",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var iu=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(nu.list.request()),t.abrupt("return",lu(c).getTripSources(e).then(function(e){return a(nu.list.success(e)),e.data}).catch(function(e){return a(nu.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function ou(){var e=ee();return Object(x.useCallback)(function(t){e(iu(t))},[e])}function uu(){return Object(H.a)({},Object(T.c)(function(e){var t=cu(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,tripSources:t.get()})}),{fetchTripSources:ou()})}function su(e){Object(sn.a)(e);var t=uu(),a=t.fetchTripSources,n=t.tripSources,r=t.total,c=t.from,l=t.to,i=t.currentPage,o=t.lastPage,u=t.isFetching,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){a({page:i})},[a]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Trip Sources List")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(hn,{onSearch:function(e){f(e),a(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:r,from:c,to:l,lastPage:o,currentPage:i,isFetching:u,onChange:function(e){return a(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(dn,{total:r,isFetching:u},w.a.createElement(F.n,{striped:!0,bordered:!0,headers:["Name","Short Name"],rows:n.map(function(e){return[e.name,e.short_name]})})))}var mu=ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0},a,{fetch:function(e){return lu(t).getTripSources({q:e}).then(function(e){return e.data})}}))}),du=R.object().shape({name:R.string().required("Name field is required"),short_name:R.string().required("Short name field is required")}),fu={name:"",short_name:""};var pu=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"New Trip Source")),w.a.createElement(Y.e,{initialValues:fu,validationSchema:du,onSubmit:function(e,n){return n.setStatus(),t.post("/trip-sources",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("div",null,a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Source of Trips"),w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Name",name:"name",placeholder:"Travel Triangle",required:!0})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{label:"Short name",name:"short_name",placeholder:"TT",required:!0}))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Eu(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"float-right btn btn-primary branded"},"New Trip Source"),w.a.createElement("h2",null,"Trip Sources"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(pu,{path:"/new"}),w.a.createElement(su,{path:"/"})))}var hu=R.object().shape({trip_id:R.string(),start_date:R.string().required("Start date is required"),no_of_nights:te().positive("Number of nights should be a positive integer").integer("Number of nights should be a positive integer").required("Number of nights is required"),destinations:R.array().min(1,"Please select atleast one destination"),no_of_adults:te().positive("Number of adults should be a positive integer").integer("Number of adults should be a positive integer").required("Number of adults field is required"),children:R.array().of(R.object().shape({count:te().positive("Number of children should be positive integer").integer("Number of children should be positive integer").required("Number of children field is required"),age:te().positive("Child age should a positive number").required("Child age is required")})),trip_source:R.object().required("Trip Source Type is required"),contact:R.object().shape({name:R.string().required("Contact name is required."),email:R.string().email("Contact email address in invalid"),phone_number:te().typeError("Phone number is invalid").positive("Phone number should be an positive integer")}).required()}),bu={trip_id:"",start_date:"",no_of_nights:1,destinations:[],no_of_adults:1,children:[],trip_source:void 0,contact:{name:"",email:"",phone_number:void 0,country:void 0}};var gu=ha(function(e){var t=e.xhr,a=e.navigate;return w.a.createElement(Y.e,{initialValues:bu,validationSchema:hu,onSubmit:function(e,n){n.setStatus();var r=e.start_date,c=e.no_of_adults,l=e.no_of_nights,i=e.children,o=void 0===i?[]:i,u=e.destinations,s=e.trip_source,m=e.trip_id,d=e.contact;if(r&&l&&c&&u&&u.length){var f={start_date:Aa()(r).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),end_date:Aa()(r).add(l,"day").hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),no_of_adults:c,children:o.map(function(e){var t=e.count,a=e.age;return"".concat(t,"-").concat(a,"yo")}).join(","),locations:u.map(function(e){return e.id}),trip_id:m,trip_source_id:s?s.id:void 0,contact:{name:d.name,email:d.email||void 0,phone_number:d.phone_number||void 0,country_id:d.country?d.country.id:void 0}};t.post("/trips",f).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})}else n.setStatus("Please fill the required attributes"),n.setSubmitting(!1)},render:function(e){var t=e.isSubmitting,a=e.status,n=e.values,r=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Trip"),a?w.a.createElement("p",{className:"text-red-700"},a):null,w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(pe,{name:"destinations",render:function(e){var t=e.field;return w.a.createElement(kc,Object.assign({},t,{label:"Destinations",onChange:function(e,t){return r(t,e)}}))}})),w.a.createElement(Va,null,w.a.createElement(ec,{name:"start_date",label:"Start Date",required:!0})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"no_of_nights",label:"Number of nights",type:"number",min:1,required:!0})),w.a.createElement(Va,null,w.a.createElement(pe,{name:"trip_source",render:function(e){var t=e.field;return w.a.createElement(mu,Object.assign({},t,{label:"Trip Source",required:!0,fetchOnMount:!0,onChange:function(e,t){return r(t,e)},multiple:!1}))}})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"trip_id",label:"Trip ID",placeholder:"1231231"}))),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Pax Details"),w.a.createElement(Ee,{name:"no_of_adults",label:"Number of adults",type:"number",min:1,required:!0}),w.a.createElement(Y.c,{name:"children",render:function(e){var t=e.name,a=e.remove,r=e.push;return w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Children"),w.a.createElement("ul",{className:"list"},n.children.map(function(e,n){return w.a.createElement(Ua,{as:"li",key:n},w.a.createElement(Va,{xs:"auto"},w.a.createElement(Ee,{label:"Age",name:"".concat(t,".").concat(n,".age"),type:"number",min:1,max:20,required:!0})),w.a.createElement(Va,{xs:"auto"},w.a.createElement(Ee,{label:"Count",name:"".concat(t,".").concat(n,".count"),type:"number",min:1,max:1e4,required:!0})),w.a.createElement(Va,{xs:"auto",className:"d-flex align-items-center"},w.a.createElement(F.d,{className:"btn--secondary",onClick:function(e){return a(n)}},"\xd7 Remove")))}),w.a.createElement(F.d,{onClick:function(e){return r({count:1,age:6})}},"+ Add Children Details")))}}))),w.a.createElement(Va,{sm:6},w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Contact Details"),w.a.createElement(Y.c,{name:"contact",render:function(e){var t=e.name;return w.a.createElement(Ua,null,w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{name:"".concat(t,".name"),label:"Contact Name",required:!0,placeholder:"Anoop Rai"})),w.a.createElement(Va,{sm:"auto"},w.a.createElement(Ee,{name:"".concat(t,".email"),label:"Email",required:!0,type:"email",placeholder:"user@domain.com"})),w.a.createElement(Va,null,w.a.createElement(Ee,{name:"".concat(t,".phone_number"),label:"Phone Number",type:"number",required:!0,placeholder:"9779212232"})))}})))),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}})});function vu(e){Object(sn.a)(e);var t=fn(),a=Object(Z.a)(t,2),n=a[0],r=a[1],c=mi(),l=c.trips,i=c.fetchTrips,o=c.total,u=c.from,s=c.to,m=c.currentPage,d=c.lastPage,f=c.isFetching,p=Object(x.useCallback)(function(e){i(e)},[i]);return Object(x.useEffect)(function(){var e=n.tags,t=void 0===e?[]:e,a=n.hotel_booking_stages,r=void 0===a?[]:a,c=n.locations,l=void 0===c?[]:c,i=Object(ue.a)(n,["tags","hotel_booking_stages","locations"]);p(Object(H.a)({tags:t.map(function(e){return e.name}),hotel_booking_stages:r.map(function(e){return e.name}),locations:l.map(function(e){return e.name}),hotels_not_booked:1},i,{page:1}))},[n,p]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Pending Hotel Bookings")),w.a.createElement("div",null,w.a.createElement("h2",null,"Pending Hotel Bookings")),w.a.createElement("hr",null),w.a.createElement(hn,{placeholder:"Search by id, destination...",onSearch:function(e){r(Object(H.a)({},n,e))}}),w.a.createElement(Ua,null,w.a.createElement(Va,{md:"auto"},w.a.createElement(_u,{onChange:function(e){r(Object(H.a)({},n,e))}})),w.a.createElement(Va,null,w.a.createElement(dn,{total:o,isFetching:f},w.a.createElement(F.n,{striped:!0,bordered:!0,responsive:!0,headers:["Basic Details","Hotels"],rows:l.map(function(e){var t=e.id,a=e.trip_source,n=e.trip_id,r=e.locations,c=e.no_of_adults,l=e.children,i=e.contact,o=e.created_by,u=e.created_at,s=e.latest_given_quote,m=Aa.a.utc(e.start_date).local(),d=Aa.a.utc(e.end_date).local(),f=d.diff(m,"days"),p=Bo(s);return[w.a.createElement("div",null,w.a.createElement("h4",null,w.a.createElement(q.a,{to:"".concat(t)},r.map(function(e){return e.short_name}).join(" \u2022\xa0"),s?w.a.createElement("span",null," ","(",s.locations.map(function(e){return e.short_name}).join("-"),")"):null)),w.a.createElement("div",{className:"flex items-center"},w.a.createElement("div",{className:"mr-2"},w.a.createElement(F.i.CalendarIcon,null)),w.a.createElement("div",null,ae(m.format("Do MMM, YYYY"),Yl()("Night",f,!0),w.a.createElement("span",null,Aa.a.utc().isBefore(m)?"".concat(Aa.a.utc(m).local().diff(Aa()(),"days")," days remaining"):Aa.a.utc().isAfter(d)?"".concat(Aa.a.utc().diff(d,"days")," days ago"):"On Trip")))),w.a.createElement("div",{className:"flex items-center"},w.a.createElement("div",{className:"mr-2"},w.a.createElement(F.i.UsersIcon,null)),w.a.createElement("div",null,ae(Yl()("Adult",c,!0),[l,"with ".concat(l," children")]))),w.a.createElement("div",{className:"text-sm my-3"},ae([s,w.a.createElement("span",null,s?w.a.createElement("span",null,ae(w.a.createElement("span",null,w.a.createElement(F.b,null,w.a.createElement(F.i.RupeeIcon,null)," ",X(s.given_price))," ","by ",s.created_by.name),Aa.a.utc(u).local().fromNow())):w.a.createElement("span",null,ae("Initiated by ".concat(o.name),Aa.a.utc(u).local().fromNow())))],w.a.createElement(q.a,{to:"/trips/".concat(t.toString())},n||t,"-",a.short_name))),i?w.a.createElement("div",null,w.a.createElement("div",null,i.name),w.a.createElement("div",{className:"text-sm"},ae([i.phone_number,w.a.createElement("a",{href:"tel:".concat(i.phone_number),className:"text-gray-600"},i.phone_number)],[i.email,w.a.createElement("a",{href:"mailto:".concat(i.email),className:"text-gray-600"},i.email)]))):null),w.a.createElement("div",null,p.map(function(e){if(!e.length)return null;var t=e[0].hotel;return w.a.createElement("div",{key:t.id,className:"mb-4"},w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement("h4",{className:"mb-2 font-semibold"},t.name),w.a.createElement("div",{className:"text-sm text-gray-600"},ae(t.location.short_name,"".concat(t.stars," Star")))),w.a.createElement(Va,null,w.a.createElement(Vo,{quoteHotels:e}))))}))]})})),w.a.createElement("div",{className:"text-right mt-8"},w.a.createElement(F.l,{total:o,from:u,to:s,currentPage:m,lastPage:d,isFetching:f,onChange:function(e){return p(Object(H.a)({},n,{page:e}))}})))))}function _u(e){var t=e.label,a=void 0===t?"Filters":t,n=e.onChange;return w.a.createElement(Y.e,{initialValues:{},onSubmit:function(e){n(e)},render:function(e){var t=e.setFieldValue;return w.a.createElement(Y.d,{noValidate:!0,style:{minWidth:"250px"}},w.a.createElement("h5",{className:"mb-4 border-b"},a),w.a.createElement(pe,{name:"hotel_booking_stages",render:function(e){var a=e.field;return w.a.createElement(Do,Object.assign({},a,{fetchOnMount:!0,label:"Hotel Booking Stages",placeholder:"Search and select stages...",onChange:function(e,a){return t(a,e)}}))}}),w.a.createElement(pe,{name:"locations",render:function(e){var a=e.field;return w.a.createElement(kc,Object.assign({},a,{label:"Locations",placeholder:"Search for locations...",onChange:function(e,a){return t(a,e)}}))}}),w.a.createElement(pe,{name:"tags",render:function(e){var a=e.field;return w.a.createElement(ii,Object.assign({},a,{type:"trip",label:"Tags",placeholder:"Search and select tag(s)...",onChange:function(e,a){return t(a,e)}}))}}),w.a.createElement(he,{onChange:function(e){var t=e.values;n(t)}}),w.a.createElement("hr",null),w.a.createElement(F.d,{type:"submit",secondary:!0},"Apply Filters"))}})}function yu(e){var t=e.trip,a=t.trip_id,n=t.id;return w.a.createElement("nav",{className:"flex items-center mb-2"},w.a.createElement(q.a,{to:"/",className:"text-gray-600"},"Home"),w.a.createElement(F.i.ChevronDownIcon,{className:"rotate-270 text-gray-500 text-sm"}),w.a.createElement(q.a,{to:"/trips",className:"text-gray-600"},"Trips"),w.a.createElement(F.i.ChevronDownIcon,{className:"rotate-270 text-gray-500 text-sm"}),w.a.createElement(q.a,{to:"/trips/hotels-booking-pending",className:"text-gray-600"},"Pending Hotels Booking"),w.a.createElement(F.i.ChevronDownIcon,{className:"rotate-270 text-gray-500 text-sm"}),w.a.createElement(q.a,{to:"/trips/hotels-booking-pending/".concat(n),className:"text-gray-500"},a))}function Su(e){var t=e.tripId,a=e.navigate,n=Xo(t,!0),r=n.trip,c=n.isFetching;if(!t)return a&&a(".."),null;if(c)return w.a.createElement("div",{className:"text-center"},w.a.createElement(rn,null));if(!r)return null;var l=r.locations,i=r.latest_given_quote,o=r.trip_id,u=r.trip_source;return w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"".concat(l.map(function(e){return e.short_name})," (").concat(i?i.locations.map(function(e){return e.short_name}).join("-"):"",") | ").concat(o,"-").concat(u.short_name))),w.a.createElement("div",{className:"mb-16"},w.a.createElement(yu,{trip:r}),w.a.createElement(Jo,{trip:r})),w.a.createElement(q.e,null,w.a.createElement(Zo,{path:"/",trip:r})))}function Ou(e){return w.a.createElement(ie,null,w.a.createElement(q.e,null,w.a.createElement(di,{path:"/"}),w.a.createElement(vu,{path:"/hotels-booking-pending"}),w.a.createElement(Su,{path:"/hotels-booking-pending/:tripId/*"}),w.a.createElement(gu,{path:"/new"}),w.a.createElement(eu,{path:":tripId/*"})))}var ju="TRIP_PLAN_REQUEST_LIST_STATE",xu={isFetching:!0,state:za()},wu={list:Object(L.createAsyncAction)("@TRIP_PLAN_REQUESTS/LIST_FETCH_REQUEST","@TRIP_PLAN_REQUESTS/LIST_FETCH_SUCCESS","@TRIP_PLAN_REQUESTS/LIST_FETCH_FAILED")(),item:Object(L.createAsyncAction)("@TRIP_PLAN_REQUESTS/ITEM_FETCH_REQUEST","@TRIP_PLAN_REQUESTS/ITEM_FETCH_SUCCESS","@TRIP_PLAN_REQUESTS/ITEM_FETCH_FAILED")()},Nu=$a(xu,wu);function Cu(e){var t=e[ju];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Tu(e){return{getTripPlanRequest:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trip-plan-requests/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var ku=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(wu.item.request()),t.abrupt("return",Tu(c).getTripPlanRequest(e).then(function(e){return a(wu.item.success(e)),e}).catch(function(e){return a(wu.item.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Au(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){return Object(T.c)(function(t){var a=Cu(t);return{isFetching:a.isFetching,item:a.getItem(e)}})}(e),n=function(){var e=ee();return Object(x.useCallback)(function(t){return e(ku(t))},[e])}();return Object(x.useEffect)(function(){t&&e&&n(e)},[e,t,n]),Object(H.a)({},a,{fetch:n})}function Pu(e){var t=e.cabId,a=e.navigate,n=Au(t,!0),r=n.item,c=n.isFetching;return t?w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Request from ",r?r.name:""," ",r?r.phone_number:"")),w.a.createElement(q.a,{to:".."},"Back to list"),c?"Loading...":r?w.a.createElement("div",null,r.name," - ",r.phone_number," - ",r.destination,w.a.createElement("br",null),"Created at:"," ",Aa.a.utc(r.created_at).local().toLocaleString(),w.a.createElement("br",null)):w.a.createElement(q.d,{noThrow:!0,to:"/trip-plan-requests"})):(a&&a("/trip-plan-requests"),null)}function qu(e){return{getTripPlanRequests:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trip-plan-requests",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),assignTripRequestsOwner:function(){var t=Object(D.a)(I.a.mark(function t(a,n){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/trip-plan-request-owners",{items:n,owner_id:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}}var Fu=ha(function(e){var t=e.xhr,a=e.request,n=e.onUpdate,r=a.owner,c=a.assigned_at,l=Object(x.useState)(!1),i=Object(Z.a)(l,2),o=i[0],u=i[1];return w.a.createElement("span",null,r?w.a.createElement("span",null,w.a.createElement(q.a,{to:"/users/".concat(r.id)},r.name)," on"," ",Aa.a.utc(c).format("Do MMM, YYYY")):w.a.createElement("span",null,"Not Set"),o?w.a.createElement(Y.e,{initialValues:{owner:r},onSubmit:function(e,r){r.setStatus();var c=e.owner;if(!c)return null;qu(t).assignTripRequestsOwner(c.id,[a.id]).then(function(e){return r.setSubmitting(!1),u(!1),n&&n(),e}).catch(function(e){return r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1),Promise.reject(e)})},render:function(e){var t=e.isSubmitting,a=e.setFieldValue,n=e.status;return w.a.createElement(Y.d,null,w.a.createElement("fieldset",null,n?w.a.createElement("p",{className:"text-red-700 my-2"},n):null,w.a.createElement(pe,{name:"owner",render:function(e){var t=e.field;return w.a.createElement(On,Object.assign({},t,{multiple:!1,label:"Select Owner",onChange:function(e,t){return a(t,e)}}))}}),w.a.createElement("footer",null,w.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Assign"),w.a.createElement(F.d,{type:"button",disabled:t,onClick:function(){return u(!1)}},"Cancel"))))}}):w.a.createElement(F.d,{title:"Edit",onClick:function(){return u(!0)}},"\u270e"))}),Mu=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(wu.list.request()),t.abrupt("return",qu(c).getTripPlanRequests(e).then(function(e){var t=e.data,n=e.meta;return a(wu.list.success({data:t,meta:n})),t}).catch(function(e){return a(wu.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Iu(){var e=Object(T.b)();return Object(x.useCallback)(function(t){return e(Mu(t))},[e])}function Du(){return Object(H.a)({},Object(T.c)(function(e){var t=Cu(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,items:t.get()})}),{fetch:Iu()})}function Yu(e){var t=Du(),a=t.items,n=t.total,r=t.from,c=t.to,l=t.currentPage,i=t.lastPage,o=t.isFetching,u=t.fetch,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:l})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Trip Plan Requests")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(En,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,from:r,to:c,currentPage:l,lastPage:i,isFetching:o,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(mn,{isFetching:o,total:n},w.a.createElement(F.n,{headers:["Guest","Destination","Pax","Comments","Actions"],striped:!0,bordered:!0,rows:a.map(function(e){return[w.a.createElement("span",null,w.a.createElement("h4",null,e.name),e.phone_number," \u2022 ",e.email),w.a.createElement("span",null,w.a.createElement("h4",null,e.destination),w.a.createElement("span",null,e.start_date?Aa.a.utc(e.start_date).local().format("Do MMM, YYYY"):null," ","\u2022 ",e.no_of_days," Days")),w.a.createElement("span",null,e.no_of_adults," Adults with ",e.no_of_children," Children"),w.a.createElement("span",null,e.hotel_preference?w.a.createElement("span",null,"Hotel Preference: ",e.hotel_preference,w.a.createElement("br",null)):null,w.a.createElement("blockquote",null,e.comments)),w.a.createElement("span",null,e.trip_id?w.a.createElement(q.a,{to:"/trips/".concat(e.trip_id)},"View Associated Trip"):null,w.a.createElement("br",null),"Owner:"," ",w.a.createElement(Fu,{request:e,onUpdate:function(){u(Object(H.a)({page:l},d))}})," ",w.a.createElement("br",null),"Created at: ",Aa.a.utc(e.created_at).format("Do MMM, YYYY"))]})})))}ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0,fetch:function(e){return qu(t).getTripPlanRequests({q:e}).then(function(e){return e.data})}},a))});function Ru(e){return w.a.createElement(ie,null,w.a.createElement("h2",null,"Trip Plan Requests"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(Pu,{path:":cabId"}),w.a.createElement(Yu,{path:"/"})))}var Hu="TENANT_LIST_STATE",Lu={isFetching:!0,state:za()},Uu={list:Object(L.createAsyncAction)("@TENANTS/LIST_FETCH_REQUEST","@TENANTS/LIST_FETCH_SUCCESS","@TENANTS/LIST_FETCH_FAILED")(),item:Object(L.createAsyncAction)("@TENANTS/ITEM_FETCH_REQUEST","@TENANTS/ITEM_FETCH_SUCCESS","@TENANTS/ITEM_FETCH_FAILED")()},Vu=$a(Lu,Uu);function Bu(e){var t=e[Hu];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Gu(e){return{getTenant:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/tenants/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Qu=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Uu.item.request()),t.abrupt("return",Gu(c).getTenant(e).then(function(e){return a(Uu.item.success(e)),e}).catch(function(e){return a(Uu.item.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Zu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(e){return Object(T.c)(function(t){var a=Bu(t);return{isFetching:a.isFetching,tenant:a.getItem(e)}})}(e),n=function(){var e=ee();return Object(x.useCallback)(function(t){return e(Qu(t))},[e])}();return Object(x.useEffect)(function(){t&&e&&n(e)},[e,t,n]),Object(H.a)({},a,{fetchTenant:n})}function Wu(e){var t=e.tenantId,a=e.navigate,n=Zu(t,!0),r=n.tenant,c=n.isFetching;return t?w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,r?r.name:"")),w.a.createElement(q.a,{to:".."},"Back to list"),c?"Loading...":r?w.a.createElement("div",null,w.a.createElement("h3",null,r.name),w.a.createElement("p",null,r.description),w.a.createElement("div",{className:"float-right"},r.invited_at?w.a.createElement("b",null,"Invited at:"," ",Aa.a.utc(r.invited_at).local().toLocaleString()):"Not invited yet",w.a.createElement("br",null),r.signup_at?w.a.createElement("b",null,"Signedup at:"," ",Aa.a.utc(r.signup_at).local().toLocaleString()):"Not invited yet"),w.a.createElement("h4",null,"Users"),w.a.createElement("ul",null,r.users?r.users.map(function(e){return w.a.createElement("li",{key:e.id},w.a.createElement(q.a,{to:"/users/".concat(e.id)},e.name)," -"," ",e.email," - ",e.email_verified_at)}):null)):w.a.createElement(q.d,{noThrow:!0,to:"/tenants"})):(a&&a("/tenants"),null)}function Ku(e){return{getTenants:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/tenants",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var zu=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(Uu.list.request()),t.abrupt("return",Ku(c).getTenants(e).then(function(e){var t=e.data,n=e.meta;return a(Uu.list.success({data:t,meta:n})),t}).catch(function(e){return a(Uu.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function Ju(){var e=Object(T.b)();return Object(x.useCallback)(function(t){return e(zu(t))},[e])}function $u(){return Object(H.a)({},Object(T.c)(function(e){var t=Bu(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,tenants:t.get()})}),{fetchTenants:Ju()})}function Xu(e){var t=$u(),a=t.tenants,n=t.total,r=t.from,c=t.to,l=t.currentPage,i=t.lastPage,o=t.isFetching,u=t.fetchTenants,s=fn(),m=Object(Z.a)(s,2),d=m[0],f=m[1];return Object(x.useEffect)(function(){u({page:l})},[u]),w.a.createElement(x.Fragment,null,w.a.createElement(P.a,null,w.a.createElement("title",null,"Agents")),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(En,{onSearch:function(e){f(e),u(Object(H.a)({},e,{page:1}))}})),w.a.createElement(Va,{className:"text-right"},w.a.createElement(F.l,{total:n,from:r,to:c,currentPage:l,lastPage:i,isFetching:o,onChange:function(e){return u(Object(H.a)({},d,{page:e}))}}))),w.a.createElement(mn,{isFetching:o,total:n},w.a.createElement(F.n,{headers:["Name","Description"],striped:!0,bordered:!0,rows:a.map(function(e){return[w.a.createElement(q.a,{to:e.id.toString()},e.name),e.description]})})))}ha(function(e){var t=e.xhr,a=Object(ue.a)(e,["xhr"]);return w.a.createElement(bn.a,Object.assign({multiple:!0,fetch:function(e){return Ku(t).getTenants({q:e}).then(function(e){return e.data})}},a))});var es=R.object().shape({name:R.string().required("Name for the tenant is required.").max(299,"Maximum 299 characters allowed"),description:R.string().max(299,"Maximum 299 characters allowed"),address_name:R.string().required("Addressing name is required"),address_email:R.string().email("Invalid email address").required("Addressing email is required"),send_invite:R.boolean()}),ts={name:"",description:"",address_name:"",address_email:"",send_invite:!0,tenant_signup_link:""};var as=ha(function(e){var t=e.xhr,a=e.navigate,n=e.location;return ts.tenant_signup_link=n?"".concat(n.origin,"/tenant-signup"):"",w.a.createElement("div",null,w.a.createElement(Y.e,{initialValues:ts,validationSchema:es,onSubmit:function(){var e=Object(D.a)(I.a.mark(function e(n,r){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setStatus(),e.abrupt("return",t.post("/tenants",Object(H.a)({},n,{send_invite:+(n.send_invite||!1)})).then(function(e){var t=e.data.data;a&&a("../".concat(t.id))}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors)}).then(function(){r.setSubmitting(!1)}));case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),render:function(e){var t=e.isSubmitting,a=e.status,n=e.values;return w.a.createElement(Y.d,{noValidate:!0},a?w.a.createElement("p",{className:"text-red-700 my-2"},a):null,w.a.createElement("fieldset",null,w.a.createElement("legend",null,"Add New Tenant"),w.a.createElement(Ua,null,w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Name",name:"name",required:!0,placeholder:"Tourepedia Holidays"})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Description",name:"description",placeholder:"Tourepedia provides best tourisum services across India"})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Addressing Name",name:"address_name",placeholder:"Admin Name",required:!0})),w.a.createElement(Va,null,w.a.createElement(Ee,{label:"Addressing Email",name:"address_email",type:"email",placeholder:"admin@domain.com",required:!0}))),w.a.createElement(Ee,{label:"Send Invitation email also",name:"send_invite",type:"checkbox",checked:n.send_invite}),w.a.createElement("footer",null,w.a.createElement(F.d,{type:"submit",disabled:t},"Save",n.send_invite?" and Invite":""," Agent"),w.a.createElement(q.a,{to:"..",className:"btn"},"Cancel"))))}}))});function ns(e){return w.a.createElement(ie,null,w.a.createElement(q.a,{to:"new",className:"btn float-right btn-primary branded"},"Add New Agent"),w.a.createElement("h2",null,"Agents"),w.a.createElement("hr",null),w.a.createElement(q.e,null,w.a.createElement(as,{path:"/new"}),w.a.createElement(Wu,{path:":tenantId"}),w.a.createElement(Xu,{path:"/"})))}var rs=function(e){var t=e.location,a=z(t&&t.search).email||"";return w.a.createElement("div",{className:"pt-20"},w.a.createElement("div",{className:"max-w-xl mx-auto text-center text-xl border rounded-lg py-20 px-4"},w.a.createElement("div",null,w.a.createElement("div",{className:"text-center mb-10"},w.a.createElement("div",{className:"text-5xl w-20 h-20 rounded-full bg-green-400 inline-block text-white"},w.a.createElement(F.i.OkIcon,{className:"align-middle"}))),w.a.createElement("h1",null,"Your Email Verified Successfully."),w.a.createElement("p",null,"You can now"," ",w.a.createElement(q.a,{to:"/login?email=".concat(a),className:"text-blue-600 hover:text-blue-800"},"login")," ","to the Tourepedia Admin Dashboard."))))};a(321);function cs(e){var t=e.as,a=void 0===t?"div":t,n=e.className,r=e.alignRight,c=void 0!==r&&r,l=Object(ue.a)(e,["as","className","alignRight"]);return w.a.createElement(a,Object.assign({className:me()("drop-down",{"align-right":c},n)},l))}a(322),a(323);var ls="NOTIFICATIONS_STATE",is={isFetching:!0,state:za()},os={list:Object(L.createAsyncAction)("@NOTIFICATIONS/LIST_FETCH_REQUEST","@NOTIFICATIONS/LIST_FETCH_SUCCESS","@NOTIFICATIONS/LIST_FETCH_FAILED")(),markAsRead:Object(L.createAsyncAction)("@NOTIFICATIONS/MARK_AS_READ_REQUEST","@NOTIFICATIONS/MARK_AS_READ_SUCCESS","@NOTIFICATIONS/MARK_AS_READ_FAILED")(),pushNewNotification:Object(L.createStandardAction)("@NOTIFICATIONS/PUSH_NEW_NOTIFICATION")()},us=$a(is,os,function(e,t){switch(t.type){case Object(L.getType)(os.markAsRead.success):return Object(H.a)({},e,{state:Ja(e.state).insert(t.payload.data)});case Object(L.getType)(os.pushNewNotification):return Object(H.a)({},e,{state:Ja(e.state).insert([t.payload],void 0,!0)})}return e});function ss(e){var t=e[ls];return Object(H.a)({},Ja(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}var ms=a(150),ds=a(151),fs=a.n(ds);var ps=w.a.createContext(void 0);$(ps,"channels");function Es(e){var t=e.children,a=le().user,n=Object(x.useState)(void 0),r=Object(Z.a)(n,2),c=r[0],l=r[1];return Object(x.useEffect)(function(){a&&l(function(){var e=new fs.a(be.pusher.key,{cluster:be.pusher.cluster,forceTLS:!0,authEndpoint:be.pusher.authEndpoint,auth:{headers:{Authorization:"Bearer ".concat(pa())}}});return new ms.a({broadcaster:"pusher",client:e})}())},[a]),w.a.createElement(ps.Provider,{value:c},t)}var hs=".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated";function bs(e){return{getNotifications:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/notifications",{params:a}).then(function(e){return e.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),markAsRead:function(){var t=Object(D.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.patch("/notifications/mark-as-read",{items:a.map(function(e){return e.id})}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var gs=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,a(os.list.request()),t.abrupt("return",bs(c).getNotifications(e).then(function(e){var t=e.data,n=e.meta;return a(os.list.success({data:t,meta:n})),t}).catch(function(e){return a(os.list.failure(e)),Promise.reject(e)}));case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()},vs=function(e){return function(){var t=Object(D.a)(I.a.mark(function t(a,n,r){var c,l;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.xhr,l={data:e.map(function(e){return Object(H.a)({},e,{read_at:Aa.a.utc().toString()})})},a(os.markAsRead.success(l)),t.abrupt("return",bs(c).markAsRead(e).then(function(e){return e.data}).catch(function(t){var n={data:e.map(function(e){return Object(H.a)({},e,{read_at:null})})};return a(os.markAsRead.success(n)),Promise.reject(t)}));case 4:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}()};function _s(){return Object(T.c)(function(e){var t=ss(e);return Object(H.a)({},t.meta,{isFetching:t.isFetching,notifications:t.get()})})}function ys(){var e=ee();return Object(x.useCallback)(function(t){return e(gs(t))},[e])}function Ss(){var e=ee(),t=_s().notifications;return Object(x.useCallback)(function(){return e(vs(t.filter(function(e){return!e.read_at})))},[e,t])}function Os(e){var t=e.notification.data,a=t.id,n=t.price,r=t.converted_by;return w.a.createElement("div",null,w.a.createElement("div",null,w.a.createElement("div",{className:"font-bold mb-1"},w.a.createElement(q.a,{to:"/trips/".concat(a)},"Trip Conversion")),w.a.createElement("div",{className:"text-sm"},w.a.createElement(F.b,null,w.a.createElement(F.i.RupeeIcon,null)," ",n)," ","by ",r)))}function js(e){var t,a=e.notification,n=a.created_at,r=a.read_at,c=function(){var e=ee();return Object(x.useCallback)(function(t){return e(vs(t))},[e])}();switch(a.type){case"App\\Notifications\\TripConverted":t=Os;break;default:return console.warn("No renderer for '".concat(a.type,"' type notification")),null}return w.a.createElement("div",{className:me()("p-3",{"bg-gray-100":r})},w.a.createElement(t,{notification:a}),w.a.createElement("footer",{className:"mt-1 text-sm text-gray-600"},Aa.a.utc(n).local().fromNow()," ","\u2022"," ",r?w.a.createElement("span",null,"Read"):w.a.createElement("button",{className:"text-primary-600",onClick:function(){return c([a])}},w.a.createElement(F.i.OkIcon,{title:"Mark as Read"}))))}function xs(e){var t=w.a.useContext(ps),a=Object(x.useMemo)(function(){return t&&t.private("users."+e)},[e,t]);if(e&&t)return a}function ws(){var e=le().user,t=Object(H.a)({},_s(),{fetchNotifications:ys(),markAllAsRead:Ss()}),a=t.notifications,n=t.fetchNotifications,r=t.markAllAsRead;return function(){var e=le().user,t=ee(),a=xs(e&&e.id);Object(x.useEffect)(function(){if(a)return a.notification(function(e){t(os.pushNewNotification(e))}),function(){a.stopListening(hs)}},[t,a])}(),Object(x.useEffect)(function(){e&&n()},[e,n]),e&&a&&a.length?w.a.createElement(cs,{as:"li",className:"inline-block",alignRight:!0},w.a.createElement("a",{href:"#view-notifications",className:"toggler"},w.a.createElement(F.b,{primary:!0},a.filter(function(e){return!e.read_at}).length.toString())),w.a.createElement("ul",{className:"menu",style:{maxHeight:"40vh",minWidth:"250px",overflow:"auto"}},w.a.createElement("header",{className:"px-3 py-2 text-sm border-b flex justify-between"},w.a.createElement("span",{className:"font-bold "},"Notifications"),w.a.createElement("button",{className:"text-primary-600",onClick:r},"Mark All as Read")),a.map(function(e,t){return w.a.createElement("li",{key:e.id,className:"border-t"},w.a.createElement(js,{notification:e}))}))):null}var Ns=function(){var e=le().user,t=Na(),a=t.hasPermission,n=t.hasAnyPermission;if(!e)return null;var r=e.name,c=e.tenant;return w.a.createElement("header",{className:"mb-4 text-base bg-white border-t-4 border-primary-600"},w.a.createElement("nav",{className:"sm:flex border-b items-stretch md:justify-between"},w.a.createElement(q.a,{to:"/",className:"inline-flex h-16 px-2 mr-4 sm:mr-auto"},w.a.createElement("div",{className:"flex items-center"},w.a.createElement("img",{alt:"Tourepedia Logo",src:be.publicUrl+"/logo.png",className:"inline-block align-middle rounded-full shadow h-8 w-8 mr-2"}),w.a.createElement("h1",{className:"font-normal text-base m-0 md:block"},c?c.name:"Tourepedia Dashboard"))),w.a.createElement("ul",{className:"flex w-full md:w-auto md:px-4 h-16 items-center justify-between md:justify-end"},w.a.createElement(cs,{as:"li",className:"inline-block"},w.a.createElement(q.a,{to:"/trips",className:"inline-block"},"Trips"),w.a.createElement("ul",null,w.a.createElement(Ca,{to:"/trips"},"Trips"),w.a.createElement(Ca,{to:"/trips/hotels-booking-pending"},"Hotel Bookings"),n(wa.VIEW_TRIP_PLAN_REQUESTS,wa.MANAGE_TRIP_PLAN_REQUESTS)?w.a.createElement(Ca,{to:"/trip-plan-requests"},"Trip Plan Requests"):null,w.a.createElement(Ca,{to:"/trip-sources"},"Trip Sources"),w.a.createElement(Ca,{to:"/trip-stages"},"Trip Stages"))),w.a.createElement(cs,{as:"li",className:"inline-block"},w.a.createElement(q.a,{to:"/hotels"},"Hotels"),w.a.createElement("ul",null,w.a.createElement(Ca,{to:"/hotels"},"Hotels"),w.a.createElement(Ca,{to:"/hotel-prices"},"Hotel Prices"),w.a.createElement(Ca,{to:"/meal-plans"},"Meal Plans"),w.a.createElement(Ca,{to:"/room-types"},"Room Types"),w.a.createElement(Ca,{to:"/hotel-payment-preferences"},"Payment Preferences"),w.a.createElement(Ca,{to:"/hotel-booking-stages"},"Booking Stages"))),w.a.createElement(cs,{as:"li",className:"inline-block",alignRight:!0},w.a.createElement(q.a,{to:"/transport-services"},"Transport"),w.a.createElement("ul",null,w.a.createElement(Ca,{to:"/transport-services"},"Transport Services"),w.a.createElement(Ca,{to:"/cab-types"},"Cab Types"),w.a.createElement(Ca,{to:"/transport-service-prices"},"Transport Service Prices"),w.a.createElement(Ca,{to:"/locations"},"Locations"),w.a.createElement(Ca,{to:"/cabs"},"Cabs"))),a(wa.MANAGE_USERS)?w.a.createElement(cs,{as:"li",className:"inline-block",alignRight:!0},w.a.createElement(q.a,{to:"/users"},"Users"),w.a.createElement("ul",{className:"menu"},w.a.createElement(Ca,{to:"/users"},"Users"),a(wa.MANAGE_ROLES)?w.a.createElement(Ca,{to:"/roles"},"Roles"):null,a(wa.MANAGE_TENANTS)?w.a.createElement(Ca,{to:"/tenants"},"Agents"):null)):null,w.a.createElement(ws,null),w.a.createElement(cs,{as:"li",className:"inline-block",alignRight:!0},w.a.createElement("a",{className:"toggler",href:"#profile-and-settings"},w.a.createElement(F.i.CogAltIcon,{title:"Hi ".concat(r)})),w.a.createElement("ul",{className:"menu"},w.a.createElement(Ca,{to:"/settings"},w.a.createElement(F.i.CogAltIcon,null)," Settings"),w.a.createElement(q.b,null,function(e){var t=e.location;return w.a.createElement(Ca,{to:"/logout?from=".concat(t.pathname)},w.a.createElement(F.i.OffIcon,null)," Logout")}))))))};function Cs(){return w.a.createElement("footer",{className:"border-t"},w.a.createElement(La,{fluid:!0},w.a.createElement("div",{className:"py-4"},w.a.createElement("span",null,"\xa9 2019 Tourepedia. All rights reserved")," \u2022 ",w.a.createElement("span",null,"v",be.appVersion))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ts=a(152),ks=a(153);var As,Ps=function(e,t){var a=t.initialState,n=t.thunkExtraAgrs,r=[ks.a.withExtraArgument(n)],c=[k.applyMiddleware.apply(void 0,r)];return Object(k.createStore)(e,a,Ts.composeWithDevTools.apply(void 0,c))}(Object(k.combineReducers)((As={},Object(j.a)(As,n.key,n.reducer),Object(j.a)(As,c.key,c.reducer),Object(j.a)(As,r.key,r.reducer),Object(j.a)(As,o.key,o.reducer),Object(j.a)(As,u.key,u.reducer),Object(j.a)(As,s.key,s.reducer),Object(j.a)(As,l.key,l.reducer),Object(j.a)(As,d.key,d.reducer),Object(j.a)(As,f.key,f.reducer),Object(j.a)(As,p.key,p.reducer),Object(j.a)(As,v.key,v.reducer),Object(j.a)(As,E.key,E.reducer),Object(j.a)(As,b.key,b.reducer),Object(j.a)(As,h.key,h.reducer),Object(j.a)(As,m.key,m.reducer),Object(j.a)(As,g.key,g.reducer),Object(j.a)(As,_.key,_.reducer),Object(j.a)(As,y.key,y.reducer),Object(j.a)(As,i.key,i.reducer),Object(j.a)(As,S.key,S.reducer),As)),{thunkExtraAgrs:{xhr:va}}),qs=w.a.createElement(T.a,{store:Ps},w.a.createElement(A.HelmetProvider,null,w.a.createElement(Ea.Provider,{value:va},w.a.createElement(function(e){var t=e.children,a=void 0===t?null:t,n=le(),r=n.user,c=n.wait,l=n.isAuthenticating,i=n.fetchUser;return Object(x.useEffect)(function(){r||l||i()},[i]),w.a.createElement(x.Fragment,null,"function"===typeof a?a({wait:c,user:r}):a)},null,w.a.createElement(function(){return w.a.createElement(Es,null,w.a.createElement(P.a,{titleTemplate:"%s | Tourepedia",defaultTitle:"Tourepedia"}),w.a.createElement(Ns,null),w.a.createElement("main",{style:{minHeight:"80vh"}},w.a.createElement(La,{fluid:!0},w.a.createElement(q.e,null,w.a.createElement(oa,{path:"/login"}),w.a.createElement(Sa,{path:"/invited-signup"}),w.a.createElement(xa,{path:"/tenant-signup"}),w.a.createElement(Qa,{path:"/forgot-password"}),w.a.createElement(Wa,{path:"/reset-password"}),w.a.createElement(Ia,{path:"/"}),w.a.createElement(ma,{path:"/logout"}),w.a.createElement(Ba,{path:"/settings/*"}),w.a.createElement(Xn,{path:"/users/*"}),w.a.createElement(Jn,{path:"/roles/*"}),w.a.createElement(nl,{path:"/hotels/*"}),w.a.createElement(Rr,{path:"/meal-plans/*"}),w.a.createElement(Xr,{path:"/room-types/*"}),w.a.createElement(Dc,{path:"/locations/*"}),w.a.createElement(gl,{path:"/cab-types/*"}),w.a.createElement(Il,{path:"/cabs/*"}),w.a.createElement(Ou,{path:"/trips/*"}),w.a.createElement(Eu,{path:"/trip-sources/*"}),w.a.createElement(ci,{path:"/trip-stages/*"}),w.a.createElement(Wi,{path:"/transport-services/*"}),w.a.createElement(no,{path:"/transport-service-prices/*"}),w.a.createElement(Xc,{path:"/hotel-payment-preferences/*"}),w.a.createElement(Lo,{path:"/hotel-booking-stages/*"}),w.a.createElement(Ru,{path:"/trip-plan-requests/*"}),w.a.createElement(ns,{path:"/tenants/*"}),w.a.createElement(uc,{path:"/hotel-prices/*"}),w.a.createElement(rs,{path:"email-verified"}),w.a.createElement(Da,{default:!0})))),w.a.createElement(Cs,null))},null)))));C.a.render(qs,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[155,1,2]]]);
//# sourceMappingURL=main.ca94c386.chunk.js.map