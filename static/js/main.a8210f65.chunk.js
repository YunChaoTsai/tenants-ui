(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t){},147:function(e,t,a){e.exports=a(316)},310:function(e,t,a){},311:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"key",function(){return I}),a.d(n,"AuthUserStatus",function(){return v}),a.d(n,"actions",function(){return M}),a.d(n,"reducer",function(){return Y}),a.d(n,"selectors",function(){return H});var r={};a.r(r),a.d(r,"key",function(){return Le}),a.d(r,"actions",function(){return Ve}),a.d(r,"reducer",function(){return Be}),a.d(r,"selectors",function(){return Qe});var l={};a.r(l),a.d(l,"key",function(){return it}),a.d(l,"actions",function(){return ut}),a.d(l,"reducer",function(){return st}),a.d(l,"selectors",function(){return mt});var c={};a.r(c),a.d(c,"key",function(){return Nt}),a.d(c,"hotelActions",function(){return Pt}),a.d(c,"priceActions",function(){return Ft}),a.d(c,"actions",function(){return xt}),a.d(c,"reducer",function(){return kt}),a.d(c,"selectors",function(){return At});var i={};a.r(i),a.d(i,"key",function(){return Ut}),a.d(i,"actions",function(){return Bt}),a.d(i,"reducer",function(){return Qt}),a.d(i,"selectors",function(){return Gt});var o={};a.r(o),a.d(o,"key",function(){return ea}),a.d(o,"actions",function(){return aa}),a.d(o,"reducer",function(){return na}),a.d(o,"selectors",function(){return ra});var u={};a.r(u),a.d(u,"key",function(){return Ta}),a.d(u,"actions",function(){return Ca}),a.d(u,"reducer",function(){return Oa}),a.d(u,"selectors",function(){return wa});var s={};a.r(s),a.d(s,"key",function(){return Ya}),a.d(s,"actions",function(){return Ra}),a.d(s,"reducer",function(){return La}),a.d(s,"selectors",function(){return Ua});var m={};a.r(m),a.d(m,"key",function(){return ln}),a.d(m,"actions",function(){return on}),a.d(m,"reducer",function(){return un}),a.d(m,"selectors",function(){return sn});var d={};a.r(d),a.d(d,"key",function(){return bn}),a.d(d,"actions",function(){return _n}),a.d(d,"reducer",function(){return Sn}),a.d(d,"selectors",function(){return yn});var E={};a.r(E),a.d(E,"key",function(){return xn}),a.d(E,"actions",function(){return kn}),a.d(E,"reducer",function(){return An}),a.d(E,"selectors",function(){return In});var f={};a.r(f),a.d(f,"key",function(){return Mn}),a.d(f,"actions",function(){return Hn}),a.d(f,"reducer",function(){return Rn}),a.d(f,"selectors",function(){return Ln});var h={};a.r(h),a.d(h,"key",function(){return nr}),a.d(h,"actions",function(){return lr}),a.d(h,"reducer",function(){return cr}),a.d(h,"selectors",function(){return ir});var g={};a.r(g),a.d(g,"key",function(){return ur}),a.d(g,"actions",function(){return mr}),a.d(g,"reducer",function(){return dr}),a.d(g,"selectors",function(){return Er});var p={};a.r(p),a.d(p,"key",function(){return zr}),a.d(p,"actions",function(){return Xr}),a.d(p,"reducer",function(){return Zr}),a.d(p,"selectors",function(){return el});var b={};a.r(b),a.d(b,"key",function(){return dl}),a.d(b,"actions",function(){return fl}),a.d(b,"reducer",function(){return hl}),a.d(b,"selectors",function(){return gl});var v,_=a(14),S=a(0),y=a.n(S),T=a(61),j=a.n(T),C=a(9),O=a(18),w=a(6),N=a.n(w),P=a(3),F=a(1),x=(a(163),a(5)),q=a(2),k=a(4),A=a(11),I="AUTHENTICATED_USER_STATE";!function(e){e.DEFAULT="DEFAULT",e.CHECKING="CHECKING",e.UN_AUTHENTICATED="UN_AUTHENTICATED",e.AUTHENTICATING="AUTHENTICATING",e.AUTHENTICATED="AUTHENTICATED"}(v||(v={}));var D={data:void 0,status:v.DEFAULT},M={checkAuth:Object(A.createAsyncAction)("@AUTH/CHECK_AUTH_REQUEST","@AUTH/CHECK_AUTH_SUCCESS","@AUTH/CHECK_AUTH_FAILED")(),login:Object(A.createAsyncAction)("@AUTH/LOGIN_REQUEST","@AUTH/LOGIN_SUCCESS","@AUTH/LOGIN_FAILED")(),logout:Object(A.createAsyncAction)("@AUTH/LOGOUT_REQUEST","@AUTH/LOGOUT_SUCCESS","@AUTH/LOGOUT_FAILED")()};function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(A.getType)(M.checkAuth.request):return Object(k.a)({},e,{status:v.CHECKING});case Object(A.getType)(M.login.request):return Object(k.a)({},e,{status:v.AUTHENTICATING});case Object(A.getType)(M.checkAuth.success):case Object(A.getType)(M.login.success):return Object(k.a)({},e,{status:v.AUTHENTICATED,data:t.payload});case Object(A.getType)(M.checkAuth.failure):case Object(A.getType)(M.login.failure):return Object(k.a)({},e,{status:v.UN_AUTHENTICATED});case Object(A.getType)(M.logout.success):return Object(k.a)({},e,{status:v.UN_AUTHENTICATED,data:void 0});default:return e}}function H(e){return{get state(){return e[I]},get user(){return this.state.data},get status(){return this.state.status},get noRequestYet(){return this.status===v.DEFAULT},get isAuthenticated(){return this.status===v.AUTHENTICATED},get isAuthenticating(){return this.status===v.AUTHENTICATING||this.status===v.CHECKING}}}var R=function(){return function(e,t,a){var n=a.xhr;return e(M.checkAuth.request()),function(e){return{getUser:function(){return e.get("/me").then(function(e){return e.data.data})}}}(n).getUser().then(function(t){return e(M.checkAuth.success(t)),t}).catch(function(t){return e(M.checkAuth.failure(t)),Promise.reject(t)})}},L=Object(C.b)(function(e){var t=H(e);return{user:t.user,isAuthenticating:t.isAuthenticating,isAuthenticated:t.isAuthenticated,noRequestYet:t.noRequestYet}},function(e){return{getUser:function(){return e(R())}}});var U=L(function(e){var t=e.getUser,a=e.user,n=e.isAuthenticating,r=e.noRequestYet,l=e.children;return Object(S.useEffect)(function(){a||n||t()},[]),y.a.createElement(S.Fragment,null,l({wait:n||r,user:a}))});function V(e){var t=e.children;return y.a.createElement(U,null,function(e){var a=e.wait,n=e.user;return a?null:n?t||null:y.a.createElement(P.b,null,function(e){var t=e.location;return y.a.createElement(P.d,{to:"/login?next=".concat(t.pathname),noThrow:!0})})})}function B(e){var t=e.children,a=e.to,n=void 0===a?"/":a;return y.a.createElement(U,null,function(e){var a=e.wait,r=e.user;return a?null:r?y.a.createElement(P.d,{to:n,noThrow:!0}):t||null})}var Q=a(87),G=a.n(Q);function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.a.parse(e,Object(k.a)({ignoreQueryPrefix:!0},t))}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G.a.stringify(e,Object(k.a)({addQueryPrefix:!0},t))}function J(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}var z=a(10);function $(e){var t=e.className,a=void 0===t?"":t,n=Object(z.a)(e,["className"]);return y.a.createElement(x.a,Object.assign({component:F.f,className:"".concat(a)},n))}function X(e){var t=e.as,a=void 0===t?"input":t,n=e.id,r=e.name,l=Object(z.a)(e,["as","id","name"]);return y.a.createElement(a,Object.assign({className:"input",name:r,id:n||r},l))}function Z(e){var t=e.name,a=e.render,n=e.children,r=(e.ref,Object(z.a)(e,["name","render","children","ref"]));return y.a.createElement(x.b,{name:t,render:function(e){var t=e.field.name,l=e.form,c=l.touched,i=l.errors,o=Object(x.f)(c,t),u=Object(x.f)(i,t);return y.a.createElement(F.g,Object.assign({hasError:!(!o||!u),"aria-errormessage":u},r),n||a(e),y.a.createElement($,{name:t}))}})}function ee(e){var t=e.label,a=e.name,n=e.type,r=e.className,l=e.labelPlacement,c=e.noGroup,i=Object(z.a)(e,["label","name","type","className","labelPlacement","noGroup"]);l=l||("checkbox"===n||"radio"===n?"after":"before");var o=t?y.a.createElement("label",{htmlFor:a},t):null;function u(e){var t=e.field;return y.a.createElement(S.Fragment,null,"before"===l?o:null,y.a.createElement(X,Object.assign({},i,{type:n},t)),"after"===l?o:null)}return c?y.a.createElement(x.b,{name:a,render:u}):y.a.createElement(Z,{name:a,className:r,render:u})}var te=q.object().shape({email:q.string().email("Invalid email address").required("Email field is required"),password:q.string().required("Password field is required")}),ae={email:"",password:""};var ne=Object(C.b)(null,function(e){return{login:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return M.login.request(),function(e){return{login:function(t){return e.post("/login",t).then(function(e){return e.data})},refresh:function(){return e.patch("/refresh").then(function(e){return e.data})}}}(r).login(e).then(function(){return t(R())}).catch(function(e){return M.login.failure(e),Promise.reject(e)})}}(t))}}})(function(e){var t=e.login,a=(e.navigate,e.location),n=K(a&&a.search).next;return y.a.createElement(B,{to:n},y.a.createElement(N.a,null,y.a.createElement("title",null,"Sign in to TAD")),y.a.createElement("div",{className:"min-h-screen"},y.a.createElement("div",{className:"text-center"},y.a.createElement("img",{src:"https://admintest.tourepedia.com/logo.jpg",className:"inline-block mt-16 w-20 rounded-full shadow"})),y.a.createElement("h1",{className:"text-center my-4"},"Sign in to TAD"),y.a.createElement("div",{className:"max-w-sm mx-auto"},y.a.createElement(x.e,{initialValues:ae,onSubmit:function(e,a){a.setStatus(),t(e).catch(function(e){a.setStatus(e.message),a.setSubmitting(!1)})},validationSchema:te,render:function(e){e.errors;var t=e.isSubmitting,a=(e.touched,e.isValid,e.status);return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,a?y.a.createElement("p",{className:"error"},a):null,y.a.createElement(ee,{label:"Email",name:"email",type:"email",autoFocus:!0,id:"email",placeholder:"username@domain.com",autoComplete:"username email",required:!0,tabIndex:1}),y.a.createElement(P.a,{to:"/forgot-password",className:"float-right text-blue-600 hover:text-blue-800 text-sm"},"Forgot Password ?"),y.a.createElement(ee,{label:"Password",name:"password",type:"password",id:"password",required:!0,autoComplete:"current-password",tabIndex:2}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,tabIndex:3,type:"submit",className:"w-full",disabled:t},"Sign in"))))}}))))});var re=function(){return function(e,t,a){return function(e){return{logout:function(){return e.delete("/logout").then(function(e){return localStorage.removeItem("access_token"),e})}}}(a.xhr).logout().then(function(){e(M.logout.success())})}};var le=Object(C.b)(null,function(e){return{logout:function(){return e(re())}}})(function(e){var t=e.logout,a=e.navigate,n=e.location,r=K(n&&n.search).from;return Object(S.useEffect)(function(){t().then(function(){a&&a(r||"/")})},[]),y.a.createElement("div",null,"Logging out")}),ce=a(12),ie=a.n(ce);function oe(e){var t=e.to,a=e.children,n=e.className,r=void 0===n?"":n;return y.a.createElement(P.c,{path:t},function(e){var n=e.match;return y.a.createElement("li",{className:ie()(r,n?"active":void 0)},y.a.createElement(P.a,{to:t},a))})}var ue=oe,se=a(7),me=a(8),de=a.n(me),Ee=a(42),fe=a.n(Ee);fe.a.defaults.baseURL="https://testadminapi.tourepedia.com",fe.a.interceptors.request.use(Object(O.compose)(function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e},function(e){var t=e.data,a=e.params;return e.headers["Content-Type"]="application/x-www-form-urlencoded",t instanceof FormData?e:(e.data=W(t,{addQueryPrefix:!1}),e.url=e.url+W(a),e.params=void 0,e)},function(e){var t=(e.method||"").toUpperCase(),a=e.data||{};switch(t){case"DELETE":case"PATCH":case"PUT":a instanceof FormData?a.append("_method",t):a._method=t,e.method="POST"}return e.data=a,e})),fe.a.interceptors.response.use(Object(O.compose)(function(e){var t=e.data;return t.access_token&&localStorage.setItem("access_token",t.access_token),e}),Object(O.compose)(function(e){var t=e.response&&e.response.data&&e.response.data.error;if(!t)return Promise.reject(e);if(t.errors){var a=Object.keys(t.errors).reduce(function(e,a){return e[a]=t.errors[a].join(", "),e},{});t.formikErrors=a}return Promise.reject(t)},function(e){var t=e.response;if(t){var a=t.data&&t.data.error;if(503===a.status_code){if(t.headers&&t.headers["retry-after"]){var n=t.headers["retry-after"];setTimeout(function(){window.location=window.location},1e3*parseInt(n))}alert(a.message)}}return e},function(e){var t=e.response;if(t){var a=t.data&&t.data.error;if(429===a.status_code){if(t.headers&&t.headers["retry-after"]){var n=t.headers["retry-after"];setTimeout(function(){window.location=window.location},1e3*parseInt(n))}alert(a.message)}}return e}));var he,ge,pe=y.a.createContext(fe.a),be=(he=pe,ge="xhr",function(e){function t(t){return y.a.createElement(he.Consumer,null,function(a){var n=Object(k.a)(Object(_.a)({},ge,a),t);return y.a.createElement(e,n)})}t.WrappedComponent=e;var a=e.displayName||e.name||"Component",n=he.Consumer.name||"Context.Consumer";return t.displayName=a+"("+n+"."+ge+")",t}),ve=fe.a;function _e(e){return{getConvertedTripAnalytics:function(){return e.get("/converted-trips").then(function(e){return e.data.data})},getDuePayments:function(){return e.get("/instalments").then(function(e){return e.data.data})},getTransactions:function(){return e.get("/payment-transactions").then(function(e){return e.data})}}}function Se(e){var t=e.xhr,a=Object(S.useState)([]),n=Object(se.a)(a,2),r=n[0],l=n[1];return Object(S.useEffect)(function(){_e(t).getConvertedTripAnalytics().then(l)},[]),y.a.createElement("section",null,y.a.createElement("h2",null,"Converted trips over time"),y.a.createElement(F.l,{responsive:!0,bordered:!0,striped:!0,headers:["ID","Dates","Stages","Destinations","Traveler","Pax"],rows:r.map(function(e){var t=e.id,a=e.trip_source,n=e.trip_id,r=e.start_date,l=e.end_date,c=e.locations,i=e.no_of_adults,o=e.children,u=e.contact,s=e.latest_stage;return[y.a.createElement(P.a,{to:"/trips/"+t.toString()},a.short_name,"-",n||t),"".concat(de.a.utc(r).local().format("DD/MM/YYYY")," to ").concat(de.a.utc(l).local().format("DD/MM/YYYY")),s?s.name:"Initiated",c.map(function(e){return e.short_name}).join(" \u2022\xa0"),u?y.a.createElement("div",null,u.name,y.a.createElement("br",null),y.a.createElement("a",{href:"tel:".concat(u.phone_number),className:"btn--icon"},y.a.createElement(F.h.PhoneIcon,{title:"Call to ".concat(u.name," on ").concat(u.phone_number)})),y.a.createElement("a",{href:"mailto:".concat(u.email),className:"btn--icon"},y.a.createElement(F.h.MailIcon,{title:"Send Email to ".concat(u.name," at ").concat(u.email)}))):null,"".concat(i," Adults").concat(o?" with "+o:"")]})}))}function ye(e){var t=e.xhr,a=Object(S.useState)([]),n=Object(se.a)(a,2),r=n[0],l=n[1];return Object(S.useEffect)(function(){_e(t).getDuePayments().then(l)},[]),y.a.createElement("section",null,y.a.createElement("h2",null,"Due payments"),y.a.createElement(F.l,{bordered:!0,responsive:!0},y.a.createElement("thead",null,y.a.createElement("tr",null,y.a.createElement("th",null,"Due Date"),r.map(function(e,t){return y.a.createElement("th",{key:t},de.a.utc(e.due_date).local().format("DD/MM/YYYY"))}))),y.a.createElement("tbody",null,y.a.createElement("tr",null,y.a.createElement("th",null,"Amount"),r.map(function(e,t){return y.a.createElement("td",{key:t},e.is_credit?"+":"-",e.due_amount)})))))}function Te(e){var t=e.xhr,a=Object(S.useState)({data:[],debited:0,credited:0}),n=Object(se.a)(a,2),r=n[0],l=n[1];return Object(S.useEffect)(function(){_e(t).getTransactions().then(function(e){var t=e.data,a=e.meta;return l(Object(k.a)({data:t},a))})},[]),y.a.createElement("section",null,y.a.createElement("h2",null,"Transactions"),y.a.createElement("div",null,"Credited: ",r.credited," \u2022 Debited: ",r.debited),y.a.createElement(F.l,{responsive:!0,bordered:!0},y.a.createElement("thead",null,y.a.createElement("tr",null,y.a.createElement("th",null,"Date"),r.data.map(function(e,t){return y.a.createElement("th",{key:t},de.a.utc(e.date).local().format("DD/MM/YYYY"))}))),y.a.createElement("tbody",null,y.a.createElement("tr",null,y.a.createElement("th",null,"Amount"),r.data.map(function(e,t){return y.a.createElement("td",{key:t},e.is_credited?"+":"-",e.amount)})))))}var je=be(function(e){var t=e.xhr;return y.a.createElement(V,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Dashboard")),y.a.createElement(Se,{xhr:t}),y.a.createElement(ye,{xhr:t}),y.a.createElement(Te,{xhr:t}))});function Ce(e){return y.a.createElement("div",null,y.a.createElement("h2",null,"Not Found"),y.a.createElement(P.a,{to:"/"},"Visit Dashboard"))}var Oe=q.object().shape({current:q.string().required("Current password field is required"),password:q.string().required("Password field is required"),password_confirmation:q.string().required("Password confirmation field is required")});var we={current:"",password:"",password_confirmation:""};var Ne=Object(C.b)(null,function(e){return{changePassword:function(t){return e(function(e){return function(t,a,n){return function(e){return{changePassword:function(t){return e.patch("/passwords",t)}}}(n.xhr).changePassword(e)}}(t))}}})(function(e){var t=e.changePassword,a=e.navigate;return y.a.createElement(V,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Change Password")),y.a.createElement(x.e,{initialValues:we,validationSchema:Oe,onSubmit:function(e,n){n.setStatus(),t(e).then(function(){alert("Password updated successfully"),a&&a("/")}).catch(function(e){e.formikErrors&&n.setErrors(e.formikErrors),n.setStatus(e.message),n.setSubmitting(!1)})},render:function(e){return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Change Password"),y.a.createElement(U,null,function(e){var t=e.user;return t?y.a.createElement("input",{type:"email",name:"email",value:t.email,hidden:!0,readOnly:!0,autoComplete:"username"}):null}),y.a.createElement(ee,{label:"Current Password",name:"current",type:"password",required:!0,id:"current",autoComplete:"current-password"}),y.a.createElement(ee,{name:"password",label:"New Password",type:"password",required:!0,id:"password",autoComplete:"new-password"}),y.a.createElement(ee,{label:"Confirm new password",name:"password_confirmation",type:"password",required:!0,id:"password_confirmation",autoComplete:"new-password"}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit"},"Update"))))}}))});a(310);function Pe(e){var t=e.fluid,a=e.className,n=e.as,r=void 0===n?"div":n,l=Object(z.a)(e,["fluid","className","as"]);return y.a.createElement(r,Object.assign({className:"container".concat(t?"-fluid":""," ").concat(a||"")},l))}function Fe(e){var t=e.className,a=e.noGutters,n=e.as,r=void 0===n?"div":n,l=Object(z.a)(e,["className","noGutters","as"]);return y.a.createElement(r,Object.assign({className:"row ".concat(a?"no-gutters":""," ").concat(t||"")},l))}function xe(e){var t=e.className,a=e.xs,n=e.sm,r=e.md,l=e.lg,c=e.xl,i=e.as,o=void 0===i?"div":i,u=Object(z.a)(e,["className","xs","sm","md","lg","xl","as"]),s=[],m=[];return[["xs",a],["sm",n],["md",r],["lg",l],["xl",c]].forEach(function(e){var t,a,n,r=Object(se.a)(e,2),l=r[0],c=r[1];null!==c&&"object"===typeof c?(t=c.span,a=c.offset,n=c.order):t=c;var i="xs"!==l?"-".concat(l):"";null!=t&&m.push(!0===t?"".concat("col").concat(i):"".concat("col").concat(i,"-").concat(t)),null!=n&&s.push("order".concat(i,"-").concat(n)),null!=a&&s.push("offset".concat(i,"-").concat(a))}),m.length||m.push("col"),y.a.createElement(o,Object.assign({className:ie.a.apply(void 0,[t].concat(s,m))},u))}var qe=L(function(e){return e.user,y.a.createElement(V,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Settings")),y.a.createElement("h2",null,"Settings"),y.a.createElement(Pe,{fluid:!0},y.a.createElement(Fe,null,y.a.createElement(xe,{as:"fieldset",sm:2},y.a.createElement("ul",{className:"list"},y.a.createElement("li",null,y.a.createElement(P.a,{to:"change-password"},"Change Password")))),y.a.createElement(xe,{className:"col-sm"},y.a.createElement(P.e,null,y.a.createElement(Ne,{path:"change-password"}),y.a.createElement(Ne,{path:"/"}))))))}),ke=q.object().shape({email:q.string().email("Invalid email address").required("Email field is required")});var Ae=Object(C.b)(null,function(e){return{forgotPassword:function(t){return e(function(e){return function(t,a,n){return function(e){return{forgotPassword:function(t){return e.post("/passwords/reset",t)}}}(n.xhr).forgotPassword(e)}}(t))}}})(function(e){var t=e.forgotPassword,a=e.navigate,n=e.location,r=K(n&&n.search).email||"";return y.a.createElement(B,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Forgot Password")),y.a.createElement("div",{className:"text-center mt-16"},y.a.createElement("h1",null,"Forgot Your Password?"),y.a.createElement("p",null,"No problem. Just enter your email address and we will send instructions to reset your password. ",y.a.createElement("br",null),"Or"," ",y.a.createElement(P.a,{to:"/login",className:"text-blue-600 hover:text-blue-800"},"Login")," ","if you remember your password!")),y.a.createElement("div",{className:"max-w-sm mx-auto"},y.a.createElement(x.e,{initialValues:{email:r,reset_password_link:"".concat(n&&n.origin,"/reset-password")},validationSchema:ke,onSubmit:function(e,n){n.setStatus(),t(e).then(function(){alert("Please check your inbox for password reset instructions."),n.setSubmitting(!1),a&&a("/login")}).catch(function(e){n.setStatus(e.message),n.setSubmitting(!1)})},render:function(e){var t=e.status,a=e.isSubmitting,n=e.values;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,t?y.a.createElement("div",{className:"error"},t):null,y.a.createElement(ee,{name:"email",label:"Email",placeholder:"username@domain.com",autoComplete:"username email",required:!0,autoFocus:!0,type:"email",id:"email",tabIndex:1}),y.a.createElement("input",{type:"hidden",name:"reset_password_link",hidden:!0,value:n.reset_password_link}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,tabIndex:2,type:"submit",disabled:a},"Get Instructions"))))}})))}),Ie=q.object().shape({email:q.string().required("Email field is required").email("Invalid email address"),token:q.string().required("Missing token to reset values. Please check for valid url from sent email"),password:q.string().required("Password field is required"),password_confirmation:q.string().required("Password confirmation field is required")});var De=Object(C.b)(null,function(e){return{resetPassword:function(t){return e(function(e){return function(t,a,n){return function(e){return{resetPassword:function(t){return e.delete("/passwords/reset",{data:t})}}}(n.xhr).resetPassword(e)}}(t))}}})(function(e){var t=e.navigate,a=e.location,n=e.resetPassword,r=K(a&&a.search),l=r.email,c=r.token;return l&&c||t&&t("/"),y.a.createElement("div",null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Reset Password")),y.a.createElement("div",{className:"text-center mt-16"},y.a.createElement("h1",null,"Reset Password"),y.a.createElement("p",null,"Just enter your new password to reset the password for your email address (",l,")")),y.a.createElement("div",{className:"max-w-sm mx-auto"},y.a.createElement(x.e,{initialValues:{email:l,token:c,password:"",password_confirmation:""},validationSchema:Ie,onSubmit:function(e,a){return a.setStatus(),n(e).then(function(){alert("Your passwords updated successfully. You can now log in with the new password"),t&&t("/login")}).catch(function(e){e.formikErrors&&a.setErrors(e.formikErrors),a.setStatus(e.message),a.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,a?y.a.createElement("p",{className:"error"},a):null,y.a.createElement(x.b,{name:"email",render:function(e){var t=e.field,a=t.value,n=t.name;return y.a.createElement("input",{type:"hidden",hidden:!0,name:n,value:a})}}),y.a.createElement(x.b,{name:"token",render:function(e){var t=e.field,a=t.value,n=t.name;return y.a.createElement("input",{type:"hidden",value:a,name:n})}}),y.a.createElement(ee,{label:"Password",name:"password",type:"password",id:"password",autoFocus:!0,autoComplete:"new-password",required:!0}),y.a.createElement(ee,{label:"Confirm Password",name:"password_confirmation",type:"password",id:"password_confirmation",autoComplete:"new-password",required:!0}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Reset Password"))))}}),y.a.createElement("div",{className:"text-center"},"Get instructions"," ",y.a.createElement(P.a,{to:"/forgot-password?email=".concat(l),className:"text-blue-600 hover:text-blue-800"},"again")," ",y.a.createElement("br",null),"OR",y.a.createElement("br",null),y.a.createElement(P.a,{to:"/login",className:"text-blue-600 hover:text-blue-800"},"Login")," ","if you remember your password!")))}),Me=a(146);function Ye(e){return He({items:[],byId:{},meta:{from:0,to:0,total:0,current_page:1,last_page:1},links:{}}).insert(e)}function He(e){var t=e||Ye();return{insert:function(e,a){return e?e.reduce(function(e,t){var n=e.byId,r=e.items,l=e.meta;return n[t.id]||(r=r.concat(t.id)),n[t.id]=t,Object(k.a)({},e,{byId:Object(k.a)({},n),items:Object(Me.a)(r),meta:Object(k.a)({},l,a||{})})},t):t},get:function(){return t.items.map(function(e){return t.byId[e]})},getItem:function(e){if(e)return t.byId[e]},getMeta:function(){return t.meta},get total(){return this.getMeta().total||0},get currentPage(){return this.getMeta().current_page||1},get lastPage(){return this.getMeta().last_page||1},get from(){return this.getMeta().from||0},get to(){return this.getMeta().to||0},get meta(){return{total:this.total,lastPage:this.lastPage,currentPage:this.currentPage,from:this.from,to:this.to}}}}function Re(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;if(t.list)switch(n.type){case Object(A.getType)(t.list.request):return Object(k.a)({},a,{isFetching:!0});case Object(A.getType)(t.list.success):return Object(k.a)({},a,{state:He(Ye()).insert(n.payload.data,n.payload.meta),isFetching:!1});case Object(A.getType)(t.list.failure):return Object(k.a)({},a,{isFetching:!1})}if(t.item)switch(n.type){case Object(A.getType)(t.item.request):return Object(k.a)({},a,{isFetching:!0});case Object(A.getType)(t.item.success):return Object(k.a)({},a,{state:He(a.state).insert([n.payload]),isFetching:!1});case Object(A.getType)(t.item.failure):return Object(k.a)({},a,{isFetching:!1})}return a}}var Le="USER_LIST_STATE",Ue={isFetching:!0,state:Ye()},Ve={list:Object(A.createAsyncAction)("@USERS/LIST_FETCH_REQUEST","@USERS/LIST_FETCH_SUCCESS","@USERS/LIST_FETCH_FAILED")(),item:Object(A.createAsyncAction)("@USERS/ITEM_FETCH_REQUEST","@USERS/ITEM_FETCH_SUCCESS","@USERS/ITEM_FETCH_FAILED")()},Be=Re(Ue,Ve);function Qe(e){var t=e[Le];return Object(k.a)({},He(t.state),{get state(){return e[Le]},get isFetching(){return this.state.isFetching}})}var Ge=Object(C.b)(function(e,t){var a=Qe(e);return{isFetching:a.isFetching,user:a.getItem(t.userId)}},function(e){return{getUser:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Ve.item.request()),function(e){return{getUser:function(t){return e.get("/users/".concat(t)).then(function(e){return e.data.data})}}}(r).getUser(e).then(function(e){return t(Ve.item.success(e)),e}).catch(function(e){return t(Ve.item.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getUser,a=e.user,n=e.isFetching,r=e.userId,l=e.render;return Object(S.useEffect)(function(){r&&t(r)},[]),y.a.createElement(S.Fragment,null,l({user:a,isFetching:n,userId:r}))});function Ke(e){var t=e.navigate,a=e.userId;return y.a.createElement(Ge,{userId:a,render:function(e){var n=e.user,r=e.isFetching;return a?y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,n?n.name:""," | User")),y.a.createElement(P.a,{to:".."},"Back to list"),r?"Loading...":n?y.a.createElement("div",null,y.a.createElement("h3",null,n.name," ",y.a.createElement(P.a,{to:"edit",title:"Edit Name"},"\u270e")),y.a.createElement("p",null,"Roles:"," ",(n.roles||[]).map(function(e,t,a){return y.a.createElement("span",{key:e.id},e.name,t!==a.length-1?" \u2022 ":"")}),y.a.createElement(P.a,{to:"edit-roles",title:"Edit Roles"},"\u270e")),"Email Verified on:"," ",n.email_verified_at?de.a.utc(n.email_verified_at).local().format("Do MMM, YYYY \\at hh:mm A"):"Not verified yet",y.a.createElement("br",null),"Invited on:"," ",de.a.utc(n.created_at).local().format("Do MMM, YYYY \\at hh:mm A")):y.a.createElement(P.d,{noThrow:!0,to:"/users"})):(t&&t("/users"),null)}})}a(311);var We=function(){return y.a.createElement("span",{className:"spin"},y.a.createElement(F.h.SpinnerIcon,null))};function Je(e){var t=e.isFetching,a=e.total,n=e.items,r=e.render,l=e.children;return y.a.createElement(S.Fragment,null,t?y.a.createElement("div",{className:"text-center"},y.a.createElement(We,null)):0===a?y.a.createElement("div",{className:"text-center"},"No item in the list"):l||(r?r(n):null))}var ze=Je;function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(S.useState)(e),a=Object(se.a)(t,2);return[a[0],a[1]]}var Xe={q:""};function Ze(e){var t=e.initialParams,a=void 0===t?Xe:t,n=e.onSearch;return y.a.createElement(x.e,{initialValues:a,onSubmit:function(e){return n(e)},render:function(){return y.a.createElement(x.d,{noValidate:!0,style:{marginBottom:"1em"}},y.a.createElement(F.i,null,y.a.createElement(ee,{name:"q",noGroup:!0,placeholder:"Search...",type:"search"}),y.a.createElement(F.d,{type:"submit"},y.a.createElement(F.h.SearchIcon,null))))}})}var et=Ze;var tt=Object(C.b)(function(e){var t=Qe(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,users:t.get()})},function(e){return{getUsers:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Ve.list.request()),function(e){return{getUsers:function(t){return e.get("/users",{params:t}).then(function(e){return e.data})}}}(r).getUsers(e).then(function(e){var a=e.data,n=e.meta;return t(Ve.list.success({data:a,meta:n})),a}).catch(function(e){return t(Ve.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getUsers,a=e.users,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Users")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(Ze,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,isFetching:o,currentPage:c,lastPage:i,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(Je,{isFetching:o,total:n},y.a.createElement(F.l,{striped:!0,bordered:!0,responsive:!0,headers:["Name","Email","Roles","Email Verified At"],rows:a.map(function(e){return[y.a.createElement(P.a,{to:e.id.toString()},e.name),y.a.createElement("span",null,e.email),y.a.createElement("span",null,e.roles.map(function(e){return e.name}).join(" \u2022 ")),y.a.createElement("span",null,e.email_verified_at?de.a.utc(e.email_verified_at).local().format("Do MMM, YYYY \\at hh:mm A"):"Not Verified Yet")]})})))}),at=q.object().shape({name:q.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed"),email:q.string().email("Email must be a valid email address").required("Email field is required"),password:q.string().required("Password is required").min(8,"Password must be of a length greater than 8"),password_confirmation:q.string().required("Password confirmation is required").min(8,"Password must be of a length greater than 8")}),nt={name:"",email:"",password:"",password_confirmation:"",email_verified_link:""};var rt=be(function(e){var t=e.xhr,a=e.navigate,n=e.location;return nt.email_verified_link=n?"".concat(n.origin,"/email-verified"):"",y.a.createElement("div",null,y.a.createElement(x.e,{initialValues:nt,validationSchema:at,onSubmit:function(e,n){n.setStatus(),t.post("/users",e).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status,n=e.values;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Invite New User"),y.a.createElement(ee,{label:"Name",name:"name",required:!0,placeholder:"John Tourepedia",autoComplete:"name"}),y.a.createElement(ee,{label:"Email",type:"email",name:"email",autoComplete:"username",placeholder:"username@tourepedia.com",required:!0}),y.a.createElement(ee,{label:"Password",type:"password",name:"password",autoComplete:"new-password",required:!0}),y.a.createElement(ee,{label:"Retype Password",type:"password",name:"password_confirmation",autoComplete:"new-password",required:!0}),y.a.createElement("input",{hidden:!0,type:"hidden",name:"email_verified_link",value:n.email_verified_link}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Submit"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))}),lt=q.object().shape({name:q.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed")});var ct=be(function(e){var t=e.xhr,a=e.navigate,n=e.userId;return y.a.createElement(Ge,{userId:n,render:function(e){var r=e.isFetching,l=e.user;if(!n)return a&&a("/users"),null;if(r)return"Loading...";if(!l)return a&&a("/users"),null;var c={name:l.name};return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Edit User")),y.a.createElement(x.e,{initialValues:c,validationSchema:lt,onSubmit:function(e,r){r.setStatus(),t.patch("/users/".concat(n),e).then(function(e){var t=e.data.data;a&&a("../../".concat(t.id)),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Edit User Details"),a?y.a.createElement("div",null,a):null,y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Manager",required:!0}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Submit"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))}})}),it="ROLE_LIST_STATE",ot={isFetching:!0,state:Ye()},ut={list:Object(A.createAsyncAction)("@ROLES/LIST_FETCH_REQUEST","@ROLES/LIST_FETCH_SUCCESS","@ROLES/LIST_FETCH_FAILED")(),item:Object(A.createAsyncAction)("@ROLES/ITEM_FETCH_REQUEST","@ROLES/ITEM_FETCH_SUCCESS","@ROLES/ITEM_FETCH_FAILED")()},st=Re(ot,ut);function mt(e){var t=e[it];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}var dt=Object(C.b)(function(e,t){var a=mt(e);return{isFetching:a.isFetching,role:a.getItem(t.roleId)}},function(e){return{getRole:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(ut.item.request()),function(e){return{getRole:function(t){return e.get("/roles/".concat(t)).then(function(e){return e.data.data})}}}(r).getRole(e).then(function(e){return t(ut.item.success(e)),e}).catch(function(e){return t(ut.item.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getRole,a=e.role,n=e.isFetching,r=e.roleId,l=e.render;return Object(S.useEffect)(function(){r&&t(r)},[]),y.a.createElement(S.Fragment,null,l({role:a,isFetching:n,roleId:r}))});function Et(e){var t=e.roleId,a=e.navigate;return y.a.createElement(dt,{roleId:t,render:function(e){var n=e.role,r=e.isFetching;return t?y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,n?n.name:""," Role")),y.a.createElement(P.a,{to:".."},"Back to list"),r?"Loading...":n?y.a.createElement("div",null,y.a.createElement("h3",null,n.name," ",y.a.createElement(P.a,{to:"edit",title:"Edit Role"},"\u270e")),"Created at:"," ",de.a.utc(n.created_at).local().format("Do MMM YYYY \\at hh:mm A"),y.a.createElement("br",null),y.a.createElement("p",null,y.a.createElement("b",null,"Permissions"),":"," ",(n.permissions||[]).map(function(e,t,a){return y.a.createElement("span",{key:e.id},e.name,t!==a.length-1?" \u2022 ":"")})," ",y.a.createElement(P.a,{to:"edit-permissions",title:"Edit Permissions"},"\u270e"))):y.a.createElement(P.d,{noThrow:!0,to:"/users"})):(a&&a("/roles"),null)}})}var ft=a(13);function ht(e){return{getRoles:function(t){return e.get("/roles",{params:t}).then(function(e){return e.data})},getPermissions:function(t){return e.get("/permissions",{params:t}).then(function(e){return e.data.data})}}}var gt=Object(C.b)(function(e){var t=mt(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,roles:t.get()})},function(e){return{getRoles:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(ut.list.request()),ht(r).getRoles(e).then(function(e){return t(ut.list.success(e)),e.data}).catch(function(e){return t(ut.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getRoles,a=e.roles,n=e.total,r=e.from,l=e.to,c=e.isFetching,i=e.currentPage,o=e.lastPage,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:i})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Roles")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:i,lastPage:o,isFetching:c,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:c},y.a.createElement(F.l,{headers:["Name","Permissions"],striped:!0,bordered:!0,rows:a.map(function(e){return[y.a.createElement(P.a,{to:e.id.toString()},e.name),(e.permissions||[]).map(function(e){return e.name}).join(" \u2022\xa0")]})})))}),pt=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0,fetch:function(e){return ht(t).getRoles({q:e}).then(function(e){return e.data})}},a))}),bt=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0,fetch:function(e){return ht(t).getPermissions({q:e})}},a))}),vt=q.object().shape({name:q.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed")}),_t={name:""};var St=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement("div",null,y.a.createElement(x.e,{initialValues:_t,validationSchema:vt,onSubmit:function(e,n){return n.setStatus(),t.post("/roles",e).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Role"),y.a.createElement(ee,{label:"Name",name:"name",required:!0,placeholder:"Manager"}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Submit"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))}),yt=q.object().shape({name:q.string().required("Name is required").min(4,"Minimum 4 characters required").max(199,"Maximum 199 characters allowed")});var Tt=be(function(e){var t=e.xhr,a=e.navigate,n=e.roleId;return y.a.createElement(dt,{roleId:n,render:function(e){var r=e.isFetching,l=e.role;if(!n)return a&&a("/roles"),null;if(r)return"Loading...";if(!l)return a&&a("/roles"),null;var c=l.id,i=l.name,o={name:i};return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Editing ",i," Role")),y.a.createElement(x.e,{initialValues:o,validationSchema:yt,onSubmit:function(e,n){return n.setStatus(),t.put("/roles/".concat(c),e).then(function(e){var t=e.data.data;a&&a("../../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Edit Role"),y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Manager",required:!0}),y.a.createElement(F.d,{type:"submit",disabled:t},"Save")),y.a.createElement(P.a,{to:".."},"Cancel"))}}))}})});var jt=be(function(e){var t=e.xhr,a=e.navigate,n=e.roleId;return y.a.createElement(dt,{roleId:n,render:function(e){var r=e.isFetching,l=e.role;if(!n)return a&&a("/roles"),null;if(r)return"Loading...";if(!l)return a&&a("/roles"),null;var c=l.name,i=l.permissions,o={permissions:void 0===i?[]:i};return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Edit ",c,"'s permissions")),y.a.createElement(x.e,{initialValues:o,onSubmit:function(e,r){return r.setStatus(),t.post("/roles/".concat(n,"/permissions"),{permissions:e.permissions.map(function(e){return{name:e.name}})}).then(function(e){a&&a("../../".concat(l.id)),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status,n=(e.values,e.setFieldValue);return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Editing ",c,"'s permissions"),a?y.a.createElement("div",null,a):null,y.a.createElement(Z,{name:"permissions",render:function(e){var t=e.field;return y.a.createElement(bt,Object.assign({},t,{label:"Select permission(s)",onChange:function(e,t){return n(t,e)}}))}}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))}})});function Ct(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"btn float-right"},"New Role"),y.a.createElement("h2",null,"Roles"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Et,{path:":roleId"}),y.a.createElement(Tt,{path:":roleId/edit"}),y.a.createElement(jt,{path:":roleId/edit-permissions"}),y.a.createElement(St,{path:"/new"}),y.a.createElement(gt,{path:"/"})))}var Ot=be(function(e){var t=e.xhr,a=e.navigate,n=e.userId;return y.a.createElement(Ge,{userId:n,render:function(e){var r=e.isFetching,l=e.user;if(!n)return a&&a("/users"),null;if(r)return"Loading...";if(!l)return a&&a("/users"),null;var c=l.name,i=l.roles,o={roles:void 0===i?[]:i};return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Edit ",c,"'s Roles")),y.a.createElement(x.e,{initialValues:o,onSubmit:function(e,r){r.setStatus(),t.post("/users/".concat(n,"/roles"),{roles:e.roles.map(function(e){return{name:e.name}})}).then(function(e){a&&a("../../".concat(l.id)),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.status,n=(e.values,e.setFieldValue);return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Editing ",c,"'s roles"),a?y.a.createElement("div",null,a):null,y.a.createElement(Z,{name:"roles",render:function(e){var t=e.field;return y.a.createElement(pt,Object.assign({},t,{label:"Select Role(s)",onChange:function(e,t){return n(t,e)}}))}}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))}})});function wt(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"btn float-right"},"New User"),y.a.createElement("h2",null,"Users"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Ke,{path:":userId"}),y.a.createElement(ct,{path:":userId/edit"}),y.a.createElement(Ot,{path:":userId/edit-roles"}),y.a.createElement(rt,{path:"/new"}),y.a.createElement(tt,{path:"/"})))}var Nt="HOTEL_LIST_STATE",Pt={list:Object(A.createAsyncAction)("@HOTELS/LIST_FETCH_REQUEST","@HOTELS/LIST_FETCH_SUCCESS","@HOTELS/LIST_FETCH_FAILED")(),item:Object(A.createAsyncAction)("@HOTELS/ITEM_FETCH_REQUEST","@HOTELS/ITEM_FETCH_SUCCESS","@HOTELS/ITEM_FETCH_FAILED")()},Ft={list:Object(A.createAsyncAction)("@HOTEL_PRICES/LIST_FETCH_REQUEST","@HOTEL_PRICES/LIST_FETCH_SUCCESS","@HOTEL_PRICES/LIST_FETCH_FAILED")()},xt={hotels:Pt,prices:Ft},qt={hotels:{isFetching:!0,state:Ye()},prices:{isFetching:!0,state:Ye()}},kt=Object(O.combineReducers)({hotels:Re(qt.hotels,xt.hotels),prices:Re(qt.prices,xt.prices)});function At(e){var t=e[Nt],a=t.hotels,n=t.prices;return{hotels:Object(k.a)({},He(a.state),{get state(){return a},get isFetching(){return this.state.isFetching}}),prices:Object(k.a)({},He(n.state),{get state(){return n},get isFetching(){return this.state.isFetching}}),getHotelPrices:function(e){return He(n.state).get().filter(function(t){return t.hotel_id===e})}}}function It(e){return{getHotels:function(t){return e.get("/hotels",{params:t}).then(function(e){return e.data})}}}var Dt=Object(C.b)(function(e){var t=At(e).hotels;return Object(k.a)({},t.meta,{isFetching:t.isFetching,hotels:t.get()})},function(e){return{getHotels:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Pt.list.request()),It(r).getHotels(e).then(function(e){var a=e.data,n=e.meta;return t(Pt.list.success({data:a,meta:n})),a}).catch(function(e){return t(Pt.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getHotels,a=e.hotels,n=e.total,r=e.from,l=e.to,c=e.lastPage,i=e.currentPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:i})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Hotels List")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(Ze,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,isFetching:o,currentPage:i,from:r,to:l,lastPage:c,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(Je,{isFetching:o,total:n},y.a.createElement(F.l,{responsive:!0,striped:!0,bordered:!0,headers:["Name","Meal Plans","Room Type","Child extra bed age"],rows:a.map(function(e){return[y.a.createElement(S.Fragment,null,y.a.createElement(P.a,{to:e.id.toString()},e.name),y.a.createElement("br",null),e.location.short_name," \u2022 ",e.stars," stars"),e.meal_plans.map(function(e){return e.name}).join(" \u2022 "),e.room_types.map(function(e){return e.name}).join(" \u2022 "),y.a.createElement(S.Fragment,null,e.extra_bed_child_age_start,"-",e.extra_bed_child_age_end,"yo")]})})))}),Mt=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return It(t).getHotels({q:e}).then(function(e){return e.data})}}))}),Yt=a(25),Ht=a.n(Yt),Rt=a(41);var Lt=Object(C.b)(function(e,t){var a=t.hotelId,n=void 0===a?"":a,r=At(e),l=parseInt(n,10);return Object(k.a)({},r.prices.meta,{isFetching:r.prices.isFetching,prices:r.getHotelPrices(l)})},function(e){return{getPrices:function(t,a){return e(function(e,t){return function(a,n,r){var l=r.xhr;return a(Ft.list.request()),function(e){return{getPrices:function(t,a){return e.get("/hotels/".concat(t,"/prices"),{params:a}).then(function(e){return e.data})}}}(l).getPrices(e,t).then(function(e){return a(Ft.list.success(e)),e.data}).catch(function(e){return a(Ft.list.failure(e)),Promise.reject(e)})}}(t,a))}}})(function(e){var t=e.getPrices,a=e.prices,n=e.hotelId,r=(e.hotel,e.total),l=e.from,c=e.to,i=e.currentPage,o=e.lastPage,u=e.isFetching,s=$e(),m=Object(se.a)(s,2),d=m[0],E=m[1],f=parseInt(n||"",10);return Object(S.useEffect)(function(){f&&t(f,{page:i})},[]),isNaN(f)?null:y.a.createElement(S.Fragment,null,y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{initialParams:d,onSearch:function(e){E(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:r,from:l,to:c,currentPage:i,lastPage:o,isFetching:u,onChange:function(e){return t(f,{page:e})}}))),y.a.createElement(ze,{isFetching:u,total:r},y.a.createElement(F.l,{responsive:!0,bordered:!0,striped:!0,headers:["Start Date","End Date","Meal Plan","Room Type","Base Price","Persons","A.W.E.B.","C.W.E.B.","C.Wo.E.B"],alignCols:{4:"right",5:"right",6:"right",7:"right",8:"right"},rows:a.map(function(e){var t=e.base_price,a=e.persons,n=e.start_date,r=e.end_date,l=e.adult_with_extra_bed_price,c=e.child_with_extra_bed_price,i=e.child_without_extra_bed_price,o=e.meal_plan,u=e.room_type;return[de.a.utc(n).local().format("DD/MM/YYYY"),de.a.utc(r).local().format("DD/MM/YYYY"),o.name,u.name,t,a,l,c,i]})})))}),Ut="MEAL_PLANS_STATE",Vt={isFetching:!0,state:Ye()},Bt={list:Object(A.createAsyncAction)("@MEAL_PLANS/LIST_FETCH_REQUEST","@MEAL_PLANS/LIST_FETCH_SUCCESS","@MEAL_PLANS/LIST_FETCH_FAILED")()},Qt=Re(Vt,Bt);function Gt(e){var t=e[Ut];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Kt(e){return{getMealPlans:function(t){return e.get("/meal-plans",{params:t}).then(function(e){return e.data})}}}var Wt=Object(C.b)(function(e){var t=Gt(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,mealPlans:t.get()})},function(e){return{getMealPlans:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Bt.list.request()),Kt(r).getMealPlans(e).then(function(e){var a=e.data,n=e.meta;return t(Bt.list.success({data:a,meta:n})),a}).catch(function(e){return t(Bt.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getMealPlans,a=e.mealPlans,n=e.total,r=e.from,l=e.to,c=e.isFetching,i=e.currentPage,o=e.lastPage,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:i})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Meal Plans")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:i,lastPage:o,isFetching:c,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:c},y.a.createElement(F.l,{striped:!0,bordered:!0,headers:["Name","Description"],rows:a.map(function(e){return[e.name,e.description]})})))}),Jt=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Kt(t).getMealPlans({q:e}).then(function(e){return e.data})}}))}),zt=q.object().shape({name:q.string().required("Name field is required"),description:q.string().required("Description field is required")}),$t={name:"",description:""};var Xt=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Meal Plan")),y.a.createElement(x.e,{initialValues:$t,validationSchema:zt,onSubmit:function(e,n){return n.setStatus(),t.post("/meal-plans",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Meal Plan"),y.a.createElement(ee,{label:"Name",name:"name",placeholder:"MAP",required:!0}),y.a.createElement(ee,{label:"Description",name:"description",placeholder:"Modified American Plan (Two meals: Breakfast and one of Lunch or Dinner)",required:!0}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Zt(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"float-right btn"},"New Meal Plan"),y.a.createElement("h2",null,"Meal Plans"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Xt,{path:"/new"}),y.a.createElement(Wt,{path:"/"})))}var ea="ROOM_TYPES_STATE",ta={isFetching:!0,state:Ye()},aa={list:Object(A.createAsyncAction)("@ROOM_TYPES/LIST_FETCH_REQUEST","@ROOM_TYPES/LIST_FETCH_SUCCESS","@ROOM_TYPES/LIST_FETCH_FAILED")()},na=Re(ta,aa);function ra(e){var t=e[ea];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function la(e){return{getRoomTypes:function(t){return e.get("/room-types",{params:t}).then(function(e){return e.data})}}}var ca=Object(C.b)(function(e){var t=ra(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,roomTypes:t.get()})},function(e){return{getRoomTypes:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(aa.list.request()),la(r).getRoomTypes(e).then(function(e){return t(aa.list.success(e)),e.data}).catch(function(e){return t(aa.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getRoomTypes,a=e.roomTypes,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Room Types")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,isFetching:o,currentPage:c,lastPage:i,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:o},y.a.createElement(F.l,{bordered:!0,striped:!0,headers:["Name","Description"],rows:a.map(function(e){return[e.name,e.description]})})))}),ia=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return la(t).getRoomTypes({q:e}).then(function(e){return e.data})}}))}),oa=q.object().shape({name:q.string().required("Name field is required"),description:q.string().required("Description field is required")}),ua={name:"",description:""};var sa=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Room Type")),y.a.createElement(x.e,{initialValues:ua,validationSchema:oa,onSubmit:function(e,n){return n.setStatus(),t.post("/room-types",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Room Type"),y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Delux",required:!0}),y.a.createElement(ee,{label:"Description",name:"description",placeholder:"Luxury room",required:!0}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function ma(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"btn float-right"},"New Room Type"),y.a.createElement("h2",null,"Room Types"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(sa,{path:"/new"}),y.a.createElement(ca,{path:"/"})))}function da(e){return y.a.createElement(ee,Object.assign({type:"date",placeholder:"dd/mm/yyyy"},e))}var Ea={prices:[{start_date:"",end_date:"",base_price:0,persons:2,adult_with_extra_bed_price:0,child_with_extra_bed_price:0,child_without_extra_bed_price:0,meal_plan:void 0,room_type:void 0}]},fa=q.object().shape({prices:q.array().of(q.object().shape({start_date:q.string().required("Start date field is required"),end_date:q.string().required("End date field is required"),base_price:q.number().required("Base price field is required").positive("Price should be positive"),persons:q.number().required("Persons field is required").integer().positive("Persons should be positive number"),adult_with_extra_bed_price:q.number().required("Price for adult with extra bed is required").min(0,"Price should not be negative"),child_with_extra_bed_price:q.number().required("Price for child with extra bed is required").min(0,"Price should not be negative"),child_without_extra_bed_price:q.number().nullable(!0).min(0,"Price should not be negative").required("Price for child without extra bed is required"),meal_plan:q.object().required("Meal plan should be selected"),room_type:q.object().required("Room type should be selected")}))});var ha=be(function(e){var t=e.hotel,a=e.xhr,n=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Add Prices")),y.a.createElement(x.e,{initialValues:Ea,validationSchema:fa,onSubmit:function(e,r){return r.setStatus(),a.post("/hotels/".concat(t.id,"/prices"),{prices:e.prices.reduce(function(e,t){var a=t.meal_plan,n=t.room_type,r=t.start_date,l=t.end_date,c=Object(z.a)(t,["meal_plan","room_type","start_date","end_date"]),i=[];return i.push(Object(k.a)({},c,{start_date:de()(r).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),end_date:de()(l).hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),meal_plan_id:a&&a.id,room_type_id:n&&n.id})),e.concat(i)},[])}).then(function(e){n&&n(".."),r.setSubmitting(!1)}).catch(function(e){r.setStatus(e.message),e.formikErrors&&r.setErrors(e.formikErrors),r.setSubmitting(!1)})},render:function(e){var a=e.isSubmitting,n=e.setFieldValue,r=e.values;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",{style:{minInlineSize:"auto"}},y.a.createElement("legend",null,"Add Hotel Price"),y.a.createElement(x.c,{name:"prices",render:function(e){var a=e.name,l=e.remove,c=e.push;return y.a.createElement("ol",{className:"list"},r.prices.map(function(e,i){return y.a.createElement("li",{key:i},y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(da,{label:"Start Date",name:"".concat(a,".").concat(i,".start_date")})),y.a.createElement(xe,null,y.a.createElement(da,{label:"End Date",name:"".concat(a,".").concat(i,".end_date")})),y.a.createElement(xe,null,y.a.createElement(Z,{name:"prices.".concat(i,".meal_plan"),render:function(e){var a=e.field;return y.a.createElement(Jt,Object.assign({label:"Meal Plan"},a,{searchable:!1,multiple:!1,options:t.meal_plans,onChange:function(e,t){return n(t,e)}}))}})),y.a.createElement(xe,null,y.a.createElement(Z,{name:"prices.".concat(i,".room_type"),render:function(e){var a=e.field;return y.a.createElement(ia,Object.assign({},a,{label:"Room Type",searchable:!1,multiple:!1,options:t.room_types,onChange:function(e,t){n(t,e),e&&e.allowed_extra_beds||(n("prices.".concat(i,".adult_with_extra_bed_price"),0),n("prices.".concat(i,".child_with_extra_bed_price"),0))}}))}}))),y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Prices"),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(ee,{label:"Number of persons",name:"".concat(a,".").concat(i,".persons"),type:"number"})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Base Price",name:"".concat(a,".").concat(i,".base_price"),type:"number"})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Adult with extra bed price",name:"".concat(a,".").concat(i,".adult_with_extra_bed_price"),type:"number",title:e.room_type?e.room_type.allowed_extra_beds?void 0:"No extra bed allowed":"Please select a room type",disabled:!e.room_type||!e.room_type.allowed_extra_beds})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Child with extra bed price",name:"".concat(a,".").concat(i,".child_with_extra_bed_price"),type:"number",title:e.room_type?e.room_type.allowed_extra_beds?void 0:"No extra bed allowed":"Please select a room type",disabled:!e.room_type||!e.room_type.allowed_extra_beds})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Child without extra bed price",name:"".concat(a,".").concat(i,".child_without_extra_bed_price"),type:"number"})))),y.a.createElement("hr",null),y.a.createElement("div",{className:"button-group form-group"},y.a.createElement(F.d,{className:"btn--secondary",onClick:function(t){return c(e)}},"+ Duplicate"),r.prices.length>1?y.a.createElement(F.d,{className:"btn--secondary",onClick:function(e){return l(i)}},"\xd7 Remove"):null))}),y.a.createElement("div",{className:"form-group"},y.a.createElement("hr",null),y.a.createElement(F.d,{onClick:function(e){return c(Ea.prices[0])}},"+ Add More")))}}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:a},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))}),ga=a(26),pa=(a(140),q.object().shape({name:q.string().required("Contact name is required"),email:q.string().email("Email should be a valid email address"),phone_number:q.number().positive("Phone number should be a positive integer").typeError("Invalid number")}).required("Contact data is required")),ba={name:"",email:""};function va(e){var t=e.onCreate,a=e.onCancel;return y.a.createElement(x.e,{initialValues:ba,validationSchema:pa,onSubmit:function(e,n){n.setStatus(),t(e).then(function(){n.setSubmitting(!1),a()}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){e.setFieldValue;var t=e.isSubmitting;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement(ee,{name:"name",label:"Name",required:!0,placeholder:"Johhny Dep"}),y.a.createElement(ee,{name:"email",label:"Email",type:"email",placeholder:"user@domain.com"}),y.a.createElement(ee,{name:"phone_number",label:"Phone Number",type:"number",placeholder:"9911929399"}),y.a.createElement("hr",null),y.a.createElement("footer",null,y.a.createElement(F.d,{disabled:t,primary:!0,type:"submit"},"Save")," ",y.a.createElement(F.d,{onClick:a},"Cancel")))}})}function _a(e){return{getHotel:function(t){return e.get("/hotels/".concat(t)).then(function(e){return e.data.data})},createContact:function(t,a){return e.post("/hotel-contacts",Object(k.a)({hotel_id:t},a)).then(function(e){return e.data.data})}}}var Sa=Object(C.b)(function(e,t){var a=t.hotelId,n=At(e).hotels;return{isFetching:n.isFetching,hotel:n.getItem(a)}},function(e){return{getHotel:function(t){return e((a=t,function(e,t,n){var r=n.xhr;return e(Pt.item.request()),_a(r).getHotel(a).then(function(t){return e(Pt.item.success(t)),t}).catch(function(t){return e(Pt.item.failure(t)),Promise.reject(t)})}));var a}}})(function(e){var t=e.isFetching,a=e.hotel,n=e.getHotel,r=e.hotelId,l=e.render;return Object(S.useEffect)(function(){r&&n(r)},[r,n]),y.a.createElement(S.Fragment,null,l({hotel:a,isFetching:t,hotelId:r,getHotel:n}))});var ya=be(function(e){var t=e.hotelId,a=e.navigate,n=e.xhr,r=Object(ga.c)(),l=Object(se.a)(r,3),c=l[0],i=l[1],o=l[2];return t?y.a.createElement(Sa,{hotelId:t,render:function(e){var r=e.hotel,l=e.isFetching,u=e.getHotel;if(l)return"Loading...";if(!r)return a&&a("/hotels"),null;var s=r.name,m=r.stars,d=r.extra_bed_child_age_start,E=r.extra_bed_child_age_end,f=r.meal_plans,h=r.room_types,g=r.location,p=r.contacts,b=r.payment_preference;return y.a.createElement("div",null,y.a.createElement(P.a,{to:".."},"Back"),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement("h3",null,s," \u2022 ",g.short_name," \u2022 ",m," Star"),y.a.createElement("dl",null,y.a.createElement("dt",null,"Meal Plans:"),y.a.createElement("dd",null,f.map(function(e){return e.name}).join(" \u2022 ")),y.a.createElement("dt",null,"Room Types:"),y.a.createElement("dd",null,h.map(function(e){return"".concat(e.name,"(").concat(e.allowed_extra_beds," AEBs)")}).join(" \u2022 ")),y.a.createElement("dt",null,"Payment Preference"),y.a.createElement("dd",null,b?b.name:"NOT SET"),y.a.createElement("dt",null,"Extra bed child ages:"),y.a.createElement("dd",null,"From ",d," to"," ",E," years"))),y.a.createElement(xe,{sm:"auto",xs:12},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Contacts"),y.a.createElement("ul",null,(p||[]).map(function(e){return y.a.createElement("li",{key:e.id},e.name," ",e.phone_number,"<",e.email,">")})),y.a.createElement(ga.a,{open:c,onClose:o,closeButton:!0},y.a.createElement(ga.a.Header,null,y.a.createElement(ga.a.Title,null,"Add Contact")),y.a.createElement(ga.a.Body,null,y.a.createElement(va,{onCancel:o,onCreate:function(){var e=Object(Rt.a)(Ht.a.mark(function e(a){var r,l,c,i;return Ht.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.name,l=a.email,c=a.phone_number,i=a.country,e.abrupt("return",_a(n).createContact(t,{name:r,email:l,phone_number:c,country_id:i?i.id:void 0}).then(function(e){return u(t),e}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}))),y.a.createElement(F.d,{onClick:i},"Add Contact")))),y.a.createElement("hr",null),y.a.createElement("div",null,y.a.createElement("div",{className:"clearfix mb-4"},y.a.createElement(P.a,{to:"add-prices",className:"btn btn-primary float-right"},"Add Prices"),y.a.createElement("h4",null,"Prices")),y.a.createElement(P.e,null,y.a.createElement(ha,{path:"add-prices",hotel:r}),y.a.createElement(Lt,{path:"/",hotel:r}))))}}):(a&&a("/hotels"),null)}),Ta="LOCATIONS_STATE",ja={isFetching:!0,state:Ye()},Ca={list:Object(A.createAsyncAction)("@LOCATIONS/LIST_FETCH_REQUEST","@LOCATIONS/LIST_FETCH_SUCCESS","@LOCATIONS/LIST_FETCH_FAILED")()},Oa=Re(ja,Ca);function wa(e){var t=e[Ta];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Na(e){return{getLocations:function(t){return e.get("/locations",{params:t}).then(function(e){return e.data})},getCountries:function(t){return e.get("/locations/countries",{params:t}).then(function(e){return e.data.data})},getStates:function(t){return e.get("/locations/states",{params:t}).then(function(e){return e.data.data})},getCities:function(t){return e.get("/locations/cities",{params:t}).then(function(e){return e.data.data})}}}var Pa=Object(C.b)(function(e){var t=wa(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,locations:t.get()})},function(e){return{getLocations:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Ca.list.request()),Na(r).getLocations(e).then(function(e){return t(Ca.list.success(e)),e.data}).catch(function(e){return t(Ca.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getLocations,a=e.locations,n=e.total,r=e.from,l=e.to,c=e.isFetching,i=e.currentPage,o=e.lastPage,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:i})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Locations")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:i,lastPage:o,isFetching:c,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:c},y.a.createElement(F.l,{striped:!0,bordered:!0,headers:["Name","Latitude","Longitude"],responsive:!0,rows:a.map(function(e){return[e.name,e.latitude,e.longitude]})})))}),Fa=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Na(t).getLocations({q:e}).then(function(e){return e.data})}}))}),xa=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Na(t).getCountries({q:e})}}))}),qa=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Na(t).getStates({q:e})}}))}),ka=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Na(t).getCities({q:e})}}))}),Aa=q.object().shape({country:q.object().required("Country field is required"),latitue:q.string(),longitude:q.string()}),Ia={city:void 0,state:void 0,country:void 0,latitude:"",longitude:""};var Da=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Location")),y.a.createElement(x.e,{initialValues:Ia,validationSchema:Aa,onSubmit:function(e,n){n.setStatus();var r=e.country,l=e.state,c=e.city,i=e.latitude,o=e.longitude;t.post("/locations",{country:r?r.id:void 0,state:l?l.name:void 0,city:c?c.name:void 0,latitude:i,longitude:o}).then(function(){a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status,n=(e.values,e.setFieldValue);return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Location"),y.a.createElement(Z,{name:"country",render:function(e){var t=e.field;return y.a.createElement(xa,Object.assign({},t,{multiple:!1,label:"Country",placeholder:"Type to search.. (e.g. India)",onChange:function(e,t){n(t,e)}}))}}),y.a.createElement(Z,{name:"state",render:function(e){var t=e.field;return y.a.createElement(qa,Object.assign({},t,{multiple:!1,label:"State",onChange:function(e,t){return n(t,e)},placeholder:"Type to search.. (e.g. Rajasthan)",creatable:!0}))}}),y.a.createElement(Z,{name:"city",render:function(e){var t=e.field;return y.a.createElement(ka,Object.assign({},t,{multiple:!1,label:"City",onChange:function(e,t){return n(t,e)},placeholder:"Type to search.. (e.g. Jaipur)",creatable:!0}))}}),y.a.createElement(ee,{name:"latitude",label:"Latitude",placeholder:"27\xb0 2' 9.6252'' N"}),y.a.createElement(ee,{name:"longitude",label:"Longitude",placeholder:"88\xb0 15' 45.6192'' E"}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Ma(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"float-right btn"},"New Location"),y.a.createElement("h2",null,"Locations"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Da,{path:"/new"}),y.a.createElement(Pa,{path:"/"})))}var Ya="HOTEL_PAYMENT_PREFERENCES_STATE",Ha={isFetching:!0,state:Ye()},Ra={list:Object(A.createAsyncAction)("@HOTEL_PAYMENT_PREFERENCES/LIST_FETCH_REQUEST","@HOTEL_PAYMENT_PREFERENCES/LIST_FETCH_SUCCESS","@HOTEL_PAYMENT_PREFERENCES/LIST_FETCH_FAILED")()},La=Re(Ha,Ra);function Ua(e){var t=e[Ya];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Va(e){return{getHotelPaymentPreferences:function(t){return e.get("/hotel-payment-preferences",{params:t}).then(function(e){return e.data})},getHotelPaymentReferences:function(t){return e.get("/hotel-payment-preferences/references",{params:t}).then(function(e){return e.data})}}}var Ba=Object(C.b)(function(e){var t=Ua(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,hotelPaymentPreferences:t.get()})},function(e){return{getHotelPaymentPreferences:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Ra.list.request()),Va(r).getHotelPaymentPreferences(e).then(function(e){return t(Ra.list.success(e)),e.data}).catch(function(e){return t(Ra.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getHotelPaymentPreferences,a=e.hotelPaymentPreferences,n=e.total,r=e.from,l=e.to,c=e.isFetching,i=e.currentPage,o=e.lastPage,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:i})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Hotel Payment Preferences List")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:i,lastPage:o,isFetching:c,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:c},y.a.createElement(F.l,{headers:["Description"],bordered:!0,striped:!0,rows:a.map(function(e){return[e.name]})})))}),Qa=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Va(t).getHotelPaymentPreferences({q:e}).then(function(e){return e.data})}}))}),Ga=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Va(t).getHotelPaymentReferences({q:e}).then(function(e){return e.data})}}))}),Ka=q.object().shape({breakdowns:q.array().of(q.object().shape({reference:q.object().required("Reference field is required"),day_offset:q.number().integer().required("Day offset field is required"),amount_share:q.number().integer().positive("Amount share should be positive integer").max(100,"Amount share can not be greater then 100").required("Amount share field is required")})).min(1,"Atleast on breakdown is required.")}),Wa={breakdowns:[{reference:void 0,day_offset:0,amount_share:100}]};var Ja=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Trip Stage")),y.a.createElement(x.e,{initialValues:Wa,validationSchema:Ka,onSubmit:function(e,n){n.setStatus();var r=e.breakdowns.reduce(function(e,t){return e+t.amount_share},0);return 100!==r?(n.setStatus("Total amount share(".concat(r,") should be 100%")),void n.setSubmitting(!1)):t.post("/hotel-payment-preferences",{breakdowns:e.breakdowns.map(function(e){return Object(k.a)({},e,{reference:e.reference?e.reference.id:null})})}).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status,n=e.values,r=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add new Hotel Payment Preferences"),y.a.createElement(x.c,{name:"breakdowns",render:function(e){var t=e.name,a=e.push,l=e.remove;return y.a.createElement("ul",{className:"list"},n.breakdowns.map(function(e,a,n){return y.a.createElement(Fe,{as:"li",key:a},y.a.createElement(xe,{md:3},y.a.createElement(Z,{name:"".concat(t,".").concat(a,".reference"),render:function(e){var t=e.field;return y.a.createElement(Ga,Object.assign({},t,{label:"Reference Event",required:!0,fetchOnMount:!0,multiple:!1,onChange:function(e,t){return r(t,e)}}))}})),y.a.createElement(xe,{md:3},y.a.createElement(ee,{label:"Day offset from reference",name:"".concat(t,".").concat(a,".day_offset"),required:!0,type:"number"})),y.a.createElement(xe,{md:3},y.a.createElement(ee,{label:"Amount share from total amount",name:"".concat(t,".").concat(a,".amount_share"),required:!0,type:"number",min:1,max:100})),y.a.createElement(xe,{md:3,className:"d-flex align-items-center"},n.length>1?y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return l(a)}},"\xd7 Remove"):null))}),y.a.createElement("li",{key:"add_more"},y.a.createElement(F.d,{onClick:function(){return a({amount_share:100-n.breakdowns[0].amount_share})}},"+ Add More")))}}),a?y.a.createElement("div",{className:"text--error"},a):null,y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function za(e){return y.a.createElement(V,null,y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement("h2",{className:"white-space-pre"},"Hotel Payment Preferences")),y.a.createElement(xe,{className:"d-flex align-items-center justify-content-end"},y.a.createElement(P.a,{to:"new",className:"btn"},"New Hotel Payment Preference"))),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Ja,{path:"/new"}),y.a.createElement(Ba,{path:"/"})))}var $a=q.object().shape({name:q.string().required("Name field is required"),stars:q.number().positive("Star rating field should a positive integer.").integer("Star rating field should be positive integer").required("Stars rating field is required"),eb_child_age_start:q.number().positive("Child start age should be a positive number").integer("Child start age should be an integer").required("Child start age is required"),eb_child_age_end:q.number().positive("Child end age should be a positive number").integer("Child end age should be an integer").required("Child end age is required"),meal_plans:q.array().min(1,"Please select atleast one meal plan"),room_types:q.array().of(q.object().shape({room_types:q.array().min(1,"Please select atleast one room type").required("Please select a room type"),allowed_extra_beds:q.number().typeError("Allowed extra bed must be a number").integer("Allowed extra beds should be an integer").min(0,"Allowed extra beds should not be negative").required("Allowed extra beds field is required")})).min(1,"Please select atleast one room type"),location:q.object().required("Location field is required")}),Xa={name:"",stars:1,eb_child_age_start:6,eb_child_age_end:12,meal_plans:[],room_types:[{room_types:[],allowed_extra_beds:1}],location:void 0};var Za=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Hotel")),y.a.createElement(x.e,{initialValues:Xa,validationSchema:$a,onSubmit:function(e,n){n.setStatus(),t.post("/hotels",Object(k.a)({},e,{meal_plans:e.meal_plans.map(function(e){return e.id}),room_types:e.room_types.reduce(function(e,t){var a=t.room_types,n=t.allowed_extra_beds;return e.concat(a.map(function(e){return{room_type_id:e.id,allowed_extra_beds:n}}))},[]),location_id:e.location?e.location.id:void 0,payment_preference_id:e.payment_preference?e.payment_preference.id:void 0})).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,a=e.setFieldValue,n=e.values,r=e.status;return y.a.createElement(x.d,{noValidate:!0},r?y.a.createElement("div",null,r):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add Hotel"),y.a.createElement(Fe,null,y.a.createElement(xe,{lg:!0,md:4,sm:6,xs:12},y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Taj Hotel",required:!0})),y.a.createElement(xe,{lg:!0,md:4,sm:6,xs:12},y.a.createElement(Z,{name:"location",render:function(e){var t=e.field;return y.a.createElement(Fa,Object.assign({},t,{label:"Location",multiple:!1,onChange:function(e,t){return a(t,e)}}))}})),y.a.createElement(xe,{lg:!0,md:4,sm:6},y.a.createElement(Z,{name:"payment_preference",render:function(e){var t=e.field;return y.a.createElement(Qa,Object.assign({},t,{label:"Payment Preference",multiple:!1,onChange:function(e,t){return a(t,e)},fetchOnMount:!0}))}})),y.a.createElement(xe,{lg:!0,md:4,sm:4,xs:8},y.a.createElement(Z,{name:"meal_plans",render:function(e){var t=e.field;return y.a.createElement(Jt,Object.assign({},t,{label:"Meal Plan(s) served",onChange:function(e,t){return a(t,e)},fetchOnMount:!0}))}})),y.a.createElement(xe,{lg:1,md:4,sm:2,xs:4},y.a.createElement(ee,{label:"Stars",name:"stars",type:"number",required:!0,max:5,min:1}))),y.a.createElement(x.c,{name:"room_types",render:function(e){var t=e.name,r=e.push,l=e.remove;return y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Room Type(s) Available"),y.a.createElement("ul",{className:"list"},n.room_types.map(function(e,n,r){return y.a.createElement("li",{key:n},y.a.createElement(Fe,null,y.a.createElement(xe,{xs:"auto"},y.a.createElement(Z,{name:"".concat(t,".").concat(n,".room_types"),render:function(e){var t=e.field;return y.a.createElement(ia,Object.assign({},t,{label:"Room Types",fetchOnMount:!0,onChange:function(e,t){return a(t,e)}}))}})),y.a.createElement(xe,{xs:"auto"},y.a.createElement(ee,{label:"Allowed extra bed(s)",type:"number",name:"".concat(t,".").concat(n,".allowed_extra_beds"),value:e.allowed_extra_beds,min:0})),y.a.createElement(xe,{xs:"auto",className:"d-flex align-items-center"},r.length>1?y.a.createElement(F.d,{onClick:function(e){return l(n)},className:"btn--secondary"},"\xd7 Remove"):null)))}),y.a.createElement("li",null,y.a.createElement(F.d,{onClick:function(e){return r(n.room_types[0])}},"+ Add More Room Types"))))}}),y.a.createElement(Fe,null,y.a.createElement(xe,{sm:"auto"},y.a.createElement(ee,{label:"Extra bed child start age",name:"eb_child_age_start",required:!0,type:"number",min:1})),y.a.createElement(xe,{sm:"auto"},y.a.createElement(ee,{label:"Extra bed child end age",name:"eb_child_age_end",required:!0,type:"number",min:1}))),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});var en=q.object().shape({hotels:q.array().of(q.object().shape({start_date:q.string().required("Start Date field is required."),no_of_nights:q.number().required("Number of nights field is required").integer("Number of nights should be an integer").positive("Number of nights should be a positive number"),hotel:q.object().required("Hotel field is required"),meal_plan:q.object().required("Meal Plan field is required"),room_details:q.array().of(q.object().shape({room_type:q.object().required("Room type field is required"),adults_with_extra_bed:q.number().integer("Adult with extra bed should be an interger").required("Adult with extra bed is required"),children_with_extra_bed:q.number().integer("Child with extra bed should be an integer").required("Child with extra bed is required"),children_without_extra_bed:q.number().integer("Child without extra bed should be an integer").required("Child without extra bed is required"),no_of_rooms:q.number().positive("Number of rooms should be a positive number").integer("Number of room should be an integer").required("Number of rooms is required")})).min(1)}))}),tn={hotels:[{start_date:"",no_of_nights:1,hotel:void 0,meal_plan:void 0,room_details:[{room_type:void 0,adults_with_extra_bed:0,children_with_extra_bed:0,children_without_extra_bed:0,no_of_rooms:1}],calculated_price:void 0,given_price:0,comments:""}]},an=be(function(e){var t=e.initialValues,a=void 0===t?tn:t,n=e.xhr,r=e.onChange,l=e.bookingFrom,c=e.bookingTo;function i(e){r&&r(e.hotels.reduce(function(e,t){return e+parseFloat((t.given_price?t.given_price:0).toString())},0),e.hotels.map(function(e){var t=e.start_date,a=(e.no_of_nights,e.room_details),n=e.hotel,r=e.meal_plan,l=Object(z.a)(e,["start_date","no_of_nights","room_details","hotel","meal_plan"]),c=a&&a.length>0?a[0]:{room_type:void 0},i=c.room_type,o=Object(z.a)(c,["room_type"]);return Object(k.a)({},l,{date:de()(t).hours(12).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),hotel_id:n&&n.id,meal_plan_id:r&&r.id},o,{room_type_id:i&&i.id})}))}Object(F.n)(function(){i(a)});var o=Object(S.useMemo)(function(){for(var e=[],t=de()(c).diff(de()(l),"days"),a=0;a<=t;a++)e.push({id:a,name:de()(l).add(a,"day").format("YYYY-MM-DD")});return e},[l,c]);return y.a.createElement(x.e,{initialValues:a,validationSchema:en,onSubmit:function(e,t){t.setStatus();var a=[],r={hotels:[]};e.hotels.forEach(function(e){var t=e.start_date,n=e.no_of_nights,l=e.hotel,c=e.meal_plan,i=e.room_details;l&&t&&n&&c&&i&&i.length>0&&i.forEach(function(i){if(i.room_type)for(var o=i.room_type,u=i.adults_with_extra_bed,s=i.children_with_extra_bed,m=i.children_without_extra_bed,d=i.no_of_rooms,E=0;E<n;E++)r.hotels.push(Object(k.a)({},e,{start_date:de()(t).add(E,"days").format("YYYY-MM-DD"),no_of_nights:1,room_details:[i]})),a.push({date:de()(t).add(E,"days").hours(12).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),hotel_id:l.id,meal_plan_id:c.id,room_type_id:o.id,adults_with_extra_bed:u,children_with_extra_bed:s,children_without_extra_bed:m,no_of_rooms:d})})}),function(e){return{getPrice:function(t){return e.get("/prices",{params:{hotels:t}}).then(function(e){return e.data})}}}(n).getPrice(a).then(function(e){r.hotels=r.hotels.map(function(t,a){return Object(k.a)({},t,{calculated_price:e.hotel_prices_per_row[a],given_price:e.hotel_prices_per_row[a]})}),t.setValues(r),t.setSubmitting(!1),i(r)}).catch(function(e){t.setStatus(e.message),e.formikErrors&&t.setErrors(e.formikErrors),t.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,n=e.values,r=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement(x.c,{name:"hotels",render:function(e){var u=e.name,s=e.push,m=e.remove;return y.a.createElement("div",null,n.hotels.map(function(e,d){return y.a.createElement("fieldset",{key:d},y.a.createElement(Fe,null,y.a.createElement(xe,{md:3,sm:6},l&&c?y.a.createElement(Z,{name:"".concat(u,".").concat(d,".start_date"),render:function(t){var a=t.field;return y.a.createElement(F.k,Object.assign({},a,{label:"Checkin Date",options:o,searchable:!1,placeholder:"Select a date...",required:!0,onQuery:function(){},value:o.find(function(t){return t.name===e.start_date}),onChange:function(e,t){r(t,e.name)}}))}}):y.a.createElement(da,{label:"Checkin Date",name:"".concat(u,".").concat(d,".start_date"),required:!0})),y.a.createElement(xe,{md:3,sm:6},y.a.createElement(ee,{label:"Number of nights",name:"".concat(u,".").concat(d,".no_of_nights"),type:"number",min:1,max:1e3})),y.a.createElement(xe,{md:3,sm:6},y.a.createElement(Z,{name:"".concat(u,".").concat(d,".hotel"),render:function(e){var t=e.field;return y.a.createElement(Mt,Object.assign({},t,{label:"Hotel",multiple:!1,onChange:function(e,t){return r(t,e)}}))}})),y.a.createElement(xe,{md:3,sm:6},y.a.createElement(Z,{name:"".concat(u,".").concat(d,".meal_plan"),render:function(t){var a=t.field;return y.a.createElement(Jt,Object.assign({},a,{label:"Meal Plan",multiple:!1,searchable:!1,options:e.hotel?e.hotel.meal_plans:[],onChange:function(e,t){return r(t,e)}}))}}))),y.a.createElement("div",null,y.a.createElement(x.c,{name:"".concat(u,".").concat(d,".room_details"),render:function(t){var n=t.name,l=t.push,c=t.remove;return y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Room Details"),y.a.createElement("ol",{className:"list"},e.room_details.map(function(t,a){return y.a.createElement("li",{key:a},y.a.createElement(Fe,{key:a,style:{marginTop:"15px"}},y.a.createElement(xe,{md:"auto",sm:6},y.a.createElement(Z,{name:"".concat(n,".").concat(a,".room_type"),render:function(t){var l=t.field;return y.a.createElement(ia,Object.assign({},l,{label:"Room Type",options:e.hotel?e.hotel.room_types:[],searchable:!1,multiple:!1,onChange:function(e,t){r(t,e),e&&e.allowed_extra_beds||(r("".concat(n,".").concat(a,".adults_with_extra_bed"),0),r("".concat(n,".").concat(a,".children_with_extra_bed"),0))}}))}})),y.a.createElement(xe,{md:"auto",sm:6},y.a.createElement(ee,{name:"".concat(n,".").concat(a,".no_of_rooms"),label:"Number of rooms",type:"number",min:1,max:1e3})),y.a.createElement(xe,null,y.a.createElement(ee,{name:"".concat(n,".").concat(a,".adults_with_extra_bed"),label:"Adults with extra bed",type:"number",min:0,max:10,disabled:!t.room_type||!t.room_type.allowed_extra_beds})),y.a.createElement(xe,null,y.a.createElement(ee,{name:"".concat(n,".").concat(a,".children_with_extra_bed"),label:"Children with extra bed",type:"number",min:0,max:10,disabled:!t.room_type||!t.room_type.allowed_extra_beds})),y.a.createElement(xe,null,y.a.createElement(ee,{name:"".concat(n,".").concat(a,".children_without_extra_bed"),label:"Children without extra bed",min:0,max:10,type:"number"})),y.a.createElement(xe,{sm:12},y.a.createElement("div",{className:"button-group"},y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return l(e.room_details[a])}},"+ Duplicate"),e.room_details.length>1?y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return c(a)}},"\xd7 Remove"):null))))}),y.a.createElement("hr",null),y.a.createElement(F.d,{className:"btn--secondary",onClick:function(e){return l(a.hotels[0].room_details[0])}},"+ Add More Room Types")))}})),y.a.createElement(F.g,null,y.a.createElement("b",null,"Get the price for the above hotel query"),y.a.createElement("br",null),y.a.createElement("br",null),y.a.createElement("div",{className:"button-group"},y.a.createElement(F.d,{disabled:t,type:"submit"},"Get Price")," ",void 0!==e.calculated_price?y.a.createElement(F.d,{disabled:!0},null===e.calculated_price?"NOT SET":e.calculated_price):null)),y.a.createElement(Fe,null,y.a.createElement(xe,{sm:"auto"},y.a.createElement(F.g,null,y.a.createElement("label",null,"Given Price"),y.a.createElement(X,{name:"".concat(u,".").concat(d,".given_price"),type:"number",value:e.given_price,onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)&&(t=void 0),i({hotels:n.hotels.map(function(e,a){return a!==d?e:Object(k.a)({},e,{given_price:t})})}),r(e.target.name,t)},min:0}))),y.a.createElement(xe,null,y.a.createElement(F.g,null,y.a.createElement("label",null,"Comments"),y.a.createElement(X,{name:"".concat(u,".").concat(d,".comments"),as:"textarea",maxLength:191,value:e.comments,placeholder:"Regarding pricing difference or any other",onChange:function(e){var t=e.target.value;i({hotels:n.hotels.map(function(e,a){return a!==d?e:Object(k.a)({},e,{comments:t})})}),r(e.target.name,t)}})))),y.a.createElement("hr",null),y.a.createElement("div",{className:"button-group form-group"},y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return s(e)}},"+ Duplicate This Query"),n.hotels.length>1?y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return m(d)}},"\xd7 Remove This Query"):null))}),y.a.createElement("div",null,y.a.createElement(F.d,{onClick:function(){return s(a.hotels[0])}},"+ Add More Night and Hotels")))}}))}})});function nn(e){var t=Object(S.useState)(0),a=Object(se.a)(t,2),n=a[0],r=a[1];return y.a.createElement("div",null,y.a.createElement("div",{className:"flex align-items-center mb-8"},y.a.createElement(P.a,{to:"..",className:"mr-4 text-blue-600 hover:text-blue-800 text-lg px-2 border rounded-full"},y.a.createElement(F.h.ChevronDownIcon,{className:"rotate-90"})),y.a.createElement("h3",{className:"m-0"},"Calculate Hotel Prices")),y.a.createElement("p",null,"Please enter the desired hotel configuration query and press get price to get the prices."),y.a.createElement(an,{onChange:function(e){return r(e)}}),y.a.createElement("footer",{className:"mt-8 pb-8"},y.a.createElement("h4",null,y.a.createElement("mark",null,"Total Cost Price: ",n))))}function rn(e){return y.a.createElement(V,null,y.a.createElement("div",{className:"float-right button-group"},y.a.createElement(P.a,{to:"new",className:"btn"},"New Hotel"),y.a.createElement(P.a,{to:"calculate-price",className:"btn"},"Calculate Price")),y.a.createElement("h2",null,"Hotels"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Za,{path:"new"}),y.a.createElement(ya,{path:":hotelId/*"}),y.a.createElement(Dt,{path:"/"}),y.a.createElement(nn,{path:"calculate-price"})))}var ln="CAB_TYPES_STATE",cn={isFetching:!0,state:Ye()},on={list:Object(A.createAsyncAction)("@CAB_TYPES/LIST_FETCH_REQUEST","@CAB_TYPES/LIST_FETCH_SUCCESS","@CAB_TYPES/LIST_FETCH_FAILED")()},un=Re(cn,on);function sn(e){var t=e[ln];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function mn(e){return{getCabTypes:function(t){return e.get("/cab-types",{params:t}).then(function(e){return e.data})}}}var dn=Object(C.b)(function(e){var t=sn(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,cabTypes:t.get()})},function(e){return{getCabTypes:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(on.list.request()),mn(r).getCabTypes(e).then(function(e){var a=e.data,n=e.meta;return t(on.list.success({data:a,meta:n})),a}).catch(function(e){return t(on.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getCabTypes,a=e.cabTypes,n=e.isFetching,r=e.total,l=e.currentPage,c=e.lastPage,i=e.from,o=e.to,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:l})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Cab Types")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:r,from:i,to:o,currentPage:l,lastPage:c,isFetching:n,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{isFetching:n,total:r},y.a.createElement(F.l,{headers:["Name","Capacity"],alignCols:{1:"right"},bordered:!0,striped:!0,rows:a.map(function(e){return[e.name,e.capacity]})})))}),En=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return mn(t).getCabTypes({q:e}).then(function(e){return e.data})}}))}),fn=q.object().shape({name:q.string().required("Name field is required"),capacity:q.number().positive("Capacity should be a positive integer").integer("Capacity should be a positive integer").required("Capacity field is required")}),hn={name:"",capacity:4};var gn=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Cab Type")),y.a.createElement(x.e,{initialValues:hn,validationSchema:fn,onSubmit:function(e,n){return n.setStatus(),t.post("/cab-types",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add Cab Type"),y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Medium",required:!0}),y.a.createElement(ee,{label:"Capacity",name:"capacity",required:!0,type:"number",min:1}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function pn(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"btn float-right"},"New Cab Type"),y.a.createElement("h2",null,"Cab Types"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(gn,{path:"/new"}),y.a.createElement(dn,{path:"/"})))}var bn="CAB_LIST_STATE",vn={isFetching:!0,state:Ye()},_n={list:Object(A.createAsyncAction)("@CABS/LIST_FETCH_REQUEST","@CABS/LIST_FETCH_SUCCESS","@CABS/LIST_FETCH_FAILED")(),item:Object(A.createAsyncAction)("@CABS/ITEM_FETCH_REQUEST","@CABS/ITEM_FETCH_SUCCESS","@CABS/ITEM_FETCH_FAILED")()},Sn=Re(vn,_n);function yn(e){var t=e[bn];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}var Tn=Object(C.b)(function(e,t){var a=yn(e);return{isFetching:a.isFetching,cab:a.getItem(t.cabId)}},function(e){return{getCab:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(_n.item.request()),function(e){return{getCab:function(t){return e.get("/cabs/".concat(t)).then(function(e){return e.data.data})}}}(r).getCab(e).then(function(e){return t(_n.item.success(e)),e}).catch(function(e){return t(_n.item.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getCab,a=e.cab,n=e.isFetching,r=e.cabId,l=e.render;return Object(S.useEffect)(function(){r&&t(r)},[]),y.a.createElement(S.Fragment,null,l({cab:a,isFetching:n,cabId:r}))});function jn(e){var t=e.cabId,a=e.navigate;return y.a.createElement(Tn,{cabId:t,render:function(e){var n=e.cab,r=e.isFetching;return t?y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,n?n.number_plate:""," Cab")),y.a.createElement(P.a,{to:".."},"Back to list"),r?"Loading...":n?y.a.createElement("div",null,n.name," - ",n.cab_type.name," - ",n.number_plate,y.a.createElement("br",null),"Created at:"," ",de.a.utc(n.created_at).local().toLocaleString(),y.a.createElement("br",null)):y.a.createElement(P.d,{noThrow:!0,to:"/cabs"})):(a&&a("/cabs"),null)}})}function Cn(e){return{getCabs:function(t){return e.get("/cabs",{params:t}).then(function(e){return e.data})}}}var On=Object(C.b)(function(e){var t=yn(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,cabs:t.get()})},function(e){return{getCabs:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(_n.list.request()),Cn(r).getCabs(e).then(function(e){var a=e.data,n=e.meta;return t(_n.list.success({data:a,meta:n})),a}).catch(function(e){return t(_n.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getCabs,a=e.cabs,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Cabs")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(Ze,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:c,lastPage:i,isFetching:o,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(Je,{isFetching:o,total:n},y.a.createElement(F.l,{headers:["Name","Number Plate"],striped:!0,bordered:!0,rows:a.map(function(e){return[y.a.createElement(P.a,{to:e.id.toString()},e.name),e.number_plate]})})))}),wn=(be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0,fetch:function(e){return Cn(t).getCabs({q:e}).then(function(e){return e.data})}},a))}),q.object().shape({name:q.string().required("Name for the cab is required."),number_plate:q.string().required("Number Plate is required").max(299,"Maximum 299 characters allowed"),cab_type:q.object().required("Cab type is required")})),Nn={name:"",number_plate:"",cab_type:void 0};var Pn=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement("div",null,y.a.createElement(x.e,{initialValues:Nn,validationSchema:wn,onSubmit:function(e,n){var r=e.number_plate,l=e.cab_type,c=e.name;if(r&&l&&c)return n.setStatus(),t.post("/cabs",{name:c,number_plate:r,cab_type_id:l.id}).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)});n.setStatus("Please fill the required fields")},render:function(e){var t=e.isSubmitting,a=e.status,n=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Cab"),y.a.createElement(ee,{label:"Name",name:"name",required:!0,placeholder:"Suzuki Wagon R"}),y.a.createElement(Z,{name:"cab_type",render:function(e){var t=e.field;return y.a.createElement(En,Object.assign({},t,{label:"Cab Type",multiple:!1,placeholder:"Type to search... (e.g. Wagon)",onChange:function(e,t){return n(t,e)}}))}}),y.a.createElement(ee,{label:"Number Plate",name:"number_plate",required:!0,placeholder:"RJ18 CC 7838"}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Submit"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Fn(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"btn float-right"},"Add New Cab"),y.a.createElement("h2",null,"Cabs"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Pn,{path:"/new"}),y.a.createElement(jn,{path:":cabId"}),y.a.createElement(On,{path:"/"})))}var xn="TRIP_LIST_STATE",qn={isFetching:!0,state:Ye()},kn={list:Object(A.createAsyncAction)("@TRIPS/LIST_FETCH_REQUEST","@TRIPS/LIST_FETCH_SUCCESS","@TRIPS/LIST_FETCH_FAILED")(),item:Object(A.createAsyncAction)("@TRIPS/ITEM_FETCH_REQUEST","@TRIPS/ITEM_FETCH_SUCCESS","@TRIPS/ITEM_FETCH_FAILED")()},An=Re(qn,kn);function In(e){var t=e[xn];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}var Dn=Object(C.b)(function(e){var t=In(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,trips:t.get()})},function(e){return{getTrips:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(kn.list.request()),function(e){return{getTrips:function(t){return e.get("/trips",{params:t}).then(function(e){return e.data})}}}(r).getTrips(e).then(function(e){return t(kn.list.success(e)),e.data}).catch(function(e){return t(kn.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.trips,a=e.getTrips,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){a({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"List of trips")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),a(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:c,lastPage:i,isFetching:o,onChange:function(e){return a(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:o},y.a.createElement(F.l,{striped:!0,bordered:!0,responsive:!0,headers:["ID","Dates","Stages","Destinations","Traveler","Pax"],rows:t.map(function(e){var t=e.id,a=e.trip_source,n=e.trip_id,r=e.start_date,l=e.end_date,c=e.locations,i=e.no_of_adults,o=e.children,u=e.contact,s=e.latest_stage;return[y.a.createElement(P.a,{to:t.toString()},a.short_name,"-",n||t),"".concat(de.a.utc(r).local().format("DD/MM/YYYY")," to ").concat(de.a.utc(l).local().format("DD/MM/YYYY")),s?s.name:"Initiated",c.map(function(e){return e.short_name}).join(" \u2022\xa0"),u?y.a.createElement("div",null,u.name,y.a.createElement("br",null),y.a.createElement("a",{href:"tel:".concat(u.phone_number),className:"btn--icon"},y.a.createElement(F.h.PhoneIcon,{title:"Call to ".concat(u.name," on ").concat(u.phone_number)})),y.a.createElement("a",{href:"mailto:".concat(u.email),className:"btn--icon"},y.a.createElement(F.h.MailIcon,{title:"Send Email to ".concat(u.name," at ").concat(u.email)}))):null,"".concat(i," Adults").concat(o?" with "+o:"")]})})))}),Mn="HOTEL_BOOKING_STAGES_STATE",Yn={isFetching:!0,state:Ye()},Hn={list:Object(A.createAsyncAction)("@HOTEL_BOOKING_STAGES/LIST_FETCH_REQUEST","@HOTEL_BOOKING_STAGES/LIST_FETCH_SUCCESS","@HOTEL_BOOKING_STAGES/LIST_FETCH_FAILED")()},Rn=Re(Yn,Hn);function Ln(e){var t=e[Mn];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function Un(e){return{getHotelBookingStages:function(t){return e.get("/hotel-booking-stages",{params:t}).then(function(e){return e.data})}}}var Vn=Object(C.b)(function(e){var t=Ln(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,hotelBookingStages:t.get()})},function(e){return{getHotelBookingStages:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Hn.list.request()),Un(r).getHotelBookingStages(e).then(function(e){var a=e.data,n=e.meta;return t(Hn.list.success({data:a,meta:n})),a}).catch(function(e){return t(Hn.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getHotelBookingStages,a=e.hotelBookingStages,n=e.total,r=e.from,l=e.to,c=e.isFetching,i=e.currentPage,o=e.lastPage,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:i})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Hotel Booking Stages")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:i,lastPage:o,isFetching:c,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:c},y.a.createElement(F.l,{bordered:!0,striped:!0,headers:["Name","Description"],rows:a.map(function(e){return[e.name,e.description]})})))}),Bn=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return Un(t).getHotelBookingStages({q:e}).then(function(e){return e.data})}}))}),Qn=q.object().shape({name:q.string().required("Name field is required"),description:q.string().required("Description field is required")}),Gn={name:"",description:""};var Kn=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Hotel Booking Stage")),y.a.createElement(x.e,{initialValues:Gn,validationSchema:Qn,onSubmit:function(e,n){n.setStatus(),t.post("/hotel-booking-stages",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Hotel Booking Stage"),y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Booked",required:!0}),y.a.createElement(ee,{label:"Description",name:"description",placeholder:"Hotel Booked",required:!0}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function Wn(e){return y.a.createElement(V,null,y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement("h2",{className:"white-space-pre"},"Hotel Booking Stages")),y.a.createElement(xe,{className:"d-flex align-items-center justify-content-end"},y.a.createElement(P.a,{to:"new",className:"btn"},"New Hotel Booking Stage"))),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Kn,{path:"/new"}),y.a.createElement(Vn,{path:"/"})))}function Jn(e){return{getQuotes:function(t,a){return e.get("/trips/".concat(t,"/quotes"),{params:a}).then(function(e){return e.data.data})},giveQuote:function(t){return e.post("/given-quotes",t).then(function(e){return e.data.data})},getInstalments:function(t){return e.get("/quote-instalments/".concat(t)).then(function(e){return e.data})},changeHotelBookingStage:function(t,a){return e.patch("/quote-hotel-booking-stages",{items:[t],stage:a})}}}var zn=be(function(e){var t=e.xhr,a=e.quoteHotel,n=a.id,r=a.latest_booking_stage,l=Object(S.useState)(!1),c=Object(se.a)(l,2),i=c[0],o=c[1];return i?y.a.createElement("span",null,y.a.createElement(x.e,{initialValues:{stage:r},validationSchema:q.object().shape({stage:q.object().required("Stage field is required")}),onSubmit:function(e,a){e.stage?Jn(t).changeHotelBookingStage(n,e.stage.id).then(function(){window.location=window.location}):a.setSubmitting(!1)},render:function(e){var t=e.isSubmitting,a=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Change Booking Stage"),y.a.createElement(Z,{name:"stage",render:function(e){var t=e.field;return y.a.createElement(Bn,Object.assign({},t,{label:"Select the booking stage",multiple:!1,fetchOnMount:!0,onChange:function(e,t){return a(t,e)}}))}}),y.a.createElement("footer",null,y.a.createElement(F.d,{disabled:t,type:"submit"},"Save"),y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return o(!1)}},"Cancel"))))}})):y.a.createElement("span",null,r?r.name:null,y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return o(!0)}},"\u270e"))}),$n=q.object().shape({given_price:q.number().positive("Given price should a positive number").required("Give price field is required"),comments:q.string()}).required("Quote data is required"),Xn=be(function(e){var t=e.quote,a=e.xhr,n=e.readOnly,r=void 0!==n&&n,l=e.navigate,c=e.showHotelBookingStatus,i=t.id,o=t.total_price,u=t.hotels,s=t.cabs,m=t.comments,d=t.created_by,E=t.created_at,f=t.trip_id,h=Object(F.m)(),g=Object(se.a)(h,3),p=g[0],b=g[1],v=g[2],_=Object(F.o)(function(){return Jn(a).getInstalments(i).then(function(e){return e.data})}),S=Object(se.a)(_,3),T=S[0],j=S[1],C=S[2].isFetching;return y.a.createElement("div",null,y.a.createElement("header",{className:"mb-4"},y.a.createElement("h6",null,"Cost Price: ",y.a.createElement(F.h.RupeeIcon,null)," ",J(o)," /-"),y.a.createElement("blockquote",null,m?y.a.createElement("p",null,m):null,y.a.createElement("em",null,"on"," ",de.a.utc(E).local().format("DD MMM, YYYY [at] hh:mm A")," ","by ",d.name,"<",d.email,">"))),y.a.createElement("section",null,y.a.createElement("h6",null,y.a.createElement("span",{className:"inline-flex w-8 h-8 align-items-center justify-content-center bg-primary-100 rounded-full mr-2"},y.a.createElement(F.h.BedIcon,null)),"Accommodation"),y.a.createElement(F.l,{striped:!0,bordered:!0,caption:"Bellow are the details of daywise hotel accomodation and their prices",responsive:!0,headers:["Date","Hotels","Meal Plan","Rooms","Price"].concat(c?["Booking Stage"]:[]),alignCols:{4:"right",5:"center"},rows:u.map(function(e){var t=e.hotel,a=e.date,n=e.meal_plan,r=e.room_type,l=e.no_of_rooms,i=e.comments,o=e.given_price;return[y.a.createElement("span",{className:"white-space-pre"},de.a.utc(a).local().format("DD MMM [\n] YYYY")),y.a.createElement("div",null,y.a.createElement("b",null,t.name),y.a.createElement("br",null),y.a.createElement("small",null,t.location.short_name,", ",t.stars," Star"),i?y.a.createElement("blockquote",null,i):null),n.name,y.a.createElement("div",null,r.name,y.a.createElement("br",null),y.a.createElement("small",null,l," Rooms")),J(o)].concat(c?[y.a.createElement(zn,{quoteHotel:e})]:[])})})),y.a.createElement("section",null,y.a.createElement("h6",null,y.a.createElement("span",{className:"inline-flex w-8 h-8 align-items-center justify-content-center bg-primary-100 rounded-full mr-2"},y.a.createElement(F.h.BusIcon,null)),"Transportation"),y.a.createElement(F.l,{striped:!0,bordered:!0,caption:"Bellow are the details for the daywise transportation and their prices",responsive:!0,headers:["Date","Service","Cabs","Price"],alignCols:{3:"right"},rows:s.map(function(e){var t=e.date,a=e.cab_type,n=e.transport_service,r=e.no_of_cabs,l=e.comments,c=e.given_price;return[y.a.createElement("span",{className:"white-space-pre"},de.a.utc(t).local().format("DD MMM [\n] YYYY")),y.a.createElement("div",null,n.name,l?y.a.createElement("blockquote",null,l):null),y.a.createElement("div",null,a.name,y.a.createElement("br",null),y.a.createElement("small",null,r," cabs")),J(c)]})})),r?null:y.a.createElement("footer",null,y.a.createElement("div",{className:"button-group"},y.a.createElement(F.d,{onClick:b},"Give this quote"),y.a.createElement(F.e,{open:p,onClose:v},y.a.createElement(F.e.Header,null,y.a.createElement(F.e.Title,{as:"h4"},"Give this quote (price: ",t.total_price,")")),y.a.createElement(F.e.Body,null,y.a.createElement(x.e,{initialValues:{comments:"",factor:1.1,given_price:Math.ceil(1.1*t.total_price)},validationSchema:$n,onSubmit:function(e,t){var n,r,c;window.confirm("Are you sure you want to give this quote to the customer?")?(n=i,r=e.given_price,c=e.comments,Jn(a).giveQuote({given_price:r,quote_id:n,comments:c})).then(v).then(function(){l&&l("../given-quotes")}):t.setSubmitting(!1)},render:function(e){var a=e.isSubmitting,n=e.values,r=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement(F.g,null,y.a.createElement("label",null,"Multiplication Factor"),y.a.createElement("select",{name:"factor",value:n.factor,onChange:function(e){r("given_price",Math.ceil(t.total_price*parseFloat(e.target.value))),r(e.target.name,e.target.value)}},y.a.createElement("option",{value:1.1},"1.1"),y.a.createElement("option",{value:1.2},"1.2"),y.a.createElement("option",{value:1.3},"1.3"),y.a.createElement("option",{value:1.4},"1.4"),y.a.createElement("option",{value:1.5},"1.5"))),y.a.createElement(ee,{name:"given_price",label:"Given Price",type:"number"}),y.a.createElement(ee,{name:"comments",as:"textarea",label:"Any Comments",placeholder:"Write comments regarding prices or anything else..."}),y.a.createElement(F.e.Footer,null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:a},"Give Quote"),y.a.createElement(F.d,{onClick:v,className:"btn--secondary"},"Cancel")))}}))),y.a.createElement(F.d,{onClick:j},"Get Instalments for Hotels and Cabs"," ",C?y.a.createElement(We,null):null),y.a.createElement(P.a,{to:"/trips/".concat(f,"/new-quote"),state:{quote:t},className:"btn"},"Edit")),T?y.a.createElement(F.l,{striped:!0,bordered:!0,headers:["Amount","Due Date"],alignCols:{0:"right"},autoWidth:!0,rows:T.map(function(e){return[e.amount.toFixed(2),de.a.utc(e.due_date).local().format("DD/MM/YYYY")]})}):null))});var Zn=be(function(e){var t=e.xhr,a=e.trip,n=e.navigate,r=Object(S.useState)([]),l=Object(se.a)(r,2),c=l[0],i=l[1];return Object(S.useEffect)(function(){Jn(t).getQuotes(a.id).then(i)},[]),y.a.createElement(S.Fragment,null,y.a.createElement("h4",{className:"my-4"},"All Quotes"),0===c.length?y.a.createElement("p",{className:"text-center"},"No quote created for this trip"):y.a.createElement("ol",{className:"list list--bordered"},c.map(function(e){return y.a.createElement("li",{key:e.id},y.a.createElement(Xn,{quote:e,navigate:n,readOnly:!!a.converted_at}))})))});function er(e){return{getGivenQuotes:function(t){return e.get("/given-quotes",{params:t}).then(function(e){return e.data.data})},getInstalments:function(t){return e.get("/given-quote-instalments/".concat(t)).then(function(e){return e.data})}}}var tr=be(function(e){var t=e.givenQuote,a=e.xhr,n=e.readOnly,r=e.showHotelBookingStatus,l=t.id,c=t.given_price,i=t.quote,o=t.comments,u=t.created_by,s=t.created_at,m=Object(F.o)(function(){return er(a).getInstalments(l).then(function(e){return e.data})}),d=Object(se.a)(m,3),E=d[0],f=d[1],h=d[2].isFetching;return y.a.createElement("div",null,y.a.createElement("header",{className:"mb-8"},y.a.createElement("h5",null,"Given Price:"," ",y.a.createElement("mark",null,y.a.createElement(F.h.RupeeIcon,null)," ",J(c)," /-")),y.a.createElement("blockquote",null,o?y.a.createElement("p",null,o):null,y.a.createElement("em",null,"on"," ",de.a.utc(s).local().format("DD MMM, YYYY [at] hh:mm A")," ","by ",u.name,"<",u.email,">"))),y.a.createElement(Xn,{quote:i,readOnly:!0,showHotelBookingStatus:r}),n?null:y.a.createElement(F.d,{onClick:f},"Get Instalments for Customer"," ",h?y.a.createElement(We,null):null),E?y.a.createElement(F.l,{striped:!0,bordered:!0,headers:["Amount","Due Date"],alignCols:{0:"right"},autoWidth:!0,rows:E.map(function(e){return[e.amount.toFixed(2),de.a.utc(e.due_date).local().format("DD/MM/YYYY")]})}):null)});var ar=be(function(e){var t=e.xhr,a=e.trip,n=Object(S.useState)([]),r=Object(se.a)(n,2),l=r[0],c=r[1];return Object(S.useEffect)(function(){er(t).getGivenQuotes({trip_id:a.id}).then(c)},[]),y.a.createElement(S.Fragment,null,y.a.createElement("h4",null,"Given Quotes"),0===l.length?y.a.createElement("p",{className:"text-center"},"No quote given yet"):y.a.createElement("ol",{className:"list list--bordered"},l.map(function(e){return y.a.createElement("li",{key:e.id},y.a.createElement(tr,{givenQuote:e}))})))}),nr="TRANSPORT_SERVICE_PRICES_STATE",rr={isFetching:!0,state:Ye()},lr={list:Object(A.createAsyncAction)("@TRANSPORT_SERVICE_PRICES/LIST_FETCH_REQUEST","@TRANSPORT_SERVICE_PRICES/LIST_FETCH_SUCCESS","@TRANSPORT_SERVICE_PRICES/LIST_FETCH_FAILED")()},cr=Re(rr,lr);function ir(e){var t=e[nr];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}var or=Object(C.b)(function(e){var t=ir(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,transportServicePrices:t.get()})},function(e){return{getTransportServicePrices:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(lr.list.request()),function(e){return{getTransportServicePrices:function(t){return e.get("/cab-prices",{params:t}).then(function(e){return e.data})}}}(r).getTransportServicePrices(e).then(function(e){var a=e.data,n=e.meta;return t(lr.list.success({data:a,meta:n})),a}).catch(function(e){return t(lr.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getTransportServicePrices,a=e.transportServicePrices,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Transport Service Prices Listing")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:c,lastPage:i,isFetching:o,onChange:function(e){t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:o},y.a.createElement(F.l,{bordered:!0,striped:!0,responsive:!0,headers:["Start Date","End Date","Cab Type","Service","Price","/km","Toll","Parking","Night","Min Km/Day"],rows:a.map(function(e){var t=e.start_date,a=e.end_date,n=e.cab_type,r=e.transport_service,l=e.price,c=e.per_km_charges,i=e.minimum_km_per_day,o=e.night_charges,u=e.parking_charges,s=e.toll_charges;return[de.a.utc(t).local().format("DD/MM/YYYY"),de.a.utc(a).local().format("DD/MM/YYYY"),n.name,r.name,l,c,s,u,o,i]}),alignCols:{4:"right",5:"right",6:"right",7:"right",8:"right",9:"right"}})))}),ur="TRANSPORT_SERVICES_STATE",sr={isFetching:!0,state:Ye()},mr={list:Object(A.createAsyncAction)("@TRANSPORT_SERVICES/LIST_FETCH_REQUEST","@TRANSPORT_SERVICES/LIST_FETCH_SUCCESS","@TRANSPORT_SERVICES/LIST_FETCH_FAILED")()},dr=Re(sr,mr);function Er(e){var t=e[ur];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function fr(e){return{getTransportServices:function(t){return e.get("/transport-services",{params:t}).then(function(e){return e.data})}}}var hr=Object(C.b)(function(e){var t=Er(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,transportServices:t.get()})},function(e){return{getTransportServices:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(mr.list.request()),fr(r).getTransportServices(e).then(function(e){return t(mr.list.success(e)),e.data}).catch(function(e){return t(mr.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getTransportServices,a=e.transportServices,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Transport Services List")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,isFetching:o,currentPage:c,lastPage:i,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:o},y.a.createElement(F.l,{responsive:!0,striped:!0,bordered:!0,headers:["Destinations","Distance (kms)"],alignCols:{1:"right"},rows:a.map(function(e){return[e.name,e.distance]})})))}),gr=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return fr(t).getTransportServices({q:e}).then(function(e){return e.data})}}))}),pr=q.object().shape({via:q.array().of(q.object().required("Destination is required")).min(1,"Atleast one locations required").required("Via field is required"),is_sightseeing:q.boolean(),distance:q.number().positive("Distance should be a positive number").integer("Distance should be an integer").required("Distance field is required")}),br={via:[void 0],is_sightseeing:!1,distance:0};var vr=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Add New Transport Service")),y.a.createElement(x.e,{initialValues:br,validationSchema:pr,onSubmit:function(e,n){n.setStatus();var r=e.distance,l=e.via,c=e.is_sightseeing;return t.post("/transport-services",{distance:r,via:l.map(function(e){return e.id}),is_sightseeing:+!!c}).then(function(){a&&a(".."),n.setSubmitting(!1)}).catch(function(e){return n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1),Promise.reject(e)})},render:function(e){var t=e.isSubmitting,a=e.values,n=e.status,r=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},n?y.a.createElement("div",null,n):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Transport Service"),y.a.createElement(x.c,{name:"via",render:function(e){var t=e.name,n=e.remove,l=e.push;return y.a.createElement("div",{className:"form-group"},y.a.createElement("p",null,"Add destinations for the transportation"),y.a.createElement(Fe,null,a.via.map(function(e,a,l){return y.a.createElement(xe,{md:3,key:a,style:{marginBottom:"10px"}},y.a.createElement(Z,{name:"".concat(t,".").concat(a),render:function(e){var t=e.field;return y.a.createElement(Fa,Object.assign({},t,{label:"Destination",multiple:!1,onChange:function(e,t){return r(t,e)}}))}}),l.length>1?y.a.createElement(F.d,{onClick:function(e){return n(a)}},"\xd7 Remove"):null)})),y.a.createElement("hr",null),y.a.createElement(F.d,{onClick:function(e){return l(void 0)}},"+ Add More Destinations"))}}),y.a.createElement(ee,{name:"distance",type:"number",label:"Total distance for the transportation (in kms)",placeholder:"420",required:!0}),y.a.createElement(ee,{name:"is_sightseeing",type:"checkbox",label:"Includes sightseeing"}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function _r(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"btn float-right"},"New Transport Service"),y.a.createElement("h2",null,"Transport Services"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(vr,{path:"/new"}),y.a.createElement(hr,{path:"/"})))}var Sr=q.object().shape({prices:q.array().of(q.object().shape({start_date:q.string().required("Start date is required"),end_date:q.string().required("End date is required"),cab_type:q.object().required("Cab type is required"),transport_service:q.object().required("Transport service is required"),price:q.number(),per_km_charges:q.number(),minimum_km_per_day:q.number(),night_charges:q.number(),toll_charges:q.number(),parking_charges:q.number()}))}),yr={prices:[{start_date:"",end_date:"",cab_type:void 0,transport_service:void 0,price:void 0,per_km_charges:void 0,minimum_km_per_day:void 0,toll_charges:0,night_charges:0,parking_charges:0}]};var Tr=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(x.e,{initialValues:yr,validationSchema:Sr,onSubmit:function(e,n){n.setStatus();var r=[];e.prices.forEach(function(e){var t=e.cab_type,a=e.transport_service,n=e.start_date,l=e.end_date,c=Object(z.a)(e,["cab_type","transport_service","start_date","end_date"]);t&&a&&r.push(Object(k.a)({},c,{start_date:de()(n).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),end_date:de()(l).hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),cab_type_id:t.id,transport_service_id:a.id}))}),function(e){return{storePrice:function(t){return e.post("/cab-prices",t).then(function(e){return e.data.cab_price})}}}(t).storePrice({prices:r}).then(function(){n.setSubmitting(!1),a&&a("..")}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})},render:function(e){var t=e.status,a=e.isSubmitting,n=e.values,r=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",{style:{minInlineSize:"auto"}},y.a.createElement("legend",null,"Add Transport Service Price"),y.a.createElement(x.c,{name:"prices",render:function(e){var t=e.name,a=e.push,l=e.remove;return y.a.createElement("ol",{className:"list"},n.prices.map(function(e,n,c){return y.a.createElement("li",{key:n},y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(da,{label:"Start Date",name:"".concat(t,".").concat(n,".start_date"),required:!0})),y.a.createElement(xe,null,y.a.createElement(da,{label:"End Date",name:"".concat(t,".").concat(n,".end_date"),required:!0})),y.a.createElement(xe,null,y.a.createElement(Z,{name:"".concat(t,".").concat(n,".cab_type"),render:function(e){var t=e.field;return y.a.createElement(En,Object.assign({},t,{label:"Cab Type",multiple:!1,required:!0,fetchOnMount:!0,onChange:function(e,t){return r(t,e)}}))}})),y.a.createElement(xe,null,y.a.createElement(Z,{name:"".concat(t,".").concat(n,".transport_service"),render:function(e){var t=e.field;return y.a.createElement(gr,Object.assign({},t,{label:"Transport Service",multiple:!1,required:!0,fetchOnMount:!0,onChange:function(e,t){return r(t,e)}}))}}))),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(ee,{label:"Price (fixed)",name:"".concat(t,".").concat(n,".price"),type:"number",min:0})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Charges per Km",name:"".concat(t,".").concat(n,".per_km_charges"),type:"number",min:0})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Minimum Kms per Day",name:"".concat(t,".").concat(n,".minimum_km_per_day"),type:"number",min:0})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Toll charges per Km",name:"".concat(t,".").concat(n,".toll_charges"),type:"number",min:0})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Night Charges per Km",name:"".concat(t,".").concat(n,".night_charges"),type:"number",min:0})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"Parking Charges per km",name:"".concat(t,".").concat(n,".parking_charges"),type:"number",min:0}))),y.a.createElement("div",{className:"button-group"},y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return a(e)}},"+ Duplicate"),c.length>1?y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return l(n)}},"\xd7 Remove"):null))}),y.a.createElement("div",{className:"form-group"},y.a.createElement("hr",null),y.a.createElement(F.d,{onClick:function(){return a(yr.prices[0])}},"+ Add More Transport Prices")))}}),t?y.a.createElement("div",null,t):null,y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:a},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}})});var jr=q.object().shape({cabs:q.array().of(q.object().shape({start_date:q.string().required("Start date field is required"),no_of_days:q.number().positive("Number of days should be a positive integer").integer("Number of days should be a positive integer").required("Number of days is required."),cab_type:q.object().required("Cab type field is required"),transport_service:q.object().required("Service is required"),no_of_cabs:q.number().positive("Number of cabs should be a positive integer").integer("Number of cabs should be a positive integer.").required("Number of cabs is required")}))}),Cr={cabs:[{start_date:"",no_of_days:1,cab_type:void 0,transport_service:void 0,no_of_cabs:1,calculated_price:void 0,given_price:0,comments:""}]},Or=be(function(e){var t=e.initialValues,a=void 0===t?Cr:t,n=e.xhr,r=e.onChange,l=e.bookingFrom,c=e.bookingTo;function i(e){r&&r(e.cabs.reduce(function(e,t){return e+parseFloat((t.given_price?t.given_price:0).toString())},0),e.cabs.map(function(e){var t=e.start_date,a=(e.no_of_days,e.cab_type),n=e.transport_service,r=Object(z.a)(e,["start_date","no_of_days","cab_type","transport_service"]);return Object(k.a)({},r,{date:de()(t).hours(12).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),cab_type_id:a&&a.id,transport_service_id:n&&n.id})}))}Object(F.n)(function(){i(a)});var o=Object(S.useMemo)(function(){for(var e=[],t=de()(c).diff(de()(l),"days"),a=0;a<=t;a++)e.push({id:a,name:de()(l).add(a,"day").format("YYYY-MM-DD")});return e},[l,c]);return y.a.createElement(x.e,{initialValues:a,validationSchema:jr,onSubmit:function(e,t){t.setStatus();var a=[],r={cabs:[]};e.cabs.forEach(function(e){var t=e.start_date,n=e.no_of_days,l=e.cab_type,c=e.transport_service,i=e.no_of_cabs;if(t&&n&&l&&c&&i)for(var o=0;o<n;o++)r.cabs.push(Object(k.a)({},e,{start_date:de()(t).add(o,"days").format("YYYY-MM-DD"),no_of_days:1})),a.push({date:de()(t).add(o,"days").hours(12).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),cab_type_id:l.id,transport_service_id:c.id,no_of_cabs:i})}),function(e){return{getPrice:function(t){return e.get("/prices",{params:{cabs:t}}).then(function(e){return e.data})}}}(n).getPrice(a).then(function(e){r.cabs=r.cabs.map(function(t,a){return Object(k.a)({},t,{calculated_price:e.cab_prices_per_row[a],given_price:e.cab_prices_per_row[a]})}),t.setValues(r),t.setSubmitting(!1),i(r)}).catch(function(e){t.setStatus(e.message),e.formikErrors&&t.setErrors(e.formikErrors),t.setSubmitting(!1)})},render:function(e){var t=e.isSubmitting,n=e.values,r=e.status,u=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},r?y.a.createElement("div",null,r):null,y.a.createElement(x.c,{name:"cabs",render:function(e){var r=e.name,s=e.push,m=e.remove;return y.a.createElement("div",null,n.cabs.map(function(e,a){return y.a.createElement("fieldset",{key:a},y.a.createElement(Fe,null,y.a.createElement(xe,null,l&&c?y.a.createElement(Z,{name:"".concat(r,".").concat(a,".start_date"),render:function(t){var a=t.field;return y.a.createElement(F.k,Object.assign({},a,{label:"Start Date",options:o,searchable:!1,onQuery:function(){},value:o.find(function(t){return t.name===e.start_date}),placeholder:"Select a date...",required:!0,onChange:function(e,t){u(t,e.name)}}))}}):y.a.createElement(da,{label:"Start Date",name:"".concat(r,".").concat(a,".start_date"),required:!0})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"No of days",name:"".concat(r,".").concat(a,".no_of_days"),type:"number",required:!0,min:1,max:1e4})),y.a.createElement(xe,null,y.a.createElement(Z,{name:"".concat(r,".").concat(a,".cab_type"),render:function(e){var t=e.field;return y.a.createElement(En,Object.assign({},t,{label:"Cab Type",multiple:!1,fetchOnMount:!0,onChange:function(e,t){return u(t,e)}}))}})),y.a.createElement(xe,null,y.a.createElement(Z,{name:"".concat(r,".").concat(a,".transport_service"),render:function(e){var t=e.field;return y.a.createElement(gr,Object.assign({},t,{label:"Transport Service",multiple:!1,onChange:function(e,t){return u(t,e)}}))}})),y.a.createElement(xe,null,y.a.createElement(ee,{label:"No of cabs",name:"".concat(r,".").concat(a,".no_of_cabs"),type:"number",required:!0}))),y.a.createElement(F.g,null,y.a.createElement("p",null,y.a.createElement("b",null,"Get the price for this query")),y.a.createElement("div",{className:"button-group"},y.a.createElement(F.d,{type:"submit",disabled:t},"Get Prices"),void 0!==e.calculated_price?y.a.createElement(F.d,{disabled:!0},null===e.calculated_price?"NOT SET":e.calculated_price):null)),y.a.createElement(Fe,null,y.a.createElement(xe,{sm:"auto"},y.a.createElement(F.g,null,y.a.createElement("label",null,"Give Price"),y.a.createElement(X,{name:"".concat(r,".").concat(a,".given_price"),type:"number",value:e.given_price,onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)&&(t=void 0),i({cabs:n.cabs.map(function(e,n){return n!==a?e:Object(k.a)({},e,{given_price:t})})}),u(e.target.name,t)},min:0}))),y.a.createElement(xe,null,y.a.createElement(F.g,null,y.a.createElement("label",null,"Comments"),y.a.createElement(X,{name:"".concat(r,".").concat(a,".comments"),as:"textarea",maxLength:191,value:e.comments,placeholder:"Regarding pricing difference or any other",onChange:function(e){var t=e.target.value;i({cabs:n.cabs.map(function(e,n){return n!==a?e:Object(k.a)({},e,{comments:t})})}),u(e.target.name,t)}})))),y.a.createElement("hr",null),y.a.createElement("div",null,y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return s(e)}},"+ Duplicate"),n.cabs.length>1?y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return m(a)}},"\xd7 Remove"):null))}),y.a.createElement("div",null,y.a.createElement("div",null,y.a.createElement(F.d,{onClick:function(){return s(a.cabs[0])}},"+ Add More Price Queries"))))}}))}})});function wr(e){var t=Object(S.useState)(0),a=Object(se.a)(t,2),n=a[0],r=a[1];return y.a.createElement("div",null,y.a.createElement("div",{className:"flex align-items-center mb-8"},y.a.createElement(P.a,{to:"..",className:"mr-4 text-blue-600 hover:text-blue-800 text-lg px-2 border rounded-full"},y.a.createElement(F.h.ChevronDownIcon,{className:"rotate-90"})),y.a.createElement("h3",{className:"m-0"},"Calculate Transportation Prices")),y.a.createElement("p",null,"Please enter your transportation query and press get price to get the prices."),y.a.createElement(Or,{onChange:function(e){return r(e)}}),y.a.createElement("footer",{className:"mt-8 pb-8"},y.a.createElement("h4",null,y.a.createElement("mark",null,"Total Cost Price: ",n))))}function Nr(e){return y.a.createElement(V,null,y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement("h2",{className:"white-space-pre"},"Transport Service Prices")),y.a.createElement(xe,{className:"text-right d-flex align-items-center justify-content-end"},y.a.createElement("div",{className:"button-group"},y.a.createElement(P.a,{to:"new",className:"btn"},"Add Price"),y.a.createElement(P.a,{to:"calculate-price",className:"btn"},"Calculate Price")))),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Tr,{path:"/new"}),y.a.createElement(wr,{path:"/calculate-price"}),y.a.createElement(or,{path:"/"})))}var Pr=be(function(e){var t=e.xhr,a=e.navigate,n=e.trip,r=e.location,l=r&&r.state&&r.state.quote,c=Object(S.useState)(0),i=Object(se.a)(c,2),o=i[0],u=i[1],s=Object(S.useState)(0),m=Object(se.a)(s,2),d=m[0],E=m[1],f=Object(S.useState)([]),h=Object(se.a)(f,2),g=h[0],p=h[1],b=Object(S.useState)([]),v=Object(se.a)(b,2),_=v[0],T=v[1],j=Object(S.useState)(l?l.comments:""),C=Object(se.a)(j,2),O=C[0],w=C[1],N=de.a.utc(n.start_date).local().format("YYYY-MM-DD HH:mm:ss"),P=de.a.utc(n.end_date).local().format("YYYY-MM-DD HH:mm:ss");return y.a.createElement("div",{className:"pb-8"},y.a.createElement("h3",{className:"mb-8"},"Create a new quote"),y.a.createElement("section",{className:"mb-16"},y.a.createElement(Fe,null,y.a.createElement(xe,{lg:2},y.a.createElement("h5",null,"Calculate Prices for hotels"),y.a.createElement("p",null,"Please fill hotel details and then click on get price to get the respective prices. Update the given price if necessary.")),y.a.createElement(xe,null,y.a.createElement(an,{bookingFrom:N,bookingTo:P,initialValues:l?{hotels:l.hotels.map(function(e){var t=e.date,a=e.room_type,n=e.adults_with_extra_bed,r=e.children_with_extra_bed,l=e.children_without_extra_bed,c=e.no_of_rooms,i=Object(z.a)(e,["date","room_type","adults_with_extra_bed","children_with_extra_bed","children_without_extra_bed","no_of_rooms"]);return Object(k.a)({},i,{start_date:de.a.utc(t).local().format("YYYY-MM-DD"),no_of_nights:1,room_details:[{room_type:a,adults_with_extra_bed:n,children_with_extra_bed:r,children_without_extra_bed:l,no_of_rooms:c}]})})}:void 0,onChange:function(e,t){u(e),p(t)}}),y.a.createElement("footer",{className:"mt-4"},y.a.createElement("mark",null,"Total price for Accommodation: ",J(o)))))),y.a.createElement("section",{className:"mb-16"},y.a.createElement(Fe,null,y.a.createElement(xe,{lg:2},y.a.createElement("h5",null,"Calculate Prices for Cabs"),y.a.createElement("p",null,"Please fill the transportation details and click on get price to get the corresponding prices. Update given prices if necessary.")),y.a.createElement(xe,null,y.a.createElement(Or,{bookingFrom:N,bookingTo:P,initialValues:l?{cabs:l.cabs.map(function(e){var t=e.date,a=Object(z.a)(e,["date"]);return Object(k.a)({start_date:de.a.utc(t).local().format("YYYY-MM-DD"),no_of_days:1},a)})}:void 0,onChange:function(e,t){E(e),T(t)}}),y.a.createElement("footer",{className:"mt-4"},y.a.createElement("mark",null,"Total price for Transportation: ",J(d)))))),y.a.createElement("hr",null),y.a.createElement("h3",null,y.a.createElement("mark",null,"Total Cost Price: ",J(o+d))),y.a.createElement(F.g,null,y.a.createElement("label",null,"Any Comment"),y.a.createElement(X,{name:"comments",as:"textarea",value:O,onChange:function(e){return w(e.target.value)},placeholder:"Any comments regarding other services or anything else...",maxLength:191})),y.a.createElement(F.d,{primary:!0,onClick:function(){(function(e){return{saveQuote:function(t,a){return e.post("/trips/".concat(t,"/quotes"),a).then(function(e){return e.data.quote})}}})(t).saveQuote(n.id,{total_price:o+d,hotels:g,cabs:_,comments:O}).then(function(){a&&a("../quotes")})}},"Save Quote"))});function Fr(e){var t=e.initialState,a=e.render,n=e.children,r=Object(S.useState)(t),l=Object(se.a)(r,2),c={state:l[0],setState:l[1]};return a?a(c):"function"===typeof n?n(c):n||null}function xr(e,t){return{getTags:function(a){return e.get("/".concat(t,"-tags"),{params:a}).then(function(e){return e.data})},storeTags:function(a,n){return e.post("/".concat(t,"-tags"),{items:a,tags:n}).then(function(e){return e.data})}}}var qr=be(function(e){var t=e.xhr,a=e.type,n=Object(z.a)(e,["xhr","type"]);return y.a.createElement(F.a,Object.assign({multiple:!0,creatable:!0},n,{fetch:function(e){return xr(t,a).getTags({q:e}).then(function(e){return e.data})}}))}),kr=be(function(e){var t=e.type,a=e.itemId,n=e.xhr,r=e.tags,l=void 0===r?[]:r,c=e.onCancel,i=e.onSuccess;return y.a.createElement(x.e,{initialValues:{items:[a],tags:l},onSubmit:function(e,a){a.setStatus(),xr(n,t).storeTags(e.items,e.tags.map(function(e){return e.name})).then(function(){a.setSubmitting(!1),i()}).catch(function(e){a.setStatus(e.message),e.formikErrors&&a.setErrors(e.formikErrors),a.setSubmitting(!1)})},render:function(e){var a=e.setFieldValue,n=e.isSubmitting,r=e.status;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Edit Tags"),r?y.a.createElement("p",{className:"error-message"},r):null,y.a.createElement(Z,{name:"tags",render:function(e){var n=e.field;return y.a.createElement(qr,Object.assign({},n,{type:t,onChange:function(e,t){a(t,e)}}))}}),y.a.createElement("footer",null,y.a.createElement(F.d,{type:"submit",primary:!0,disabled:n},"Save"),y.a.createElement(F.d,{disabled:n,onClick:function(){c()}},"Cancel"))))}})});function Ar(e){return{getTrip:function(){var t=Object(Rt.a)(Ht.a.mark(function t(a){return Ht.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("/trips/".concat(a)).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),convertTrip:function(){var t=Object(Rt.a)(Ht.a.mark(function t(a){return Ht.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/converted-trips",a).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),logTransaction:function(){var t=Object(Rt.a)(Ht.a.mark(function t(a){return Ht.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.post("/payment-transactions",a).then(function(e){return e.data.data}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var Ir=be(function(e){var t=e.instalment,a=e.xhr,n=Object(F.m)(),r=Object(se.a)(n,3),l=r[0],c=r[1],i=r[2];return y.a.createElement(y.a.Fragment,null,y.a.createElement(F.d,{onClick:c},"Add"),y.a.createElement(F.e,{open:l,onClose:i,closeButton:!0},y.a.createElement(F.e.Header,null,y.a.createElement(F.e.Title,null,"Log Transaction")),y.a.createElement(F.e.Body,null,y.a.createElement("p",null,y.a.createElement("mark",null,"INR ",J(t.due_amount))," is due by",y.a.createElement("mark",null,de.a.utc(t.due_date).local().format("DD MMM, YYYY"))),y.a.createElement(x.e,{initialValues:{amount:t.due_amount,payment_mode:"netbanking",comments:""},onSubmit:function(e,n){var r=e.amount,l=e.comments,c=e.payment_mode;n.setStatus(),Ar(a).logTransaction({instalment_id:t.id,amount:r,payment_mode:c,comments:l}).then(function(){n.setSubmitting(!1),window.location=window.location}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setStatus(!1)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("p",{className:"error"},a):null,y.a.createElement(ee,{name:"amount",label:"Paid Amount (INR)",required:!0}),y.a.createElement(ee,{as:"select",name:"payment_mode",label:"Payment Mode",required:!0},y.a.createElement("option",{value:"cash"},"Cash"),y.a.createElement("option",{value:"netbanking"},"Netbanking"),y.a.createElement("option",{value:"upi"},"UPI"),y.a.createElement("option",{value:"others"},"Others")),y.a.createElement(ee,{name:"comments",as:"textarea",label:"Comments",placeholder:"Any comments consisting reference id or payment details"}),y.a.createElement(F.e.Footer,null,y.a.createElement(F.d,{primary:!0,disabled:t,type:"submit"},"Update"),y.a.createElement(F.d,{onClick:i},"Cancel")))}}))))});function Dr(e){var t=e.instalment;return y.a.createElement("div",null,t.transactions&&t.transactions.length?y.a.createElement("div",null,t.transactions.map(function(e){return y.a.createElement("div",{key:e.id},de.a.utc(e.date).local().format("DD MMM, YYYY [at] hh:mm A")," - ",J(e.amount)," /-",e.comments?y.a.createElement("blockquote",null,e.comments):null)})):y.a.createElement("p",null,"Nothing yet"),t.due_amount>0?y.a.createElement(Ir,{instalment:t}):null)}function Mr(e){var t=e.dueAmount,a=e.dueDate,n="Due";if(t<=0)n="Paid";else{var r=de.a.utc(a).local(),l=de()();r.isBefore(l)&&(n="Overdue")}return y.a.createElement(F.b,{className:ie()("Paid"===n&&"bg-green-300","Overdue"===n&&"bg-red-300","Due"===n&&"bg-yellow-300")},n)}function Yr(e){var t=e.date;return y.a.createElement("span",null,de.a.utc(t).local().format("DD MMM, YYYY"))}function Hr(e){var t=e.amount;return y.a.createElement("span",null,J(t))}function Rr(e){var t=e.date,a=e.amount;return y.a.createElement("div",null,y.a.createElement(Hr,{amount:a}),y.a.createElement("br",null),y.a.createElement(Mr,{dueAmount:a,dueDate:t}))}function Lr(e){var t=e.payments;return t&&t.length?y.a.createElement(F.l,{autoWidth:!0,caption:"Payments towards customer",headers:["Due Date","Due","Total","Paid","Transactions"],alignCols:{0:"right",2:"right",3:"right"},rows:t.reduce(function(e,t){return e.concat(t.instalments)},[]).map(function(e){return[y.a.createElement(Yr,{date:e.due_date}),y.a.createElement(Rr,{date:e.due_date,amount:e.due_amount}),y.a.createElement(Hr,{amount:e.amount}),y.a.createElement(Hr,{amount:e.paid_amount}),y.a.createElement(Dr,{instalment:e})]})}):null}function Ur(e){var t=e.payments;return t&&t.length?y.a.createElement(F.l,{caption:"Payments for accomodation",headers:["Hotel","Due Date","Due Amount","Total Amount","Paid Amount","Transactions"],striped:!1,bordered:!0,autoWidth:!0},y.a.createElement("tbody",null,t.map(function(e){var t=e.paymentable.hotel;return y.a.createElement(S.Fragment,{key:e.id},e.instalments.map(function(e,a,n){return y.a.createElement("tr",{key:e.id},0===a?y.a.createElement("td",{rowSpan:n.length,className:"vertical-align-middle"},y.a.createElement("b",null,t.name),y.a.createElement("br",null),y.a.createElement("small",null,t.location.short_name,", ",t.stars," Star")):null,y.a.createElement("td",null,y.a.createElement(Yr,{date:e.due_date})),y.a.createElement("td",null,y.a.createElement(Rr,{date:e.due_date,amount:e.due_amount})),y.a.createElement("td",null,y.a.createElement(Hr,{amount:e.amount})),y.a.createElement("td",null,y.a.createElement(Hr,{amount:e.amount})),y.a.createElement("td",null,y.a.createElement(Dr,{instalment:e})))}))}))):null}function Vr(e){var t=e.payments;return t&&t.length?y.a.createElement(F.l,{caption:"Payments for Transportation",headers:["Transportation","Due Date","Due","Total","Paid","Transactions"],striped:!1,bordered:!0,autoWidth:!0},y.a.createElement("tbody",null,t.map(function(e){var t=e.paymentable.cab_type,a=e.paymentable.transport_service;return y.a.createElement(S.Fragment,{key:e.id},e.instalments.map(function(e,n,r){return y.a.createElement("tr",{key:e.id},0===n?y.a.createElement("td",{rowSpan:r.length,className:"vertical-align-middle"},y.a.createElement("b",null,a.name),y.a.createElement("br",null),y.a.createElement("small",null,t.name)):null,y.a.createElement("td",null,y.a.createElement(Rr,{date:e.due_date,amount:e.due_amount})),y.a.createElement("td",null,y.a.createElement(Hr,{amount:e.due_amount})),y.a.createElement("td",null,y.a.createElement(Hr,{amount:e.amount})),y.a.createElement("td",null,y.a.createElement(Hr,{amount:e.paid_amount})),y.a.createElement("td",null,y.a.createElement(Dr,{instalment:e})))}))}))):null}function Br(e){var t=e.trip,a=t.id,n=t.start_date,r=t.end_date,l=t.locations,c=t.no_of_adults,i=t.children,o=t.trip_source,u=t.trip_id,s=t.contacts,m=t.tags;return y.a.createElement("div",null,y.a.createElement("h3",null,l.map(function(e){return e.short_name}).join(" \u2022 "),y.a.createElement("small",null,"(",o.short_name,"-",u||a,")")),y.a.createElement("dl",null,y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement("dt",null,"Dates"),y.a.createElement("dd",{className:"white-space-pre"},de.a.utc(n).local().format("DD MMM, YYYY")," ","to"," ",de.a.utc(r).local().format("DD MMM, YYYY"))),y.a.createElement(xe,null,y.a.createElement("dt",null,y.a.createElement(F.h.UsersIcon,null)," Pax"),y.a.createElement("dd",null,c," Adults",y.a.createElement("br",null),i?y.a.createElement("span",null,y.a.createElement(F.h.ChildIcon,null),i," Children"):"")),y.a.createElement(xe,null,y.a.createElement("dt",null,y.a.createElement(F.h.TagsIcon,null)," Tags"),y.a.createElement("dd",null,y.a.createElement(Fr,{initialState:!1},function(e){var a=e.state,n=e.setState;return a?y.a.createElement(kr,{type:"trip",tags:m,itemId:t.id,onSuccess:function(){n(!1)},onCancel:function(){n(!1)}}):y.a.createElement("div",null,m&&m.length?y.a.createElement(F.c,null,m.map(function(e){return y.a.createElement(F.b,{key:e.id},e.name)})):null,y.a.createElement(F.d,{onClick:function(){n(!0)},className:"p-0 w-8 h-8 ml-2 rounded-full"},y.a.createElement("span",{className:"rotate-90 inline-block"},"\u270e")))}))),y.a.createElement(xe,null,y.a.createElement("dt",null,"Travelers"),y.a.createElement("dd",null,y.a.createElement("ul",{className:"list"},s.map(function(e){return y.a.createElement("li",{key:e.id},y.a.createElement("b",null,e.name),y.a.createElement("br",null),y.a.createElement("span",null,y.a.createElement("a",{href:"tel:".concat(e.phone_number)},e.phone_number),e.email?y.a.createElement("span",null," ","\u2022\xa0",y.a.createElement("a",{href:"mailto:".concat(e.email)},e.email)):null))})))))))}var Qr=be(function(e){var t=e.trip,a=e.xhr,n=Object(F.m)(),r=Object(se.a)(n,3),l=r[0],c=r[1],i=r[2],o=t.latest_given_quote,u=t.converted_at;return o?y.a.createElement("fieldset",null,y.a.createElement("legend",null,y.a.createElement("h4",null,u?"Quote used for conversion":"Latest Given Quote")),y.a.createElement(tr,{givenQuote:o,readOnly:!!u,showHotelBookingStatus:!!u}),y.a.createElement(Jr,{trip:t,isConvertVisible:l,hideConvert:i,onConvert:function(e){return Ar(a).convertTrip(e)}}),u?null:y.a.createElement("footer",null,y.a.createElement(F.d,{onClick:c,primary:!0},"Mark as converted"))):null});function Gr(e){var t=e.trip,a=t.id,n=t.locations,r=t.trip_source,l=t.trip_id,c=t.customer_payments,i=t.cab_payments,o=t.hotel_payments;return y.a.createElement("div",null,y.a.createElement(N.a,null,y.a.createElement("title",null,n.map(function(e){return e.short_name}).join(" \u2022 ")," (",r.short_name,"-",l||a.toString(),")")),y.a.createElement(Br,{trip:t}),c?y.a.createElement(Lr,{payments:c}):null,o?y.a.createElement(Ur,{payments:o}):null,i?y.a.createElement(Vr,{payments:i}):null,y.a.createElement(Qr,{trip:t}))}var Kr=Object(C.b)(function(e,t){var a=In(e);return{isFetching:a.isFetching,trip:a.getItem(t.tripId)}},function(e){return{getTrip:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(kn.item.request()),Ar(r).getTrip(e).then(function(e){return t(kn.item.success(e)),e}).catch(function(e){return t(kn.item.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.tripId,a=e.isFetching,n=e.getTrip,r=e.navigate,l=e.trip;return Object(S.useEffect)(function(){t&&n(t)},[]),t?a?y.a.createElement("span",null,"Loading..."):l?y.a.createElement("div",null,y.a.createElement("ul",{className:"border-b flex mb-4 tabs"},y.a.createElement(ue,{to:"..",className:"border"},y.a.createElement(F.h.ChevronDownIcon,{className:"rotate-90"})),y.a.createElement(ue,{to:"",className:"border"},"Trip Details"),y.a.createElement(ue,{to:"given-quotes",className:"border"},"Given Quotes"),y.a.createElement(ue,{to:"quotes",className:"border"},"Quotes"),y.a.createElement(ue,{to:"new-quote",className:"border"},"New Quote")),y.a.createElement(P.e,null,y.a.createElement(Gr,{path:"/",trip:l}),y.a.createElement(ar,{path:"given-quotes",trip:l}),y.a.createElement(Zn,{path:"quotes",trip:l}),y.a.createElement(Pr,{path:"new-quote",trip:l}))):(r&&r(".."),null):(r&&r(".."),null)}),Wr=q.object().shape({instalments:q.array().of(q.object().shape({due_date:q.string().required("Instalment due date is required"),amount:q.number().positive("Instalment amount should a positive number").required("Instalment amount is required"),percentage:q.number().positive("Percentage should be a positive number").required("Percentage field is required")})).min(1,"Atleast one instalment should is required"),comments:q.string(),details_verified:q.boolean().required("Please verify the details before conversion")}).required("Conversion fields are required"),Jr=be(function(e){var t=e.trip,a=e.isConvertVisible,n=e.hideConvert,r=e.onConvert,l=e.xhr,c=t.id,i=t.locations,o=t.latest_given_quote,u=t.start_date,s=t.end_date,m=t.no_of_adults,d=t.children,E=Object(F.o)(function(){return o?er(l).getInstalments(o.id).then(function(e){return e.data}):Promise.reject("No given quote for the trip")},{isFetching:!0}),f=Object(se.a)(E,3),h=f[0],g=f[1],p=f[2].isFetching;return Object(S.useEffect)(function(){a&&g()},[a]),o?y.a.createElement(F.e,{open:a,onClose:n},y.a.createElement(F.e.Header,null,y.a.createElement(F.e.Title,null,"Trip Conversion")),y.a.createElement(F.e.Body,null,p?y.a.createElement(We,null):y.a.createElement(x.e,{initialValues:{comments:"",details_verified:!1,instalments:(h||[]).map(function(e){var t=e.amount,a=e.due_date;return{amount:parseFloat(t.toFixed(2)),due_date:de.a.utc(a).local().format("YYYY-MM-DD"),percentage:parseFloat((100*t/o.given_price).toFixed(2))}})},validationSchema:Wr,onSubmit:function(e,t){var a=e.details_verified,l=e.instalments,i=e.comments,u=o.given_price;if(t.setStatus(),!a)return t.setStatus("Please verify the details and select the checkbox when done."),void t.setSubmitting(!1);var s=l.reduce(function(e,t){return e+t.amount},0);if(s<u)return t.setStatus("Instalments doesn't sumup(Rs: ".concat(s," /-) with given quote's price (Rs: ").concat(u,") /-")),void t.setSubmitting(!1);window.confirm("".concat(s>u?"Total instalment is greater then given quote's amount. ":"","Are you sure you want to mark this trip as converted ?"))?r({instalments:l.map(function(e){e.percentage;return Object(z.a)(e,["percentage"])}),comments:i,trip_id:c}).then(function(){t.setSubmitting(!1),n()}).catch(function(e){return t.setStatus(e.message),e.formikErrors&&t.setErrors(e.formikErrors),Promise.reject(e)}):t.setSubmitting(!1)},render:function(e){var t=e.isSubmitting,a=e.values,r=e.setFieldValue,l=e.status;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,y.a.createElement("b",null,"Please verify following details with the customer")),y.a.createElement("p",null,y.a.createElement("b",null,"Trip to"," ",y.a.createElement("mark",null,i.map(function(e){return e.short_name}).join(", "))," ","from"," ",y.a.createElement("mark",null,de.a.utc(u).local().format("DD MMM, YYYY"))," ","to"," ",y.a.createElement("mark",null,de.a.utc(s).local().format("DD MMM, YYYY"))," ","with"," ",y.a.createElement("mark",null,m," Adults",d?" and ".concat(d," children"):"")," ","where the package cost is"," ",y.a.createElement("mark",null,y.a.createElement(F.h.RupeeIcon,null)," ",J(o.given_price)," /-"),".")),y.a.createElement("h5",null,"Quote Details"),y.a.createElement("hr",null),y.a.createElement(Xn,{quote:o.quote,readOnly:!0})),y.a.createElement("hr",null),y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Customer Instalments"),y.a.createElement(x.c,{name:"instalments",render:function(e){var t=e.name,n=e.push,l=e.remove;return y.a.createElement(y.a.Fragment,null,y.a.createElement("ul",{className:"list"},a.instalments.map(function(e,a,c){return y.a.createElement("li",{key:a},y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(ee,{name:"".concat(t,".").concat(a,".due_date"),label:"Date",type:"date"})),y.a.createElement(xe,null,y.a.createElement(F.g,null,y.a.createElement("label",{htmlFor:"".concat(t,".").concat(a,".percentage")},"Percentage"),y.a.createElement(x.b,{name:"".concat(t,".").concat(a,".percentage"),render:function(e){var n=e.field;return y.a.createElement(X,Object.assign({},n,{onChange:function(e){r("".concat(t,".").concat(a,".amount"),o.given_price*parseFloat(e.target.value||"0")/100),n.onChange(e)},type:"number"}))}}))),y.a.createElement(xe,null,y.a.createElement(F.g,null,y.a.createElement("label",{htmlFor:"".concat(t,".").concat(a,".amount")},"Amount"),y.a.createElement(x.b,{name:"".concat(t,".").concat(a,".amount"),render:function(e){var n=e.field;return y.a.createElement(X,Object.assign({},n,{onChange:function(e){r("".concat(t,".").concat(a,".percentage"),100*parseFloat(e.target.value||"0")/o.given_price),n.onChange(e)},type:"number"}))}}))),y.a.createElement(xe,{className:"d-flex align-items-center"},y.a.createElement("div",{className:"button-group"},y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return n(e)}},"+ Duplicate"),c.length>1?y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){return l(a)}},"\xd7 Remove"):null))))})),y.a.createElement("footer",null,y.a.createElement(F.d,{className:"btn--secondary",onClick:function(){var e=Math.max(100-a.instalments.reduce(function(e,t){return e+t.percentage},0),0);n({due_date:"",amount:o.given_price*e/100,percentage:e})}},"+ Add More Instalments")))}})),y.a.createElement(ee,{name:"comments",label:"Comments",as:"textarea",placeholder:"Any comments regarding verification or prices etc.."}),y.a.createElement(ee,{name:"details_verified",type:"checkbox",label:"Verified travel details with customer ?"}),l?y.a.createElement("p",{className:"error"},l):null,y.a.createElement(F.e.Footer,null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Mark as converted"),y.a.createElement(F.d,{onClick:n},"Cancel")))}}))):null}),zr="TRIP_SOURCES_STATE",$r={isFetching:!0,state:Ye()},Xr={list:Object(A.createAsyncAction)("@TRIP_SOURCES/LIST_FETCH_REQUEST","@TRIP_SOURCES/LIST_FETCH_SUCCESS","@TRIP_SOURCES/LIST_FETCH_FAILED")()},Zr=Re($r,Xr);function el(e){var t=e[zr];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function tl(e){return{getTripSources:function(t){return e.get("/trip-sources",{params:t}).then(function(e){return e.data})}}}var al=Object(C.b)(function(e){var t=el(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,tripSources:t.get()})},function(e){return{getTripSources:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(Xr.list.request()),tl(r).getTripSources(e).then(function(e){return t(Xr.list.success(e)),e.data}).catch(function(e){return t(Xr.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getTripSources,a=e.tripSources,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Trip Sources List")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,lastPage:i,currentPage:c,isFetching:o,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:o},y.a.createElement(F.l,{striped:!0,bordered:!0,headers:["Name","Short Name"],rows:a.map(function(e){return[e.name,e.short_name]})})))}),nl=be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return tl(t).getTripSources({q:e}).then(function(e){return e.data})}}))}),rl=q.object().shape({name:q.string().required("Name field is required"),short_name:q.string().required("Short name field is required")}),ll={name:"",short_name:""};var cl=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Trip Source")),y.a.createElement(x.e,{initialValues:ll,validationSchema:rl,onSubmit:function(e,n){return n.setStatus(),t.post("/trip-sources",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Source of Trips"),y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Travel Triangle",required:!0}),y.a.createElement(ee,{label:"Short name",name:"short_name",placeholder:"TT",required:!0}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function il(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"float-right btn"},"New Trip Source"),y.a.createElement("h2",null,"Trip Sources"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(cl,{path:"/new"}),y.a.createElement(al,{path:"/"})))}var ol=q.object().shape({trip_id:q.string(),start_date:q.string().required("Start date is required"),no_of_nights:q.number().positive("Number of nights should be a positive integer").integer("Number of nights should be a positive integer").required("Number of nights is required"),destinations:q.array().min(1,"Please select atleast one destination"),no_of_adults:q.number().positive("Number of adults should be a positive integer").integer("Number of adults should be a positive integer").required("Number of adults field is required"),children:q.array().of(q.object().shape({count:q.number().positive("Number of children should be positive integer").integer("Number of children should be positive integer").required("Number of children field is required"),age:q.number().positive("Child age should a positive number").required("Child age is required")})),trip_source:q.object().required("Trip Source Type is required"),contact:q.object().shape({name:q.string().required("Contact name is required."),email:q.string().email("Contact email address in invalid"),phone_number:q.number().typeError("Phone number is invalid").positive("Phone number should be an positive integer").required("Phone number is required")}).required()}),ul={trip_id:"",start_date:"",no_of_nights:1,destinations:[],no_of_adults:1,children:[],trip_source:void 0,contact:{name:"",email:"",phone_number:void 0,country:void 0}};var sl=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(x.e,{initialValues:ul,validationSchema:ol,onSubmit:function(e,n){n.setStatus();var r=e.start_date,l=e.no_of_adults,c=e.no_of_nights,i=e.children,o=void 0===i?[]:i,u=e.destinations,s=e.trip_source,m=e.trip_id,d=e.contact;if(r&&c&&l&&u&&u.length&&d.phone_number){var E={start_date:de()(r).hours(0).minutes(0).seconds(0).utc().format("YYYY-MM-DD HH:mm:ss"),end_date:de()(r).add(c,"day").hours(23).minutes(59).seconds(59).utc().format("YYYY-MM-DD HH:mm:ss"),no_of_adults:l,children:o.map(function(e){var t=e.count,a=e.age;return"".concat(t,"-").concat(a,"yo")}).join(","),locations:u.map(function(e){return e.id}),trip_id:m,trip_source_id:s?s.id:void 0,contact:{name:d.name,email:d.email,phone_number:d.phone_number,country_id:d.country?d.country.id:void 0}};t.post("/trips",E).then(function(e){var t=e.data.data;a&&a("../".concat(t.id)),n.setSubmitting(!1)}).catch(function(e){n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors),n.setSubmitting(!1)})}else n.setStatus("Please fill the required attributes"),n.setSubmitting(!1)},render:function(e){var t=e.isSubmitting,a=e.status,n=e.values,r=e.setFieldValue;return y.a.createElement(x.d,{noValidate:!0},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add New Trip"),a?y.a.createElement("div",null,a):null,y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(Z,{name:"destinations",render:function(e){var t=e.field;return y.a.createElement(Fa,Object.assign({},t,{label:"Destinations",onChange:function(e,t){return r(t,e)}}))}})),y.a.createElement(xe,null,y.a.createElement(da,{name:"start_date",label:"Start Date",required:!0})),y.a.createElement(xe,null,y.a.createElement(ee,{name:"no_of_nights",label:"Number of nights",type:"number",min:1,required:!0})),y.a.createElement(xe,null,y.a.createElement(Z,{name:"trip_source",render:function(e){var t=e.field;return y.a.createElement(nl,Object.assign({},t,{label:"Trip Source",required:!0,fetchOnMount:!0,onChange:function(e,t){return r(t,e)},multiple:!1}))}})),y.a.createElement(xe,null,y.a.createElement(ee,{name:"trip_id",label:"Trip ID",placeholder:"1231231"}))),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Pax Details"),y.a.createElement(ee,{name:"no_of_adults",label:"Number of adults",type:"number",min:1,required:!0}),y.a.createElement(x.c,{name:"children",render:function(e){var t=e.name,a=e.remove,r=e.push;return y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Children"),y.a.createElement("ul",{className:"list"},n.children.map(function(e,n){return y.a.createElement(Fe,{as:"li",key:n},y.a.createElement(xe,{xs:"auto"},y.a.createElement(ee,{label:"Age",name:"".concat(t,".").concat(n,".age"),type:"number",min:1,max:20,required:!0})),y.a.createElement(xe,{xs:"auto"},y.a.createElement(ee,{label:"Count",name:"".concat(t,".").concat(n,".count"),type:"number",min:1,max:1e4,required:!0})),y.a.createElement(xe,{xs:"auto",className:"d-flex align-items-center"},y.a.createElement(F.d,{className:"btn--secondary",onClick:function(e){return a(n)}},"\xd7 Remove")))}),y.a.createElement(F.d,{onClick:function(e){return r({count:1,age:6})}},"+ Add Children Details")))}}))),y.a.createElement(xe,{sm:6},y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Contact Details"),y.a.createElement(x.c,{name:"contact",render:function(e){var t=e.name;return y.a.createElement(Fe,null,y.a.createElement(xe,{sm:"auto"},y.a.createElement(ee,{name:"".concat(t,".name"),label:"Contact Name",required:!0,placeholder:"Anoop Rai"})),y.a.createElement(xe,{sm:"auto"},y.a.createElement(ee,{name:"".concat(t,".email"),label:"Email",required:!0,type:"email",placeholder:"user@domain.com"})),y.a.createElement(xe,null,y.a.createElement(ee,{name:"".concat(t,".phone_number"),label:"Phone Number",type:"number",required:!0,placeholder:"9779212232"})))}})))),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}})});function ml(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"float-right btn"},"Add New Trip"),y.a.createElement("h2",null,"Trips"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Dn,{path:"/"}),y.a.createElement(sl,{path:"/new"}),y.a.createElement(Kr,{path:":tripId/*"})))}var dl="TRIP_STAGES_STATE",El={isFetching:!0,state:Ye()},fl={list:Object(A.createAsyncAction)("@TRIP_STAGES/LIST_FETCH_REQUEST","@TRIP_STAGES/LIST_FETCH_SUCCESS","@TRIP_STAGES/LIST_FETCH_FAILED")()},hl=Re(El,fl);function gl(e){var t=e[dl];return Object(k.a)({},He(t.state),{get state(){return t},get isFetching(){return this.state.isFetching}})}function pl(e){return{getTripStages:function(t){return e.get("/trip-stages",{params:t}).then(function(e){return e.data})}}}var bl=Object(C.b)(function(e){var t=gl(e);return Object(k.a)({},t.meta,{isFetching:t.isFetching,tripStages:t.get()})},function(e){return{getTripStages:function(t){return e(function(e){return function(t,a,n){var r=n.xhr;return t(fl.list.request()),pl(r).getTripStages(e).then(function(e){return t(fl.list.success(e)),e.data}).catch(function(e){return t(fl.list.failure(e)),Promise.reject(e)})}}(t))}}})(function(e){var t=e.getTripStages,a=e.tripStages,n=e.total,r=e.from,l=e.to,c=e.currentPage,i=e.lastPage,o=e.isFetching,u=$e(),s=Object(se.a)(u,2),m=s[0],d=s[1];return Object(S.useEffect)(function(){t({page:c})},[]),y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"Trip Stages")),y.a.createElement(Fe,null,y.a.createElement(xe,null,y.a.createElement(et,{onSearch:function(e){d(e),t(Object(k.a)({},e,{page:1}))}})),y.a.createElement(xe,{className:"text-right"},y.a.createElement(F.j,{total:n,from:r,to:l,currentPage:c,lastPage:i,isFetching:o,onChange:function(e){return t(Object(k.a)({},m,{page:e}))}}))),y.a.createElement(ze,{total:n,isFetching:o},y.a.createElement(F.l,{striped:!0,bordered:!0,headers:["Name","Description"],rows:a.map(function(e){return[e.name,e.description]})})))}),vl=(be(function(e){var t=e.xhr,a=Object(z.a)(e,["xhr"]);return y.a.createElement(ft.a,Object.assign({multiple:!0},a,{fetch:function(e){return pl(t).getTripStages({q:e}).then(function(e){return e.data})}}))}),q.object().shape({name:q.string().required("Name field is required"),description:q.string().required("Description field is required")})),_l={name:"",description:""};var Sl=be(function(e){var t=e.xhr,a=e.navigate;return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,null,y.a.createElement("title",null,"New Trip Stage")),y.a.createElement(x.e,{initialValues:_l,validationSchema:vl,onSubmit:function(e,n){return n.setStatus(),t.post("/trip-stages",e).then(function(e){e.data,a&&a(".."),n.setSubmitting(!1)}).catch(function(e){n.setSubmitting(!1),n.setStatus(e.message),e.formikErrors&&n.setErrors(e.formikErrors)})},render:function(e){var t=e.isSubmitting,a=e.status;return y.a.createElement(x.d,{noValidate:!0},a?y.a.createElement("div",null,a):null,y.a.createElement("fieldset",null,y.a.createElement("legend",null,"Add new Trip Stage"),y.a.createElement(ee,{label:"Name",name:"name",placeholder:"Converted",required:!0}),y.a.createElement(ee,{label:"Description",name:"description",placeholder:"Trip Converted",required:!0}),y.a.createElement("footer",null,y.a.createElement(F.d,{primary:!0,type:"submit",disabled:t},"Save"),y.a.createElement(P.a,{to:"..",className:"btn"},"Cancel"))))}}))});function yl(e){return y.a.createElement(V,null,y.a.createElement(P.a,{to:"new",className:"float-right btn"},"New Trip Stage"),y.a.createElement("h2",null,"Trip Stages"),y.a.createElement("hr",null),y.a.createElement(P.e,null,y.a.createElement(Sl,{path:"/new"}),y.a.createElement(bl,{path:"/"})))}var Tl=function(e){return y.a.createElement("div",{className:"pt-20"},y.a.createElement("div",{className:"max-w-xl mx-auto text-center text-xl border rounded-lg py-20 px-4"},y.a.createElement("div",null,y.a.createElement("div",{className:"text-center mb-10"},y.a.createElement("div",{className:"text-5xl w-20 h-20 rounded-full bg-green-400 inline-block text-white"},y.a.createElement(F.h.OkIcon,{className:"align-middle"}))),y.a.createElement("h1",null,"Your Email Verified Successfully."),y.a.createElement("p",null,"You can now"," ",y.a.createElement(P.a,{to:"/",className:"text-blue-600 hover:text-blue-800"},"login")," ","to the Tourepedia Admin Dashboard."))))};a(313);function jl(e){var t=e.as,a=void 0===t?"div":t,n=e.className,r=Object(z.a)(e,["as","className"]);return y.a.createElement(a,Object.assign({className:ie()("drop-down",n)},r))}a(314),a(315);var Cl=L(function(e){var t=e.user;if(!t)return null;var a=t.name;return y.a.createElement("header",{className:"bg-black mb-4 text-white  text-lg"},y.a.createElement("nav",null,y.a.createElement("ul",{className:"flex items-center h-16"},y.a.createElement("li",{className:"inline-block px-2"},y.a.createElement("img",{alt:"Logo",src:"https://admintest.tourepedia.com/logo.jpg",className:"inline-block align-middle rounded-full shadow h-8"})),y.a.createElement(oe,{to:"/",className:"inline-block"},"Tourepedia Dashboard"),y.a.createElement(jl,{as:"li",className:"inline-block"},y.a.createElement(P.a,{to:"/trips",className:"inline-block"},"Trips"),y.a.createElement("ul",null,y.a.createElement(oe,{to:"/trip-sources"},"Trip Sources"),y.a.createElement(oe,{to:"/trip-stages"},"Trip Stages"))),y.a.createElement(jl,{as:"li",className:"inline-block"},y.a.createElement(P.a,{to:"/hotels"},"Hotels"),y.a.createElement("ul",null,y.a.createElement(oe,{to:"/meal-plans"},"Meal Plans"),y.a.createElement(oe,{to:"/room-types"},"Room Types"),y.a.createElement(oe,{to:"/hotel-payment-preferences"},"Payment Preferences"),y.a.createElement(oe,{to:"/hotel-booking-stages"},"Booking Stages"))),y.a.createElement(jl,{as:"li",className:"inline-block"},y.a.createElement(P.a,{to:"/transport-services"},"Transport Services"),y.a.createElement("ul",null,y.a.createElement(oe,{to:"/cab-types"},"Cab Types"),y.a.createElement(oe,{to:"/transport-service-prices"},"Transport Service Prices"),y.a.createElement(oe,{to:"/locations"},"Locations"),y.a.createElement(oe,{to:"/cabs"},"Cabs"))),y.a.createElement(jl,{as:"li",className:"inline-block"},y.a.createElement(P.a,{to:"/users"},"Users"),y.a.createElement("ul",{className:"menu"},y.a.createElement(oe,{to:"/roles"},"Roles"))),y.a.createElement(jl,{as:"li",className:"inline-block"},y.a.createElement("a",{className:"toggler",href:"#profile-and-settings"},"Hi ",a),y.a.createElement("ul",{className:"menu"},y.a.createElement(oe,{to:"/settings"},y.a.createElement(F.h.CogAltIcon,null)," Settings"),y.a.createElement(P.b,null,function(e){var t=e.location;return y.a.createElement(oe,{to:"/logout?from=".concat(t.pathname)},y.a.createElement(F.h.OffIcon,null)," Logout")}))))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ol=a(144),wl=a(145);var Nl,Pl=function(e,t){var a=t.initialState,n=t.thunkExtraAgrs,r=[wl.a.withExtraArgument(n)],l=[O.applyMiddleware.apply(void 0,r)];return Object(O.createStore)(e,a,Ol.composeWithDevTools.apply(void 0,l))}(Object(O.combineReducers)((Nl={},Object(_.a)(Nl,n.key,n.reducer),Object(_.a)(Nl,l.key,l.reducer),Object(_.a)(Nl,r.key,r.reducer),Object(_.a)(Nl,i.key,i.reducer),Object(_.a)(Nl,o.key,o.reducer),Object(_.a)(Nl,u.key,u.reducer),Object(_.a)(Nl,c.key,c.reducer),Object(_.a)(Nl,m.key,m.reducer),Object(_.a)(Nl,d.key,d.reducer),Object(_.a)(Nl,E.key,E.reducer),Object(_.a)(Nl,p.key,p.reducer),Object(_.a)(Nl,b.key,b.reducer),Object(_.a)(Nl,g.key,g.reducer),Object(_.a)(Nl,h.key,h.reducer),Object(_.a)(Nl,s.key,s.reducer),Object(_.a)(Nl,f.key,f.reducer),Nl)),{thunkExtraAgrs:{xhr:ve}}),Fl=y.a.createElement(C.a,{store:Pl},y.a.createElement(w.HelmetProvider,null,y.a.createElement(pe.Provider,{value:ve},y.a.createElement(function(){return y.a.createElement(S.Fragment,null,y.a.createElement(N.a,{titleTemplate:"%s | Tourepedia",defaultTitle:"Tourepedia"}),y.a.createElement(Cl,null),y.a.createElement(Pe,{fluid:!0},y.a.createElement(P.e,null,y.a.createElement(ne,{path:"/login"}),y.a.createElement(Ae,{path:"/forgot-password"}),y.a.createElement(De,{path:"/reset-password"}),y.a.createElement(je,{path:"/"}),y.a.createElement(le,{path:"/logout"}),y.a.createElement(qe,{path:"/settings/*"}),y.a.createElement(wt,{path:"/users/*"}),y.a.createElement(Ct,{path:"/roles/*"}),y.a.createElement(rn,{path:"/hotels/*"}),y.a.createElement(Zt,{path:"/meal-plans/*"}),y.a.createElement(ma,{path:"/room-types/*"}),y.a.createElement(Ma,{path:"/locations/*"}),y.a.createElement(pn,{path:"/cab-types/*"}),y.a.createElement(Fn,{path:"/cabs/*"}),y.a.createElement(ml,{path:"/trips/*"}),y.a.createElement(il,{path:"/trip-sources/*"}),y.a.createElement(yl,{path:"/trip-stages/*"}),y.a.createElement(_r,{path:"/transport-services/*"}),y.a.createElement(Nr,{path:"/transport-service-prices/*"}),y.a.createElement(za,{path:"/hotel-payment-preferences/*"}),y.a.createElement(Wn,{path:"/hotel-booking-stages/*"}),y.a.createElement(Tl,{path:"email-verified"}),y.a.createElement(Ce,{default:!0}))))},null))));j.a.render(Fl,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,1,2]]]);
//# sourceMappingURL=main.a8210f65.chunk.js.map